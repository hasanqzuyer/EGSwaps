"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[1408],{19260:(e,i,t)=>{t.d(i,{D:()=>n});var s=t(52983);function n(e){const i=(0,s.useRef)(e);i.current=e;const t=(0,s.useCallback)(((...e)=>("function"==typeof i.current?i.current:()=>{})(...e)),[]);return"function"==typeof e?t:e}},78922:(e,i,t)=>{t.d(i,{SP:()=>u,dr:()=>a,mQ:()=>r,nU:()=>d});var s=t(98479),n=t(52983),o=t(27618);const r=s.fC,a=n.forwardRef((({className:e,...i},t)=>n.createElement(s.aV,{ref:t,className:(0,o.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...i})));a.displayName=s.aV.displayName;const u=n.forwardRef((({className:e,...i},t)=>n.createElement(s.xz,{ref:t,className:(0,o.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground",e),...i})));u.displayName=s.xz.displayName;const d=n.forwardRef((({className:e,...i},t)=>n.createElement(s.VY,{ref:t,className:(0,o.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...i})));d.displayName=s.VY.displayName},74377:(e,i,t)=>{t.d(i,{d0:()=>a,SD:()=>m,ch:()=>y,uT:()=>P,PH:()=>f,v_:()=>B,iA:()=>L,a1:()=>b,Ub:()=>h,Gc:()=>S,Jo:()=>E,M2:()=>$,CE:()=>A,ls:()=>V,yi:()=>g.yi,uY:()=>g.uY});var s=t(86767),n=t(52983),o=t(87685),r=t(85177);const a=()=>{const{symbol:e}=(0,r.Dp)(),i=(0,o.d0)();return(0,n.useCallback)((t=>{t!==e&&(i({isBlank:!1,stateSymbol:t}),document.querySelector("#orderForm")?.scrollIntoView({behavior:"smooth"}))}),[i,e])};var u=t(42249),d=t(87250),c=t(17921),l=t(48977);const m=e=>{const i=(e=>{const{amountIn:i}=(0,l.E)(e);return(0,n.useMemo)((()=>new c.Z(i)),[i])})(e),t=(0,u.h)(),{initialed:s,symbol:o,qtyPrecision:r}=(0,l.E)(e);return(0,n.useMemo)((()=>s&&i.isFinite()?`${(0,d.uf)(i,r)} ${t[o]||o}`:"-"),[i,s,o,r,t])};t(73091);var p=t(41325);const y=e=>{const i=(0,p.r)(e);return(0,n.useMemo)((()=>i.isFinite()?`${i.toFixed(1)}x`:"-"),[i])};var g=t(47987);const P=e=>{const i=(0,g.UL)(e,"limitPrice"),t=(0,g.UL)(e,"pair"),s=(0,o.fV)(t);return(0,n.useMemo)((()=>{const e=new c.Z(i);return e.isFinite()?(0,d.uf)(e,s):"-"}),[i,s])},f=e=>{const i=(0,g.UL)(e,"pair"),t=(0,o.fV)(i),{close:s}=(0,o.Le)(i);return(0,n.useMemo)((()=>{const e=new c.Z(s);return e.isFinite()?(0,d.uf)(e,t):"-"}),[s,t])},B=e=>{const i=(0,g.UL)(e,"qty"),t=(0,g.UL)(e,"limitPrice");return(0,n.useMemo)((()=>{const e=new c.Z(i).multipliedBy(t);return e.isFinite()?(0,d.uf)(e.toFixed(1),1):"-"}),[t,i])},L=e=>{const i=(0,g.UL)(e,"pair"),t=(0,g.UL)(e,"isLong"),{productMap:s}=(0,r.GS)();return(0,n.useMemo)((()=>({symbol:i,isLong:t,symbolType:s[i]?.symbolType,symbolName:s[i]?.symbolName})),[t,i,s])},b=e=>{const i=(0,g.UL)(e,"takeProfit"),t=(0,g.UL)(e,"stopLoss"),s=(0,g.UL)(e,"pair"),r=(0,o.fV)(s);return(0,n.useMemo)((()=>{const e=new c.Z(i),s=new c.Z(t);return{takeProfit:e.isFinite()?(0,d.uf)(e,r):"-",stopLoss:s.isFinite()&&!s.isEqualTo(0)?(0,d.uf)(s,r):"-"}}),[r,t,i])};var v=t(95386),_=t(49229);const h=e=>{const i=(0,g.UL)(e,"limitPrice"),t=(0,g.UL)(e,"side"),s=(0,g.UL)(e,"pair"),r=(0,o.fV)(s),a=(e=>{const i=(0,g.UL)(e,"pair"),t=(0,g.UL)(e,"pairBase"),s=(0,g.UL)(e,"isLong"),r=(0,g.UL)(e,"qty"),{close:a}=(0,o.Le)(i),{data:u}=(0,o.Bu)(t),{data:d}=(0,o.Jg)(t);return(0,n.useMemo)((()=>{if(u&&d){const{slippageType:e,onePercentDepthAboveUsd:i,onePercentDepthBelowUsd:t,slippageLongP:n,slippageShortP:o}=u.slippageConfig||{},{longQty:l,shortQty:m}=d;if(1===e)return s?new c.Z(r).multipliedBy(a).plus(new c.Z((0,_.mb)(l.toString(),v.cB.qty)).multipliedBy(a)).dividedBy((0,_.mb)(i.toString(),v.cB.usd)).toFixed(4,c.Z.ROUND_UP):new c.Z(r).multipliedBy(a).plus(new c.Z((0,_.mb)(m.toString(),v.cB.qty)).multipliedBy(a)).dividedBy((0,_.mb)(t.toString(),v.cB.usd)).toFixed(4,c.Z.ROUND_UP);if(0===e)return s?(0,_.mb)(n.toString(),v.cB.percent):(0,_.mb)(o.toString(),v.cB.percent);if(2===e){const e=new c.Z(r).multipliedBy(a),u=new c.Z((0,_.mb)(l.toString(),v.cB.qty)).multipliedBy(a),d=new c.Z((0,_.mb)(m.toString(),v.cB.qty)).multipliedBy(a),p=(0,_.mb)((s?i:t).toString(),v.cB.usd),y=new c.Z((0,_.mb)((s?n:o).toString(),v.cB.percent)),g=(s?e.minus(d).plus(u):e.minus(u).plus(d)).dividedBy(p);return c.Z.max(g,y).toFixed(4,c.Z.ROUND_UP)}return NaN}return NaN}),[s,a,d,u,r])})(e),u=(0,n.useMemo)((()=>"LONG"===t),[t]);return(0,n.useMemo)((()=>{const e=u?new c.Z(i).multipliedBy(new c.Z(1).minus(a)):new c.Z(i).multipliedBy(new c.Z(1).plus(a));return e.isFinite()?(0,d.uf)(e,r):"-"}),[u,i,r,a])};var w=t(87405),M=t(57255),T=t(61878),Z=t(14676),F=t(17845),I=t(96988);const S=()=>{const{getI18n:e}=(0,I.V6)(),i=(0,o.E4)(),t=(0,T.t)(),s=(0,Z.Z)();return(0,n.useCallback)((async({hash:n,...o})=>{try{await(0,w.g2)({address:i.address,cancelLimitOrderParams:n,publicClient:t,getI18n:e,...o,config:s}),F.ee.emit("REFETCH_ORDER_LIST",void 0)}catch(e){M.A.error(e.shortMessage??e?.reason??e.error??e?.message)}return!0}),[i.address,t,e,s])};var k=t(38344);const D=new(t(58407).v);var N=t(59712);const E=()=>{const{getI18n:e}=(0,I.V6)(),i=(0,o.E4)(),t=(0,T.t)(),s=(0,Z.Z)();(0,n.useEffect)((()=>D.on("UPDATE_ORDER_TP_SL",(async n=>{const{hash:o,takeProfit:r,stopLoss:a,closeModalCallBack:u,leverage:d,isLong:c,symbol:l}=n;N.debug("updateOrderTpAndSl",o,r,a);try{await(0,w.rl)({publicClient:t,config:s,onUserConfirm:()=>u?.(),address:i.address,getI18n:e,tpSlParams:{hash:o,takeProfitPrice:(0,k.v)(r,v.cB.price),stopLossPrice:BigInt(a?(0,k.v)(a,v.cB.price):0)},leverage:d,isLong:c,symbol:l,updateType:"order"}),F.ee.emit("REFETCH_ORDER_LIST",void 0)}catch(e){}}))),[i,s,t,e]),(0,n.useEffect)((()=>D.on("UPDATE_ORDER_TP",(async n=>{const{hash:o,takeProfit:r,closeModalCallBack:a,leverage:u,isLong:d,symbol:c}=n;N.debug("updateOrderTp",o,r);try{await(0,w.yS)({publicClient:t,config:s,onUserConfirm:()=>a?.(),address:i.address,getI18n:e,takeProfitParams:{hash:o,takeProfitPrice:(0,k.v)(r,v.cB.price)},leverage:u,isLong:d,symbol:c,updateType:"order"}),F.ee.emit("REFETCH_ORDER_LIST",void 0)}catch(e){}}))),[i,s,t,e]),(0,n.useEffect)((()=>D.on("UPDATE_ORDER_SL",(async n=>{const{hash:o,stopLoss:r,closeModalCallBack:a,leverage:u,isLong:d,symbol:c}=n;N.debug("updateOrderSl",o,r);try{await(0,w.Iw)({publicClient:t,config:s,onUserConfirm:()=>a?.(),address:i.address,getI18n:e,stopLossParams:{hash:o,stopLossPrice:BigInt(r?(0,k.v)(r,v.cB.price):0)},leverage:u,isLong:d,symbol:c,updateType:"order"}),F.ee.emit("REFETCH_ORDER_LIST",void 0)}catch(e){}}))),[i,s,t,e])},R=()=>(0,n.useMemo)((()=>({updateTpAndSl:async e=>{D.emit("UPDATE_ORDER_TP_SL",e)},updateTp:async e=>{D.emit("UPDATE_ORDER_TP",e)},updateSl:async e=>{D.emit("UPDATE_ORDER_SL",e)}})),[]);var O=t(28216),C=t(10783),U=t(34395),x=t(87354);const q=e=>e.map((e=>{const i={orderHash:e.orderHash,broker:e.broker,pair:e.pair.replace("/",""),pairBase:e.pairBase,isLong:e.isLong,tokenIn:e.tokenIn,amountIn:e.amountIn.toString(),qty:(0,_.mb)(e.qty.toString(),v.cB.qty),limitPrice:(0,_.mb)(e.limitPrice.toString(),v.cB.price),stopLoss:(0,_.mb)(e.stopLoss.toString(),v.cB.price),takeProfit:(0,_.mb)(e.takeProfit.toString(),v.cB.price),timestamp:`${e.timestamp}000`,hash:e.orderHash,side:e.isLong?"LONG":"SHORT"};return{...e,...i}})).sort(((e,i)=>Number(i.timestamp)-Number(e.timestamp))),$=()=>{const e=(0,o.E4)(),{address:i,isConnected:t}=(0,O.m)(),s=(0,g.Lq)((e=>e.initialOrders)),r=(0,g.uY)(),{data:a,refetch:u,isSuccess:d,isFetching:c}=(0,C.u)({...e,functionName:"getLimitOrders",args:[i,"0x0000000000000000000000000000000000000000"],query:{enabled:t,gcTime:x.g_}});(0,U.x)({onBlockNumber(){u()},pollingInterval:3e4}),(0,n.useEffect)((()=>{t||s([])}),[s,t]),(0,n.useEffect)((()=>{d&&!r&&s(q(a??[]))}),[a,s,d,r]),(0,n.useEffect)((()=>{r&&!c&&s(q(a??[]))}),[a,s,c,r]),(0,n.useEffect)((()=>F.ee.on("REFETCH_ORDER_LIST",(()=>{u()}))),[u])},A=e=>{const{close:i}=(0,o.Le)(e);return(0,n.useMemo)((()=>i),[i])};var H=t(19260);const V=e=>{const i=(0,u.h)(),t=(0,g.UL)(e,"qty"),r=(0,g.UL)(e,"limitPrice"),a=(0,g.UL)(e,"side"),m=(0,g.UL)(e,"pair"),y=(0,g.UL)(e,"takeProfit"),P=(0,g.UL)(e,"stopLoss"),f=(0,o.fV)(m),B=(0,p.r)(e),{data:L}=(0,o.VT)(),{index:b}=(0,s.B)(e),{qtyPrecision:h,symbol:w}=(0,l.E)(e),M=(0,n.useMemo)((()=>"LONG"===a),[a]),T=(0,n.useMemo)((()=>h),[h]),Z=(0,n.useMemo)((()=>2),[]),F=(0,n.useMemo)((()=>M?L?.maxTakeProfitP?(0,_.mb)(L.maxTakeProfitP,v.cB.percent):"Infinity":L?.maxTakeProfitP?c.Z.minimum(new c.Z(B),(0,_.mb)(L.maxTakeProfitP,v.cB.percent)).toString():"Infinity"),[M,B,L?.maxTakeProfitP]),I=(e=>{const i=(0,g.UL)(e,"qty"),t=(0,g.UL)(e,"pairBase"),s=(0,g.UL)(e,"limitPrice"),r=(0,n.useMemo)((()=>new c.Z(i).multipliedBy(s)),[s,i]),a=(0,o.tz)(t,r);return(0,n.useMemo)((()=>(0,_.mb)(a?.liqLostP,v.cB.percent)),[a])})(e),S=(0,H.D)((e=>M?new c.Z(e).multipliedBy(b).dividedBy(t).plus(r):new c.Z(r).minus(new c.Z(e).multipliedBy(b).dividedBy(t)))),k=(0,H.D)((e=>M?new c.Z(e).minus(r).multipliedBy(t).dividedBy(b):new c.Z(r).minus(e).multipliedBy(t).dividedBy(b))),D=(0,H.D)((e=>new c.Z(t).multipliedBy(r).multipliedBy(e).dividedBy(B).dividedBy(b))),N=(0,H.D)((e=>new c.Z(e).multipliedBy(b).multipliedBy(B).dividedBy(new c.Z(t).multipliedBy(r)))),E=(0,H.D)((e=>M?new c.Z(e).multipliedBy(b).dividedBy(t).plus(r):new c.Z(r).minus(new c.Z(e).multipliedBy(b).dividedBy(t)))),O=(0,H.D)((e=>M?new c.Z(e).minus(r).multipliedBy(t).dividedBy(b):new c.Z(r).minus(e).multipliedBy(t).dividedBy(b))),C=(0,H.D)((e=>new c.Z(t).multipliedBy(r).multipliedBy(e).dividedBy(B).dividedBy(b))),U=(0,H.D)((e=>new c.Z(e).multipliedBy(b).multipliedBy(B).dividedBy(new c.Z(t).multipliedBy(r)))),x=(0,H.D)((e=>`${(0,d.uf)(e,T)} ${i[w]||w}`)),q=(0,H.D)((e=>(0,d.uf)(e,Z))),$=(0,H.D)((e=>(0,d.uf)(e,f)));return(0,n.useMemo)((()=>({getTakeProfitPrice:S,getTakeProfitPNL:k,getTakeProfitPNLByROI:D,getTakeProfitROI:N,getStopLossPrice:E,getStopLossPNL:O,getStopLossPNLByROI:C,getStopLossROI:U,pair:m,takeProfit:y,stopLoss:P,pricePrecision:f,PNLPrecision:T,ROIPrecision:Z,side:a,maxTakeProfitROI:F,minStopLossROI:(-I).toString(),entryPrice:r,formatPNL:x,formatROI:q,formatPrice:$,useContractUpdateTPSL:R})),[S,k,D,N,E,O,C,U,m,y,P,f,T,Z,a,F,I,r,x,q,$])}},86767:(e,i,t)=>{t.d(i,{B:()=>r});var s=t(52983),n=t(87685),o=t(48977);const r=e=>{const{symbol:i}=(0,o.E)(e),t=(0,n.Ms)(i);return(0,s.useMemo)((()=>t),[t])}},41325:(e,i,t)=>{t.d(i,{r:()=>m});var s=t(95386),n=t(49229),o=t(17921),r=t(52983),a=t(87685),u=t(86767),d=t(73091),c=t(47987),l=t(48977);const m=e=>{const i=(0,c.UL)(e,"qty"),t=(0,c.UL)(e,"limitPrice"),{initialed:m,amountIn:p}=(0,l.E)(e),y=(0,d.C)(e),{data:g}=(0,a.VT)(),{symbol:P,index:f}=(0,u.B)(e),B=P&&m;return(0,r.useMemo)((()=>B?new o.Z(i).multipliedBy(t).dividedBy(new o.Z(p).multipliedBy(f).minus(y).minus((0,n.mb)(g?.executionFeeUsd.toString(),s.cB.usd))):new o.Z(1/0)),[B,i,t,p,f,y,g?.executionFeeUsd])}},73091:(e,i,t)=>{t.d(i,{C:()=>d});var s=t(95386),n=t(49229),o=t(17921),r=t(52983),a=t(87685),u=t(47987);const d=e=>{const i=(0,u.UL)(e,"qty"),t=(0,u.UL)(e,"pairBase"),d=(0,u.UL)(e,"limitPrice"),{data:c}=(0,a.Bu)(t,{watch:!0});return(0,r.useMemo)((()=>c&&c.feeConfig&&c.feeConfig.openFeeP?new o.Z(i).multipliedBy(d).multipliedBy((0,n.mb)(c.feeConfig.openFeeP,s.cB.percent)):"-"),[c,d,i])}},47987:(e,i,t)=>{t.d(i,{Lq:()=>n,UL:()=>a,uY:()=>r,yi:()=>o});var s=t(25048);const n=(0,t(76748).Ue)((e=>({initialed:!1,orders:[],orderMap:{},initialOrders(i){e((0,s.ZP)((e=>{e.initialed=!0,e.orders=i.map((e=>e.hash)),e.orderMap=i.reduce(((e,i)=>({...e,[i.hash]:i})),{})})))},addAOrder(i){e((0,s.ZP)((e=>{e.orders.push(i.hash),e.orderMap[i.hash]=i})))},deleteAOrderByHash(i){e((0,s.ZP)((e=>{delete e.orderMap[i],e.orders=e.orders.filter((e=>e!==i))})))}}))),o=()=>n((e=>e.orders)),r=()=>n((e=>e.initialed)),a=(e,i)=>n((t=>t.orderMap?.[e]?.[i]))},48977:(e,i,t)=>{t.d(i,{E:()=>u});var s=t(49229),n=t(17921),o=t(52983),r=t(87685),a=t(47987);const u=e=>{const i=(0,a.UL)(e,"amountIn"),t=(0,a.UL)(e,"tokenIn"),u=(0,r.QG)(t),d=(0,r.At)(t),c=(0,r.RK)(d),l=d&&void 0!==u;return(0,o.useMemo)((()=>({initialed:l,symbol:d,decimals:u,address:t,tokenIn:t,amountIn:new n.Z((0,s.mb)(i,u)),qtyPrecision:c})),[l,d,u,t,i,c])}},43664:(e,i,t)=>{t.d(i,{d0:()=>v,SD:()=>w,A4:()=>M,ch:()=>F,lW:()=>N,PH:()=>E,RM:()=>O,v_:()=>C,iA:()=>x,a1:()=>q,eO:()=>J,h2:()=>ie,Im:()=>ee,Jo:()=>ne,mM:()=>re,D:()=>de,OB:()=>ge,yS:()=>pe,rf:()=>Z,CE:()=>Pe,zS:()=>be,KB:()=>De,d:()=>l,mO:()=>Ne,$J:()=>m,Zm:()=>p,ZC:()=>P,kD:()=>f,Gn:()=>g,vH:()=>Oe});var s=t(52983),n=t(87685),o=t(87354),r=t(49229),a=t(17921),u=t(90471),d=t(25048);const c=(0,t(76748).Ue)((e=>({initialed:!1,positions:[],positionMap:{},initialPositions(i){e((0,d.ZP)((e=>{e.initialed=!0,e.positions=i.map((e=>e.hash)),e.positionMap=i.reduce(((e,i)=>({...e,[i.hash]:i})),{})})))},addAPosition(i){e((0,d.ZP)((e=>{e.positions.push(i.hash),e.positionMap[i.hash]=i})))},deleteAPositionByHash(i){e((0,d.ZP)((e=>{delete e.positionMap[i],e.positions=e.positions.filter((e=>e!==i))})))},updateAPosition(i,t,s){e((0,d.ZP)((e=>{if(e.positionMap[i]){const n=e.positionMap[i];e.positionMap[i]={...n,[t]:s}}})))},predictionInitialed:!1,predictions:[],predictionMap:{},initialPredictions(i){e((0,d.ZP)((e=>{e.predictionInitialed=!0,e.predictions=i.map((e=>e.positionHash)),e.predictionMap=i.reduce(((e,i)=>({...e,[i.positionHash]:i})),{})})))},addAPrediction(i){e((0,d.ZP)((e=>{e.predictions.push(i.positionHash),e.predictionMap[i.positionHash]=i})))},deleteAPredictionByHash(i){e((0,d.ZP)((e=>{delete e.predictionMap[i],e.predictions=e.predictions.filter((e=>e!==i))})))}}))),l=()=>{const e=c((e=>e.positions)),i=c((e=>e.predictions));return"Classic"===(0,u.G)((e=>e.tradeModeTab))?e.length:i.length},m=()=>c((e=>e.positions)),p=()=>c((e=>e.initialed)),y=(e,i)=>c((t=>t.positionMap?.[e]?.[i])),g=()=>c((e=>e.predictions)),P=(e,i)=>c((t=>t.predictionMap?.[e]?.[i])),f=()=>c((e=>e.predictionInitialed)),B=e=>{const i=y(e,"margin"),t=y(e,"marginToken"),o=(0,n.QG)(t),u=(0,n.At)(t),d=(0,n.RK)(u),c=u&&void 0!==i&&void 0!==o;return(0,s.useMemo)((()=>({initialed:c,symbol:u,decimals:o,margin:new a.Z((0,r.mb)(i,o)),address:t,marginToken:t,qtyPrecision:d})),[c,u,o,i,t,d])},L=e=>{const{symbol:i}=B(e),t=o.ey[i],r=(0,n.Ms)(t||i);return(0,s.useMemo)((()=>r),[r])};var b=t(85177);const v=()=>{const{symbol:e}=(0,b.Dp)(),i=(0,n.d0)();return(0,s.useCallback)((t=>{t!==e&&(i({isBlank:!1,stateSymbol:t}),document.querySelector("#orderForm")?.scrollIntoView({behavior:"smooth"}))}),[i,e])};var _=t(42249),h=t(87250);const w=e=>{const i=(0,_.h)(),{initialed:t,margin:n,symbol:o,qtyPrecision:r}=B(e);return(0,s.useMemo)((()=>t&&n.isFinite()?`${(0,h.uf)(n,r)} ${i[o]||o}`:"-"),[t,n,r,o,i])},M=e=>{const i=y(e,"pair"),t=y(e,"entryPrice"),o=(0,n.fV)(i);return(0,s.useMemo)((()=>new a.Z(t).isFinite()?(0,h.uf)(t,o):"-"),[t,o])},T=e=>{const{symbol:i,index:t}=L(e),n=B(e);return(0,s.useMemo)((()=>({...n,initialed:n.initialed&&void 0!==i,margin:new a.Z(n.margin).multipliedBy(t)})),[t,n,i])},Z=e=>{const i=y(e,"qty"),t=y(e,"entryPrice"),{margin:n,initialed:o}=T(e);return(0,s.useMemo)((()=>o?new a.Z(i).multipliedBy(t).dividedBy(n):new a.Z(1/0)),[t,n,i,o])},F=e=>{const i=Z(e);return(0,s.useMemo)((()=>i.isFinite()?`${i.toFixed(1)}x`:"-"),[i])},I=e=>{const i=y(e,"openFee"),t=y(e,"executionFee"),n=y(e,"fundingFee"),o=y(e,"holdingFee"),{decimals:a}=B(e);return(0,s.useMemo)((()=>({openFee:(0,r.mb)(i,a),fundingFee:(0,r.mb)(n,a),executionFee:(0,r.mb)(t,a),holdingFee:(0,r.mb)(o,a)})),[a,t,n,o,i])},S=e=>{const{openFee:i,executionFee:t,fundingFee:n,holdingFee:o}=I(e),{symbol:r,index:u}=L(e);return(0,s.useMemo)((()=>({initialed:void 0!==r,openFee:new a.Z(i).multipliedBy(u),fundingFee:new a.Z(n).multipliedBy(u),executionFee:new a.Z(t).multipliedBy(u),holdingFee:new a.Z(o).multipliedBy(u)})),[t,n,o,u,i,r])};var k=t(95386);const D=e=>{const i=y(e,"qty"),t=y(e,"pairBase"),o=y(e,"entryPrice"),u=(0,s.useMemo)((()=>new a.Z(i).multipliedBy(o)),[o,i]),d=(0,n.tz)(t,u);return(0,s.useMemo)((()=>(0,r.mb)(d?.liqLostP,k.cB.percent)),[d])},N=e=>{const i=y(e,"entryPrice"),t=y(e,"side"),o=y(e,"pair"),r=y(e,"qty"),u=(0,n.fV)(o),{initialed:d,fundingFee:c,holdingFee:l}=S(e),{initialed:m,margin:p}=T(e),g=D(e),P=d&&m,f=(0,s.useMemo)((()=>"LONG"===t),[t]),B=(0,s.useMemo)((()=>new a.Z(p).multipliedBy(g).plus(new a.Z(c).minus(l)).dividedBy(r)),[c,l,g,p,r]);return(0,s.useMemo)((()=>{const e=f?new a.Z(i).minus(B):new a.Z(i).plus(B);return P&&e.isFinite()?e.isNegative()?"-":(0,h.uf)(e,u):"-"}),[i,P,f,B,u])},E=e=>{const i=y(e,"pair"),t=(0,n.fV)(i),{close:o}=(0,n.Le)(i);return(0,s.useMemo)((()=>new a.Z(o).isFinite()?(0,h.uf)(o,t):"-"),[o,t])},R=e=>{const i=y(e,"qty"),t=y(e,"pair"),o=y(e,"entryPrice"),r=y(e,"side"),{index:u}=L(e),{fundingFee:d,holdingFee:c}=I(e),{margin:l}=B(e),{close:m}=(0,n.Le)(t),p=(0,s.useMemo)((()=>"LONG"===r),[r]),g=(0,s.useMemo)((()=>p?new a.Z(m).minus(o).multipliedBy(i).dividedBy(u).plus(new a.Z(d).minus(c)):new a.Z(o).minus(m).multipliedBy(i).dividedBy(u).plus(new a.Z(d).minus(c))),[o,d,c,u,p,m,i]),P=(0,s.useMemo)((()=>new a.Z(g).dividedBy(l)),[g,l]);return(0,s.useMemo)((()=>({PNL:g,ROI:P})),[g,P])},O=e=>{const i=(0,_.h)(),{PNL:t,ROI:n}=R(e),{initialed:o,symbol:r,qtyPrecision:a}=B(e);return(0,s.useMemo)((()=>{const e=(0,h.uf)(t,a),s=`${(0,h.uf)(n.multipliedBy(100),2)}%`,u=n.multipliedBy(100),d=t.isFinite(),c=n.isFinite(),l=t.isNegative(),m=t.gt(0),p=n.lt(0),y=i[r]||r;return{PNL:o&&d?l?`${e} ${y}`:`+${e} ${y}`:"-",ROI:o&&c?p?s:`+${s}`:"-",PNLAbbr:o&&d?`${l?"-":"+"}${(0,h.pF)(Math.abs(t.toNumber()),a)}`:"-",isPNLNegative:l,isPNLPositive:m,isROINegative:p,marginSymbol:y,ROIInNumber:u.toNumber()}}),[t,a,n,o,r,i])},C=e=>{const i=y(e,"qty"),t=y(e,"pair"),{close:o}=(0,n.Le)(t);return(0,s.useMemo)((()=>{const e=new a.Z(i).multipliedBy(o);return e.isFinite()?(0,h.uf)(e.toFixed(1),1):"-"}),[o,i])};var U=t(8429);const x=e=>{const i=y(e,"pair"),t=y(e,"isLong"),{products:n}=(0,b.GS)(),o=(0,s.useMemo)((()=>Object.fromEntries(n.filter((e=>(0,U.L)(e.symbolType).isClassicMode||(0,U.L)(e.symbolType).isDegenMode)).map((e=>[e.symbol,e])))),[n]);return(0,s.useMemo)((()=>({symbol:i,isLong:t,symbolType:o[i]?.symbolType,symbolName:o[i]?.symbolName,symbolPair:o[i]?.pair})),[t,i,o])},q=e=>{const i=y(e,"takeProfit"),t=y(e,"stopLoss"),o=y(e,"pair"),r=(0,n.fV)(o);return(0,s.useMemo)((()=>{const e=new a.Z(i),s=new a.Z(t);return{takeProfit:e.isFinite()?(0,h.uf)(e,r):"-",stopLoss:s.isFinite()&&!s.isEqualTo(0)?(0,h.uf)(s,r):"-"}}),[r,t,i])};var $=t(87405),A=t(14676),H=t(61878),V=t(17845),G=t(96988),Q=t(43785);const z=new(t(58407).v);var Y=t(59712);const J=()=>{const{getI18n:e}=(0,G.V6)(),i=(0,n.E4)(),t=(0,A.Z)(),o=(0,H.t)();(0,s.useEffect)((()=>z.on("ADD_MARGIN",(async s=>{const{hash:n,amount:r,closeModalCallBack:a,marginToken:u,leverage:d,decimals:c,symbol:l,tokenName:m,isLong:p}=s;Y.debug("ADD_MARGIN",n,r),(0,Q.wu)("click_add_margin_classic_popup_button");try{await(0,$.lZ)({config:t,publicClient:o,addMarginParams:{hash:n,amount:BigInt(r),marginToken:u},address:i.address,getI18n:e,onUserConfirm:a,leverage:d,decimals:c,symbol:l,tokenName:m,isLong:p}),(0,Q.wu)("add_margin_classic_success"),V.ee.emit("REFETCH_POSITION_LIST",void 0)}catch(e){(0,Q.wu)("add_margin_classic_error")}}))),[t,e,i,o])};var K=t(19260),j=t(59712);const W=()=>{const e=c((e=>e.positionMap)),{productMap:i}=(0,b.GS)();return(0,K.D)((t=>{const{pair:s}=e[t]||{};return s?i[s]?(0,U.L)(i[s].symbolType).isDegenMode:(j.error(`useIsDegenMode productMap can not found the pair by hash ${t} and pair ${s}`),!1):(j.error(`useIsDegenMode positionMap can not found the pair by hash ${t}`),!1)}))};var X=t(59712);const ee=()=>{const{getI18n:e}=(0,G.V6)(),i=W(),t=(0,n.E4)(),o=(0,A.Z)(),r=(0,H.t)();return(0,s.useCallback)((async({hash:s,isLong:n,leverage:a,symbol:u})=>{const d=i(s);(0,Q.wu)(d?"click_close_degen_position_button":"click_close_classic_position_button");try{await(0,$.ud)({address:t.address,closeTradeParams:s,config:o,getI18n:e,isLong:n,leverage:a,symbol:u,publicClient:r}),(0,Q.wu)(d?"close_degen_position_success":"close_classic_position_success")}catch(e){(0,Q.wu)(d?"close_degen_position_error":"close_classic_position_error")}return V.ee.emit("REFETCH_POSITION_LIST",void 0),!0}),[i,t.address,o,e,r])},ie=()=>{const e=m(),{getI18n:i}=(0,G.V6)(),t=(0,n.E4)(),o=(0,A.Z)(),r=(0,H.t)();return(0,s.useCallback)((async()=>{try{await(0,$.oc)({address:t.address,closeTradeParams:e,config:o,getI18n:i,publicClient:r})}catch(e){X.error(e)}return V.ee.emit("REFETCH_POSITION_LIST",void 0),!0}),[t.address,e,o,i,r])};var te=t(38344),se=t(59712);const ne=()=>{const{getI18n:e}=(0,G.V6)(),{setDisabled:i}=(0,b.a9)(),t=(0,n.E4)(),o=(0,A.Z)(),r=(0,H.t)();(0,s.useEffect)((()=>z.on("UPDATE_TRADE_TP_SL",(async i=>{const{hash:s,takeProfit:n,stopLoss:a,closeModalCallBack:u,leverage:d,isLong:c,symbol:l}=i;se.debug("updateTradeTpAndSl",s,n,a),(0,Q.wu)("class_position_edit_tpsl");try{await(0,$.rl)({publicClient:r,config:o,onUserConfirm:()=>u?.(),address:t.address,getI18n:e,tpSlParams:{hash:s,takeProfitPrice:(0,te.v)(n,k.cB.price),stopLossPrice:BigInt(a?(0,te.v)(a,k.cB.price):0)},leverage:d,isLong:c,symbol:l}),(0,Q.wu)("class_position_edit_tpsl_success"),V.ee.emit("REFETCH_POSITION_LIST",void 0)}catch(e){(0,Q.wu)("class_position_edit_tpsl_error")}}))),[t,i,o,r,e]),(0,s.useEffect)((()=>z.on("UPDATE_TRADE_TP",(async i=>{const{hash:s,takeProfit:n,closeModalCallBack:a,leverage:u,isLong:d,symbol:c}=i;se.debug("updateTradeTp",s,n),(0,Q.wu)("class_position_edit_tpsl");try{await(0,$.yS)({publicClient:r,config:o,onUserConfirm:()=>a?.(),address:t.address,getI18n:e,takeProfitParams:{hash:s,takeProfitPrice:(0,te.v)(n,k.cB.price)},leverage:u,isLong:d,symbol:c}),(0,Q.wu)("class_position_edit_tpsl_success"),V.ee.emit("REFETCH_POSITION_LIST",void 0)}catch(e){(0,Q.wu)("class_position_edit_tpsl_error")}}))),[t,i,o,r,e]),(0,s.useEffect)((()=>z.on("UPDATE_TRADE_SL",(async i=>{const{hash:s,stopLoss:n,closeModalCallBack:a,leverage:u,isLong:d,symbol:c}=i;se.debug("updateTradeSl",s,n),(0,Q.wu)("class_position_edit_tpsl");try{await(0,$.Iw)({publicClient:r,config:o,onUserConfirm:()=>a?.(),address:t.address,getI18n:e,stopLossParams:{hash:s,stopLossPrice:BigInt(n?(0,te.v)(n,k.cB.price):0)},leverage:u,isLong:d,symbol:c}),(0,Q.wu)("class_position_edit_tpsl_success"),V.ee.emit("REFETCH_POSITION_LIST",void 0)}catch(e){(0,Q.wu)("class_position_edit_tpsl_error")}}))),[t,i,o,r,e])},oe=()=>(0,s.useMemo)((()=>({updateTpAndSl:async e=>{z.emit("UPDATE_TRADE_TP_SL",e)},updateTp:async e=>{z.emit("UPDATE_TRADE_TP",e)},updateSl:async e=>{z.emit("UPDATE_TRADE_SL",e)}})),[]),re=e=>{const i=P(e,"symbol"),t=(0,n.fV)(i),{close:o}=(0,n.Le)(i);return(0,s.useMemo)((()=>new a.Z(o).isFinite()?(0,h.uf)(o,t):"-"),[o,t])};var ae=t(41822),ue=t(14369);const de=()=>{const{data:e}=(0,ue.R)(),i=(0,ae.NL)();return{refetchPredictions:()=>{i.invalidateQueries({queryKey:[o.ac.DumbPositionList]})},usePredictionDataByFiled:P,usePredictionInitialed:f,usePredictions:g,usePricePrecision:n.fV,useAssetPrecision:n.RK,useCurrentPrice:re,predictionPairs:e}};var ce=t(28216),le=t(10783),me=t(34395);const pe=()=>{const{data:e}=(0,n.XB)({}),i=c((e=>e.initialPredictions)),{isConnected:t}=(0,ce.m)();(0,s.useEffect)((()=>{t||i([])}),[i,t]),(0,s.useEffect)((()=>{e&&e.success&&i(e.data)}),[i,e])},ye=e=>e.map((e=>{const i={positionHash:e.positionHash,pair:e.pair.replace("/",""),pairBase:e.pairBase,marginToken:e.marginToken,isLong:e.isLong,hash:e.positionHash,entryPrice:(0,r.mb)(e.entryPrice.toString(),k.cB.price),qty:(0,r.mb)(e.qty.toString(),k.cB.qty),stopLoss:(0,r.mb)(e.stopLoss.toString(),k.cB.price),takeProfit:(0,r.mb)(e.takeProfit.toString(),k.cB.price),timestamp:`${e.timestamp}000`,side:e.isLong?"LONG":"SHORT",margin:e.margin.toString(),executionFee:e.executionFee.toString(),fundingFee:e.fundingFee.toString(),openFee:e.openFee.toString(),holdingFee:e.holdingFee.toString(),tokenIn:e.tokenIn};return{...e,...i}})).sort(((e,i)=>Number(i.timestamp)-Number(e.timestamp))),ge=()=>{const e=(0,n.E4)(),{address:i,isConnected:t}=(0,ce.m)(),r=p(),a=c((e=>e.initialPositions)),{data:u,refetch:d,isSuccess:l,isFetching:m}=(0,le.u)({...e,functionName:"getPositionsV2",args:[i,"0x0000000000000000000000000000000000000000"],query:{enabled:t,gcTime:o.g_}});(0,me.x)({onBlockNumber(){d()},pollingInterval:3e4}),(0,s.useEffect)((()=>{t||a([])}),[a,t]),(0,s.useEffect)((()=>{l&&!r&&a(ye(u??[]))}),[u,a,l,r]),(0,s.useEffect)((()=>{r&&!m&&a(ye(u??[]))}),[u,a,m,r]),(0,s.useEffect)((()=>(V.ee.on("REFETCH_POSITION_LIST",d),()=>{V.ee.off("REFETCH_POSITION_LIST",d)})),[d])},Pe=e=>{const{close:i}=(0,n.Le)(e);return(0,s.useMemo)((()=>i),[i])};var fe=t(54872);const Be=()=>(0,s.useMemo)((()=>({addMargin:async e=>{z.emit("ADD_MARGIN",e)}})),[]),Le=e=>{const i=(0,_.h)(),{symbol:t,qtyPrecision:n}=B(e),{index:o}=L(e),{PNL:r,ROI:a}=R(e);return(0,s.useMemo)((()=>{const e=(0,h.FL)(r,n),s=`${(0,h.uf)(a.multipliedBy(100),2)}%`,u=r.isFinite(),d=a.isFinite(),c=r.isNegative(),l=r.gt(0),m=a.isNegative(),p=i[t]||t;return{PNL:u?`${c?"":"+"}${e} ${p} ( ≈ ${(0,h.uf)(r.multipliedBy(o),1)} USD\n      )`:"-",PNLOrigin:r,PNLFormatted:e,ROI:d?m?s:`+${s}`:"-",isPNLNegative:c,isPNLPositive:l,isROINegative:m,marginSymbol:p}}),[r,a,n,o,t,i])},be=e=>{const{getI18n:i}=(0,G.V6)(),t=y(e,"qty"),o=y(e,"isLong"),r=y(e,"entryPrice"),u=y(e,"pair"),{index:d}=L(e),c=Pe(u),l=D(e),{fundingFee:m}=S(e),{PNLOrigin:p}=Le(e),{fundingFee:g,holdingFee:P}=I(e),f=(0,n.fV)(u),[b=0]=(0,n.zC)(),{marginToken:v,margin:_,qtyPrecision:w}=B(e),M=(0,s.useMemo)((()=>new a.Z(t).multipliedBy(c)),[c,t]),T=(0,s.useCallback)((e=>new a.Z(_).plus(e)),[_]),Z=(0,s.useCallback)((e=>new a.Z(_).plus(e).plus(p).plus(g).minus(P)),[_,p,g,P]),F=(0,s.useCallback)((e=>new a.Z(t).multipliedBy(r).dividedBy(new a.Z(e).multipliedBy(d)).multipliedBy(.995)),[r,d,t]),k=(0,s.useCallback)((e=>Z(e).div(new a.Z(t).multipliedBy(c))),[t,c,Z]),N=(0,s.useCallback)((()=>new a.Z(1).div(b)),[b]),E=(0,s.useCallback)((()=>M.div(b).multipliedBy(new a.Z(1).div(d)).minus(new a.Z(_).plus(p).plus(g).minus(P)).multipliedBy(.995)),[M,b,d,_,p,P,g]),R=(0,s.useCallback)((e=>{const i=new a.Z(e).multipliedBy(l).multipliedBy(d).plus(m).dividedBy(t);return o?new a.Z(r).minus(i):new a.Z(r).plus(i)}),[r,m,d,o,l,t]);return(0,s.useMemo)((()=>({symbol:u,side:o?i("userinfo-positions-side-LONG","Long"):i("userinfo-positions-side-SHORT","Short"),isLong:o,marginToken:v,marginQtyPrecision:w,pricePrecision:f,formatNumber:h.uf,calcMargin:Z,calcInitialMargin:T,calcLeverage:F,calcMarginRatio:k,calcMaxMargin:E,calcLiqPrice:R,useTokenApprove:fe.Z,useContractAddMargin:Be,calcMaxMarginRatio:N})),[u,o,i,v,w,f,Z,k,T,F,E,R,N])},ve=e=>{const i=y(e,"timestamp"),{getI18n:t}=(0,G.V6)();return(0,s.useMemo)((()=>(0,h.jE)(Number(i),t)),[i,t])},_e=e=>{const{executionFee:i}=I(e),{executionFee:t}=S(e),{symbol:n,qtyPrecision:o}=B(e);return(0,s.useMemo)((()=>`${(0,h.FL)(new a.Z(i),o)} ${n} ( ≈ ${(0,h.uf)(t,2)} USD )`),[i,o,n,t])},he=e=>{const i=(0,_.h)(),{fundingFee:t,holdingFee:n}=I(e),{fundingFee:o,holdingFee:r}=S(e),{symbol:u,qtyPrecision:d}=B(e);return(0,s.useMemo)((()=>{const e=new a.Z(t).minus(n);return{fundingFee:`${e.isNegative()?"":"+"}${(0,h.FL)(e,d)} ${i[u]||u} ( ≈ ${(0,h.uf)(new a.Z(o).minus(r),2)} USD )`,isFundingFeeNegative:e.isNegative()}}),[t,n,d,u,o,r,i])},we=e=>{const i=(0,_.h)(),{symbol:t,qtyPrecision:n}=B(e),o=(e=>{const{margin:i}=B(e);return(0,s.useMemo)((()=>i),[i])})(e),{margin:r}=T(e);return(0,s.useMemo)((()=>`${(0,h.FL)(o,n)} ${i[t]||t} ( ≈ ${(0,h.uf)(r,1)} USD )`),[o,n,t,r,i])},Me=e=>{const{PNL:i}=R(e),{openFee:t,executionFee:s}=I(e);return i.minus(t).minus(s)},Te=e=>{const i=(0,_.h)(),{symbol:t,qtyPrecision:n}=B(e),o=Me(e),r=(e=>{const i=Me(e),{index:t}=L(e);return i.multipliedBy(t)})(e);return(0,s.useMemo)((()=>({netProfit:o.isNaN()?"-":`${o.isNegative()?"":"+"}${(0,h.FL)(o,n)} ${i[t]||t} ( ≈ ${(0,h.uf)(r,1)} USD )`,isNetProfitNegative:o.isNegative()})),[o,n,t,r,i])},Ze=e=>{const i=(0,_.h)(),{openFee:t}=I(e),{openFee:n}=S(e),{symbol:o,qtyPrecision:r}=B(e);return(0,s.useMemo)((()=>`${(0,h.FL)(new a.Z(t),r)} ${i[o]||o} ( ≈ ${(0,h.uf)(n,2)} USD )`),[t,r,o,n,i])},Fe=e=>{const i=y(e,"pair"),t=(0,b.Lh)(i,"baseAsset");return(0,s.useMemo)((()=>({pair:i,baseAsset:t})),[i,t])},Ie=e=>{const i=y(e,"margin"),t=y(e,"marginToken"),o=(0,n.QG)(t),u=I(e);return(0,s.useMemo)((()=>new a.Z((0,r.mb)(i,o)).plus(u.openFee).plus(u.executionFee)),[u,i,o])},Se=e=>{const i=(0,_.h)(),t=Ie(e),n=(e=>{const i=Ie(e),{index:t}=L(e);return i.multipliedBy(t)})(e),{symbol:o,qtyPrecision:r}=B(e);return(0,s.useMemo)((()=>`${(0,h.FL)(t,r)} ${i[o]||o} ( ≈ ${(0,h.uf)(n,1)} USD )`),[t,r,o,n,i])},ke=e=>{const i=C(e),t=y(e,"qty"),n=y(e,"pair"),o=(0,b.Lh)(n,"quantityPrecision");return(0,s.useMemo)((()=>({size:i,qty:(0,h.uf)(t,o)})),[t,o,i])},De=()=>{const e=(0,s.useCallback)((e=>{(0,Q.wu)(e?"pv_degen_position_detail_popup":"pv_classic_position_detail_popup")}),[]);return(0,s.useMemo)((()=>({usePositionDetailPair:Fe,usePositionDetailLeverage:F,usePositionDetailInitialMargin:we,usePositionDetailPrincipal:Se,usePositionDetailSymbol:x,usePositionDetailQtyAndSize:ke,usePositionDetailFundingFee:he,usePositionDetailOpenFee:Ze,usePositionDetailExecutionFee:_e,usePositionDetailEntryPrice:M,usePositionDetailLiquidPrice:N,usePositionDetailLiqLostRate:D,usePositionDetailPNLROI:Le,usePositionDetailNetProfit:Te,usePositionDetailDuration:ve,usePositionDetailPricePrecision:n.fV,onPositionDetailOpen:e,useIsDegenMode:W})),[e])},Ne=e=>{const i=(0,_.h)(),t=y(e,"qty"),o=y(e,"entryPrice"),u=y(e,"side"),d=y(e,"pair"),c=y(e,"takeProfit"),l=y(e,"stopLoss"),m=(0,n.fV)(d),p=Z(e),{fundingFee:g}=S(e),{data:P}=(0,n.VT)(),f=D(e),{index:b}=L(e),{qtyPrecision:v,symbol:w}=B(e),M=(0,s.useMemo)((()=>"LONG"===u),[u]),T=(0,s.useMemo)((()=>v),[v]),F=(0,s.useMemo)((()=>2),[]),I=(0,s.useMemo)((()=>M?P?.maxTakeProfitP?(0,r.mb)(P.maxTakeProfitP,k.cB.percent):"Infinity":P?.maxTakeProfitP?a.Z.minimum(new a.Z(p),(0,r.mb)(P.maxTakeProfitP,k.cB.percent)).toString():"Infinity"),[M,p,P?.maxTakeProfitP]),N=(0,K.D)((e=>M?new a.Z(e).multipliedBy(b).minus(g).dividedBy(t).plus(o):new a.Z(o).minus(new a.Z(e).multipliedBy(b).minus(g).dividedBy(t)))),E=(0,K.D)((e=>M?new a.Z(e).minus(o).multipliedBy(t).plus(g).dividedBy(b):new a.Z(o).minus(e).multipliedBy(t).plus(g).dividedBy(b))),R=(0,K.D)((e=>new a.Z(t).multipliedBy(o).multipliedBy(e).dividedBy(p).dividedBy(b))),O=(0,K.D)((e=>new a.Z(e).multipliedBy(b).multipliedBy(p).dividedBy(new a.Z(t).multipliedBy(o)))),C=(0,K.D)((e=>M?new a.Z(e).multipliedBy(b).minus(g).dividedBy(t).plus(o):new a.Z(o).minus(new a.Z(e).multipliedBy(b).minus(g).dividedBy(t)))),U=(0,K.D)((e=>M?new a.Z(e).minus(o).multipliedBy(t).plus(g).dividedBy(b):new a.Z(o).minus(e).multipliedBy(t).plus(g).dividedBy(b))),x=(0,K.D)((e=>new a.Z(t).multipliedBy(o).multipliedBy(e).dividedBy(p).dividedBy(b))),q=(0,K.D)((e=>new a.Z(e).multipliedBy(b).multipliedBy(p).dividedBy(new a.Z(t).multipliedBy(o)))),$=(0,K.D)((e=>`${(0,h.uf)(e,T)} ${i[w]||w}`)),A=(0,K.D)((e=>(0,h.uf)(e,F))),H=(0,K.D)((e=>(0,h.uf)(e,m)));return(0,s.useMemo)((()=>({getTakeProfitPrice:N,getTakeProfitPNL:E,getTakeProfitPNLByROI:R,getTakeProfitROI:O,getStopLossPrice:C,getStopLossPNL:U,getStopLossPNLByROI:x,getStopLossROI:q,pair:d,takeProfit:c,stopLoss:l,pricePrecision:m,PNLPrecision:T,ROIPrecision:F,maxTakeProfitROI:I,minStopLossROI:(-f).toString(),side:u,entryPrice:o,formatPNL:$,formatROI:A,formatPrice:H,useContractUpdateTPSL:oe})),[T,F,o,$,H,A,U,x,C,q,E,R,N,O,I,f,d,m,u,l,c])};var Ee=t(372);const Re=e=>(0,Ee.f)(e??"0")/10n**18n,Oe=e=>{const i=y(e,"qty"),t=y(e,"pair"),o=y(e,"pairBase"),r=y(e,"entryPrice"),a=y(e,"fundingFee"),u=y(e,"holdingFee"),{data:d}=(0,n.Bu)(o),{data:c}=(0,n.Jg)(o),{longQty:l,shortQty:m}=c,{close:p,symbol:g}=(0,n.Le)(t),P=y(e,"margin"),f=y(e,"marginToken"),B=(0,n.QG)(f)||k.cB.marginToken;return(0,s.useMemo)((()=>({entryPrice:(0,Ee.f)(r??"0"),marketPrice:g===t?(0,Ee.f)(p??"0"):0n,qty:(0,te.v)(i??"0",k.cB.qty),margin:Re(P)/10n**BigInt(B),fundingFee:Re(a),holdingFee:Re(u),longQty:l,shortQty:m,slippageConfig:d.slippageConfig})),[r,g,t,p,i,P,B,a,u,l,m,d.slippageConfig])}}}]);