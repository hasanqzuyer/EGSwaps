"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[6954],{95795:(e,t,a)=>{a.d(t,{t:()=>s});var r=a(66618),n=a(27618),l=a(52983),o=a(69738);const s=e=>{const{tip:t,children:a,tipClassName:s,mode:i="hover"}=e,[c,d]=(0,o.Z)(!1),[m,u]=(0,o.Z)(!0),p="click"===i,g=(0,l.useCallback)((()=>{d(!0)}),[d]),f=(0,l.useCallback)((()=>{d(!1)}),[d]),h=(0,l.useCallback)((()=>{u(!m),d(!c)}),[m,c,u,d]);return l.createElement(r.J2,{open:c},l.createElement(r.i9,null,l.createElement(r.yk,{side:"top",align:"start",className:"outline-none p-3 rounded",onMouseEnter:p&&m?void 0:g,onMouseLeave:p&&m?void 0:f,onEscapeKeyDown:f,onInteractOutside:f},l.createElement(r.QH,null),l.createElement("div",{className:(0,n.cn)("flex item-center text-t-secondary text-caption whitespace-pre-line",s)},t))),l.createElement(r.xo,{asChild:!0,onMouseEnter:p&&m?void 0:g,onMouseLeave:p&&m?void 0:f,onClick:p?h:g,className:"cursor-pointer"},a))}},37444:(e,t,a)=>{a.d(t,{W:()=>l});var r=a(27618),n=a(52983);const l=n.forwardRef((({activeIndex:e,options:t,canCancel:a,onChange:l,suffix:o,suffixClassName:s,optionClassName:i,...c},d)=>{const m=(0,n.useCallback)(((t,r)=>{t===e&&a?l?.(-1,void 0):l?.(t,r)}),[e,a,l]);return n.createElement("div",{...c,className:(0,r.cn)("flex h-6 gap-1 select-none",c.className),ref:d},t.map(((t,a)=>n.createElement("button",{type:"button",key:t.key,className:(0,r.cn)("flex cursor-pointer justify-center items-center radio-option flex-1 h-full rounded radio-option",e===a?"bg-border-line":"bg-interactive-interactive01",i),onClick:()=>m(a,t.key)},n.createElement("span",{className:"text-caption1 radio-option-text "+(e===a?"text-t-primary":"text-t-third")},t.label)))),o?n.createElement("div",{className:(0,r.cn)("flex-1 h-full",s)},o):null)}))},51308:(e,t,a)=>{a.d(t,{W:()=>r});const r=(0,a(31074).Ue)()((e=>({currentPredictionPeriod:null,setCurrentPredictionPeriod:t=>e((e=>({...e,currentPredictionPeriod:t})))})))},10091:(e,t,a)=>{a.d(t,{Q:()=>r,n:()=>n});const r="All",n=[{labelKey:r,labelTextKey:"ticker-market-all",labelTextValue:r,filterFunc:()=>!0},{labelKey:"crypto",labelTextKey:"ticker-market-crypto",labelTextValue:"Crypto",filterFunc:e=>0===e.pairType},{labelKey:"forex",labelTextKey:"ticker-market-forex",labelTextValue:"Forex",filterFunc:e=>2===e.pairType},{labelKey:"commodities",labelTextKey:"ticker-market-commodities",labelTextValue:"Commodities",filterFunc:e=>4===e.pairType}]},24757:(e,t,a)=>{a.d(t,{Fe:()=>l,IU:()=>i,ak:()=>s,dU:()=>o,nW:()=>n,t_:()=>c});const r=[[750,{min:50,max:500}],[1e3,{min:50,max:300}]],n=()=>({min:50,max:500}),l=e=>{const t=r.find((t=>e<=t[0]));return t?.[1]??r[0][1]},o=[{key:"1",label:"+100%"},{key:"2",label:"+200%"},{key:"3",label:"+300%"},{key:"5",label:"+500%"}],s=[{key:"1",label:"+100%"},{key:"2",label:"+200%"},{key:"3",label:"+300%"},{key:"5",label:"+500%"}],i=[{key:"1",label:"+100%"},{key:"2",label:"+200%"},{key:"3",label:"+300%"}],c=[{key:"0",label:"None"},{key:"-0.1",label:"-10%"},{key:"-0.25",label:"-25%"},{key:"-.5",label:"-50%"},{key:"-.75",label:"-75%"}]},7061:(e,t,a)=>{a.d(t,{FB:()=>d,Y0:()=>c,e9:()=>i});var r=a(89663),n=a(17921);const l=2,o="-%",s=1,i=(e,t)=>{let a=new n.Z(e);const{positiveSign:r=!1,decimals:i=l,customNaNDisplay:c=o,allowNegative:d=!0,rm:m=s}=t||{};if(a.isNaN())return c;d||(a=a.abs());const u=a.shiftedBy(2).dp(i,m).toFormat({suffix:"%",decimalSeparator:"."}).toString();return r?`+${u}`:u},c=(e,t,a=3)=>(0,r.yd)(e,t).replace((0,r.rv)(t,a),"$&,"),d=(e,t,a=3)=>c(e,t,a).replace(/\.?[0,]+$/,"")},62866:(e,t,a)=>{a.d(t,{Z:()=>k});var r=a(27618),n=a(32232),l=a(57255),o=a(58395),s=a(89339),i=a(88349),c=a(52983);const d=e=>c.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{fillRule:"evenodd",d:"M20 3a1 1 0 00-1-1H9a1 1 0 000 2h8.5a.5.5 0 01.5.5V17a1 1 0 102 0V3zm-6.5 5a.5.5 0 01.5.5v11a.5.5 0 01-.5.5h-7a.5.5 0 01-.5-.5v-11a.5.5 0 01.5-.5h7zM4 8a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V8z",clipRule:"evenodd",fill:"currentColor"})),m=e=>c.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("circle",{cx:"10",cy:"10",r:"7.5",stroke:"currentColor",strokeWidth:"1.667"}),c.createElement("path",{stroke:"currentColor",strokeWidth:"1.667",d:"m11.085 6.299 1.8-.033a.833.833 0 0 1 .85.848l-.034 1.8a.833.833 0 0 1-.244.575L9.49 13.457a.834.834 0 0 1-.574.244l-1.8.033a.833.833 0 0 1-.85-.848l.034-1.8a.833.833 0 0 1 .243-.575l3.97-3.969a.833.833 0 0 1 .573-.243Z"}),c.createElement("circle",{cx:"10",cy:"10",r:".833",fill:"currentColor"})),u=e=>c.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},c.createElement("path",{d:"M13 22a1 1 0 100-2H5V4h8a1 1 0 100-2H4a1 1 0 00-1 1v18a1 1 0 001 1h9z"}),c.createElement("path",{d:"M16.707 7.707a1 1 0 00-1.414 1.414L17.17 11H8a1 1 0 100 2h9.171l-1.878 1.879a1 1 0 101.414 1.414l3.586-3.586a1 1 0 000-1.414l-3.586-3.586z"}));var p=a(70377),g=a(28216),f=a(58272),h=a(37747),b=a(15100),v=a(59712);const x=e=>e?.replace(/(.{4})(.*)(.{4})/g,"$1...$3"),y=()=>{const{address:e,connector:t}=(0,g.m)(),a=(0,c.useMemo)((()=>e),[e]);return c.createElement(c.Fragment,null,c.createElement("div",{className:(0,r.cn)("user-address",t?.icon&&"w-4 sm:w-auto")},t?.icon?c.createElement("img",{src:t?.icon,alt:t.name,className:"w-4 h-4 sm:hidden"}):c.createElement("span",{className:"sm:hidden"},x(a)),c.createElement("div",{className:"user-address hidden sm:block"},x(a))),c.createElement(n.q,{className:"h-4 w-4"}))},k=({getI18n:e,onBeforeConnect:t,className:a,sideOffset:n,appendChild:k,...C})=>{const{isConnected:E,address:N,chain:P}=(0,g.m)(),{onBeforeConnect:w}=(0,h.o6)(),{setWalletConnectModalVisibility:I}=(0,b.v)(),L=(0,c.useCallback)((async()=>{try{await(w?.()),await(t?.()),I(!0)}catch(e){v.error(e)}}),[w,t,I]),{disconnectAsync:F}=(0,f.q)(),[,M]=(0,p.Z)(),T=(0,c.useCallback)((async()=>{localStorage.removeItem("WEB3_CONNECT_CACHED_PROVIDER");try{await F()}catch(e){v.error(e)}}),[F]),B=(0,c.useCallback)((()=>{M(N??"");const t=(0,l.A)(c.createElement("div",{className:"flex justify-between"},e("dex-header-copy-account-success","Copy Successfully"),c.createElement("button",{type:"button",onClick:()=>l.A.dismiss(t),className:"hover:text-t-linkHover"},c.createElement(o.E,{className:"w-6 h-5"}))))}),[N,M,e]);return E?c.createElement(i.h_,null,c.createElement(i.$F,{asChild:!0},c.createElement(s.z,{type:"button",variant:"secondary",id:"userActionDropdownMenuButton",size:"sm",className:(0,r.cn)("text-body2 pl-2 pr-0 py-1.5 sm:px-2 hover:bg-interactive-interactive01Hover",a),...C},c.createElement(y,null))),c.createElement(i.cq,null,c.createElement(i.AW,{className:"bg-interactive-interactiveBg min-w-[250px] data-[side=bottom]:rounded-b-lg data-[side=top]:rounded-t-lg shadow-elevation1",sideOffset:n??16},c.createElement(i.Xi,{className:"pt-3 px-4 pb-0 cursor-pointer [&:hover_svg]:text-t-linkHover mb-1",onSelect:B,asChild:!0},c.createElement("button",{type:"button",className:"w-full"},c.createElement("span",null,c.createElement("span",{className:"text-body2 text-t-third block text-left"},e("dex-header-my-wallet","My Wallet")),c.createElement("span",{className:"flex items-center gap-2"},c.createElement("span",{className:"text-headline3 text-t-primary"},x(N)),c.createElement(d,{className:"h-6 w-6 md:w-4 md:h-4 text-t-third"}))))),P?.blockExplorers?.default.url?c.createElement(i.Xi,{className:"p-4 gap-2 cursor-pointer hover:bg-interactive-interactiveBgHover",asChild:!0},c.createElement("a",{className:"text-subtitle2 [&:hover_svg]:text-t-linkHover",href:`${P?.blockExplorers?.default.url.replace(/\/$/,"")}/address/${N}`,target:"_blank",rel:"noreferrer"},c.createElement(m,{className:"h-6 w-6 text-t-third"}),e("dex-header-view-on-explorer","View on explorer"))):null,c.createElement(i.VD,{className:"my-1"}),c.createElement(i.Xi,{className:"p-4 flex gap-2 cursor-pointer [&:hover_svg]:text-t-linkHover hover:bg-interactive-interactiveBgHover",onSelect:T,asChild:!0},c.createElement("button",{type:"button",className:"w-full"},c.createElement(u,{className:"h-6 w-6 text-t-third"}),c.createElement("span",{className:"text-t-primary"},e("dex-header-disconnect",{defaultValue:"Disconnect"}))))))):c.createElement(s.z,{type:"button","aria-label":e("dex-header-ConnectWallet",{defaultValue:"Connect Wallet"}),onClick:L,size:"sm",className:(0,r.cn)("text-body2 whitespace-nowrap",a),...C},c.createElement("span",{className:"hidden sm:contents"},e("dex-header-ConnectWallet",{defaultValue:"Connect Wallet"})),c.createElement("span",{className:"contents sm:hidden"},e("dex-header-ConnectWallet-short",{defaultValue:"Connect"})),k||null)}},9125:(e,t,a)=>{a.d(t,{m:()=>s});var r=a(52983),n=a(6939),l=a(94300),o=a(55544);const s=e=>{const{data:t,isLoading:a,refetch:s,isError:i,queryKey:c}=(0,l.N)({allowFailure:!1,contracts:[{address:e.token,abi:n.Wo,functionName:"balanceOf",args:[e.address],chainId:e.chainId},{address:e.token,abi:n.Wo,functionName:"decimals",chainId:e.chainId},{address:e.token,abi:n.Wo,functionName:"symbol",chainId:e.chainId}],scopeKey:e.scopeKey,query:e.query}),[d,m,u]=t||[];return(0,r.useMemo)((()=>({data:d,decimals:m,symbol:u,formatted:(0,o.b)(d??0n,m??0),isLoading:a,refetch:s,isError:i,queryKey:c})),[d,m,u,a,s,i,c])}},88349:(e,t,a)=>{a.d(t,{$F:()=>d,AW:()=>u,VD:()=>g,Xi:()=>p,cq:()=>m,h_:()=>c});var r=a(26710),n=a(1596),l=a(30389),o=a(97330),s=a(52983),i=a(27618);const c=r.fC,d=r.xz,m=(r.ZA,r.Uv);r.Tr,r.Ee,s.forwardRef((({className:e,inset:t,children:a,...l},o)=>s.createElement(r.fF,{ref:o,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...l},a,s.createElement(n.Z,{className:"ml-auto h-4 w-4"})))).displayName=r.fF.displayName,s.forwardRef((({className:e,...t},a)=>s.createElement(r.tu,{ref:a,className:(0,i.cn)("z-dropdown min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",e),...t}))).displayName=r.tu.displayName;const u=s.forwardRef((({className:e,sideOffset:t=4,...a},n)=>s.createElement(r.Uv,null,s.createElement(r.VY,{ref:n,forceMount:!0,disableOutsidePointerEvents:!0,sideOffset:t,className:(0,i.cn)("z-dropdown min-w-[8rem] overflow-hidden animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a}))));u.displayName=r.VY.displayName;const p=s.forwardRef((({className:e,inset:t,...a},n)=>s.createElement(r.ck,{ref:n,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a})));p.displayName=r.ck.displayName,s.forwardRef((({className:e,children:t,checked:a,...n},o)=>s.createElement(r.oC,{ref:o,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...n},s.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},s.createElement(r.wU,null,s.createElement(l.Z,{className:"h-4 w-4"}))),t))).displayName=r.oC.displayName,s.forwardRef((({className:e,children:t,...a},n)=>s.createElement(r.Rk,{ref:n,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a},s.createElement("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},s.createElement(r.wU,null,s.createElement(o.Z,{className:"h-2 w-2 fill-current"}))),t))).displayName=r.Rk.displayName,s.forwardRef((({className:e,inset:t,...a},n)=>s.createElement(r.__,{ref:n,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a}))).displayName=r.__.displayName;const g=s.forwardRef((({className:e,...t},a)=>s.createElement(r.Z0,{ref:a,className:(0,i.cn)("-mx-1 my-1 h-px bg-border-line",e),...t})));g.displayName=r.Z0.displayName},24391:(e,t,a)=>{a.d(t,{l:()=>n});var r=a(52983);const n=e=>r.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{fillRule:"evenodd",d:"M6.628 8.775l.159-1.988 1.988-.159a3 3 0 001.707-.707L12 4.628l1.518 1.293a3 3 0 001.707.707l1.988.159.159 1.988a3 3 0 00.707 1.707L19.372 12l-1.293 1.518a3 3 0 00-.707 1.707l-.159 1.988-1.988.159a3 3 0 00-1.707.707L12 19.372l-1.518-1.293a3 3 0 00-1.707-.707l-1.988-.159-.159-1.988a3 3 0 00-.707-1.707L4.628 12l1.293-1.518a3 3 0 00.707-1.707zM4.861 5.778a1 1 0 01.917-.917l2.838-.226a1 1 0 00.569-.236l2.166-1.846a1 1 0 011.298 0l2.166 1.846a1 1 0 00.57.236l2.837.226a1 1 0 01.917.917l.226 2.838a1 1 0 00.236.569l1.846 2.166a1 1 0 010 1.298l-1.846 2.166a1 1 0 00-.236.57l-.226 2.837a1 1 0 01-.917.917l-2.838.226a1 1 0 00-.569.236l-2.166 1.846a1 1 0 01-1.298 0l-2.166-1.846a1 1 0 00-.57-.236l-2.837-.226a1 1 0 01-.917-.917l-.226-2.838a1 1 0 00-.236-.569L2.553 12.65a1 1 0 010-1.298l1.846-2.166a1 1 0 00.236-.57l.226-2.837zM13 9a1 1 0 10-2 0v3a1 1 0 102 0V9zm0 6a1 1 0 10-2 0 1 1 0 002 0z",clipRule:"evenodd"}))},32232:(e,t,a)=>{a.d(t,{q:()=>n});var r=a(52983);const n=e=>r.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{d:"M14.5 10.29a1 1 0 011 1v.353a1 1 0 01-.273.686l-2.5 2.65a1 1 0 01-1.454 0l-2.5-2.65a1 1 0 01-.273-.686v-.353a1 1 0 011-1h5z"}))},24973:(e,t,a)=>{a.d(t,{v:()=>n});var r=a(52983);const n=e=>r.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},r.createElement("path",{d:"M17.879 7.707a1 1 0 111.414 1.414l-6.586 6.586a1 1 0 01-1.414 0L4.707 9.121a1 1 0 111.415-1.414L12 13.586l5.879-5.879z"}))},94043:(e,t,a)=>{a.d(t,{b:()=>n});var r=a(52983);const n=e=>r.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",...e},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0147 14.2678C9.6364 14.2678 9.32975 13.9611 9.32975 13.5828V13.2599C8.88334 13.1707 8.45921 13.0305 8.11362 12.8593C7.7273 12.668 7.70961 12.1808 7.99564 11.8583C8.21607 11.6097 8.61862 11.6027 8.91562 11.7516C9.11384 11.8509 9.33284 11.93 9.53523 11.9781V10.6572C8.27299 10.3441 7.5 9.68852 7.5 8.58284C7.5 7.49674 8.23386 6.87052 9.43738 6.77267V6.51337C9.43738 6.1378 9.74184 5.83333 10.1174 5.83333C10.493 5.83333 10.7975 6.1378 10.7975 6.51337V6.84116C11.0945 6.90514 11.3745 6.99473 11.6234 7.10794C12.064 7.30831 12.0816 7.86427 11.7574 8.22369C11.5813 8.41898 11.2739 8.42577 11.0419 8.3019C10.8924 8.22212 10.7275 8.15683 10.5626 8.11318V9.35584C11.7074 9.66895 12.5 10.2463 12.5 11.3324C12.5 12.2326 11.9618 13.1425 10.6996 13.3187V13.5828C10.6996 13.9611 10.393 14.2678 10.0147 14.2678ZM9.14384 8.63177C9.14384 8.84703 9.25147 8.98402 9.58415 9.12101V8.09361C9.22211 8.18167 9.14384 8.44586 9.14384 8.63177ZM10.5528 10.8823V11.9879C10.8366 11.8803 10.8953 11.6553 10.8953 11.4596C10.8953 11.2052 10.7877 11.0095 10.5528 10.8823Z",fill:"currentColor"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.89261 5.28596C7.1662 4.01237 8.23492 3.33333 9.99997 3.33333C13.4002 3.33333 16.2059 5.87893 16.6153 9.16832C16.6721 9.62504 17.0397 10 17.5 10C17.9602 10 18.3377 9.62583 18.2923 9.16784C17.8747 4.95617 14.3215 1.66667 9.99997 1.66667C7.62288 1.66667 6.15498 2.66656 4.7141 4.10744L3.33332 5.48822V3.33333C3.33332 2.8731 2.96023 2.5 2.49999 2.5C2.03975 2.5 1.66666 2.8731 1.66666 3.33334V7.33333C1.66666 7.88562 2.11437 8.33333 2.66666 8.33333H6.66666C7.12689 8.33333 7.49999 7.96024 7.49999 7.5C7.49999 7.03976 7.12689 6.66667 6.66666 6.66667L4.5119 6.66667L5.89261 5.28596Z",fill:"currentColor"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1074 14.714C12.8338 15.9876 11.7651 16.6667 10 16.6667C6.59976 16.6667 3.79407 14.1211 3.38472 10.8317C3.32788 10.375 2.96025 10 2.50001 10C2.03978 10 1.6623 10.3742 1.70771 10.8322C2.12527 15.0438 5.67849 18.3333 10 18.3333C12.3771 18.3333 13.845 17.3334 15.2859 15.8926L16.6667 14.5118V16.6667C16.6667 17.1269 17.0398 17.5 17.5 17.5C17.9602 17.5 18.3333 17.1269 18.3333 16.6667V12.6667C18.3333 12.1144 17.8856 11.6667 17.3333 11.6667H13.3333C12.8731 11.6667 12.5 12.0398 12.5 12.5C12.5 12.9602 12.8731 13.3333 13.3333 13.3333H15.4881L14.1074 14.714Z",fill:"currentColor"}))},43693:(e,t,a)=>{a.d(t,{G:()=>o});var r=a(97458),n=a(52983),l=a(87685);const o=({href:e="",onClick:t,children:a,...o})=>{const s=(0,l.d0)(),i=(0,n.useCallback)((a=>{a.preventDefault(),t&&t(a);const r=e.match(/\/([\dA-Z]+)/)?.[1];s&&r&&s({isBlank:!1,stateSymbol:r})}),[s,e,t]);return(0,r.jsx)("a",{href:e,onClick:i,...o,children:a})}},16954:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Oa});var r=a(97458),n=a(78659),l=a(95386),o=a(87405),s=a(27618),i=a(28216),c=a(37747),d=a(98995),m=a(372),u=a(52983),p=a(58211),g=a(69738);const f=(new class{constructor(){this.map=new Map,this.kList=[]}initial(e){return this.kList=e,this.kList.forEach((e=>this.map.set(e,"default"))),this}reset(){return this.kList.forEach((e=>this.map.set(e,"default"))),this}set(e,t){return this.map.set(e,t),this}delete(e){return this.map.delete(e),this}toObject(){return Object.fromEntries(this.map)}}).initial(["tp","initial_margin","leverage","sl","slippage"]);var h=a(10091),b=a(58905),v=a(55544),x=a(98943),y=a(59712);const k=({collateral:e,leverage:t,indexPrice:a})=>e*t*(0,m.f)(a||"1")/10n**18n,C=({orderType:e,openFee:t,executionFee:a,collateral:r})=>{if("limit"===e)return r-t-a;if("market"===e)return r-t;throw new Error(`[function getInitialMarin]: Unsupported orderType ${e}`)},E=e=>(0,b.d)((0,m.f)(e)/10000n),N=e=>e?BigInt(e):0n,P=e=>BigInt(e||1),w=({leverageMargins:e,size:t})=>{const a=Array.from(e).sort(((e,t)=>e.notionalUsd===t.notionalUsd?0:e.notionalUsd>t.notionalUsd?1:-1));return a.find((e=>t<=e.notionalUsd))??a[a.length-1]??{}},I=({leverageMargins:e,size:t})=>{const a=w({leverageMargins:e,size:t});return BigInt(a?.initialLostP)},L=e=>e*10n**18n,F=e=>e/10n**18n,M=({longQty:e,marketPrice:t})=>e*t,T=({shortQty:e,marketPrice:t})=>e*t,B=({isLong:e,size:t,longQty:a,shortQty:r,slippageConfig:n,marketPrice:l})=>{if(n?.slippageType===x.cY.FIXED)return(0,m.f)(`${e?n?.slippageLongP:n?.slippageShortP}`)/10000n;if(n?.slippageType===x.cY.ONE_PERCENT_DEPTH){if(!t||!a)return 0n;if(0n===n.onePercentDepthAboveUsd)return 0n;const o=l,s=e?L(F(100000000n*a*o)+t)/n.onePercentDepthAboveUsd:L(F(100000000n*r*o)+t)/n.onePercentDepthBelowUsd;return(0,m.f)(""+Math.ceil(1e4*Number((0,b.d)(s)))/1e4)}if(n?.slippageType===x.cY.NET_POSITION){if(!t||!a)return 0n;const o=M({longQty:a*10n**8n,marketPrice:l})/10n**18n,s=T({shortQty:r*10n**8n,marketPrice:l})/10n**18n,i=e?n.onePercentDepthAboveUsd:n.onePercentDepthBelowUsd,c=BigInt(e?n?.slippageLongP:n?.slippageShortP)*10n**14n,d=(e?t-s+o:t-o+s)*10n**18n/i;return d>c?d:c}if(n?.slippageType===x.cY.DEGEN){if(!t||!a)return 0n;const o=M({longQty:a*10n**8n,marketPrice:l})/10n**18n,s=T({shortQty:r*10n**8n,marketPrice:l})/10n**18n,i=e?n.onePercentDepthAboveUsd:n.onePercentDepthBelowUsd,c=((e?t+o:t+s)-(e?n?.longThresholdUsd:n?.shortThresholdUsd))*10n**18n/i;return c>0n?c:0n}return 0n},S=({limitPrice:e,isLong:t,marketPrice:a,spread:r,orderType:n})=>{if("limit"===n)return e;if("market"===n)return t?a*(10n**18n+r)/10n**18n:a*(10n**18n-r)/10n**18n;throw new Error(`[functionName getEntryPrice] unsupported order type ${n}`)},V=({amountIn:e,entryPrice:t,leverage:a,openFeeRate:r,executionFeeUSD:n,indexPrice:l})=>0n===t||0n===e||0n===l?0n:(e*l/10n**18n-BigInt(n))*10n**18n/(t/a+t*(0,m.f)(`${r}`)/10n**22n),A=({size:e,entryPrice:t})=>0n===t?0n:e*10n**18n/t,D=e=>"true"===e,q=({entryPrice:e,isLong:t,returnOfInvestmentRate:a,leverage:r})=>{const n=18n,l=10n**(n-2n),o=10n**n;return e*(t?o+BigInt(parseInt(""+100*a,10))*l/r:o-BigInt(parseInt(""+100*a,10))*l/r)/o},R=({qty:e,entryPrice:t,tpSlPrice:a,isLong:r})=>r?(a-t)*e/10n**18n:(t-a)*e/10n**18n,$=({pnl:e,leverage:t,qty:a,entryPrice:r})=>a*r===0n?0n:e*t*10n**18n/(a*r/10n**18n)*100n,_=({entryPrice:e,slippage:t,isLong:a})=>{try{const r=(0,m.f)(`${t}`),n=(0,m.f)("100"),l=(a?e*(n+r):e*(n-r))/100n;return(0,v.b)(l,36)}catch(e){throw y.log("Error when parsing slippage",t),e}},z=({spread:e,limitPrice:t,isLong:a})=>a?t*((0,m.f)("1")-e)/10n**18n:t*((0,m.f)("1")+e)/10n**18n,U=({isLong:e,collateral:t,qty:a,maxOi:r,marketPrice:n,indexPrice:l,leverage:o})=>{if(0n===t||0n===o)return!1;const s=(e?M({longQty:a*10n**8n,marketPrice:n}):T({shortQty:a*10n**8n,marketPrice:n}))/10n**18n,i=k({collateral:t,leverage:o,indexPrice:l});return i+s!==0n&&r&&i+s>r},W=({pairBaseConfig:e,symbol:t,useWebsocketSymbolMarkPrice:a,useMarketInfo:r})=>{const{field:n}=(0,p.bc)({name:"acceptablePrice",shouldUnregister:!0,defaultValue:""}),{control:l}=(0,p.Gc)(),[o,s,i,c,d,g,f]=(0,p.qo)({name:["slippage","amountIn","isLong","leverage","orderType","pairBase","indexPrice"],control:l}),h=a(t,{enabled:"market"===d}),b=r(g),v=(0,m.f)(s||"0"),x=(0,m.f)(h.close??"0"),y=D(i),C=P(c),E=b?.data?.longQty,N=b?.data?.shortQty,w=k({collateral:v,leverage:C,indexPrice:f}),I=(0,m.f)("0"),L=B({collateral:v,isLong:y,leverage:C,marketPrice:x,slippageConfig:e?.slippageConfig,longQty:E,shortQty:N,size:w}),F=S({isLong:y,orderType:d,limitPrice:I,marketPrice:x,spread:L}),M=_({entryPrice:F,slippage:o||0,isLong:y});return(0,u.useEffect)((()=>{n.value!==`${M}`&&n.onChange(`${M}`)}),[M,n]),(0,u.useEffect)((()=>()=>{n.onChange("")}),[]),u.createElement("input",{type:"hidden",...n,value:void 0===n.value?"":n.value})};var O=a(57255),Q=a(32232),H=a(76933);const Z=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",...e},u.createElement("path",{fill:"currentColor",d:"M5.333 2.667A.667.667 0 0 0 4.667 2h-2A.667.667 0 0 0 2 2.667v10.666c0 .368.298.667.667.667h10.666a.667.667 0 0 0 .667-.667v-2a.667.667 0 0 0-1.333 0v1.334H3.333V3.333h1.334a.667.667 0 0 0 .666-.666Z"}),u.createElement("path",{fill:"currentColor",d:"M8.667 2a.667.667 0 1 0 0 1.333h3.057L5.138 9.92a.667.667 0 1 0 .943.943l6.586-6.586v3.057a.667.667 0 1 0 1.334 0V2.667A.667.667 0 0 0 13.333 2H8.667Z"}));var G=a(89339),j=a(9125),K=a(89115),Y=a(38344),J=a(26068),X=a(65042),ee=a(85022),te=a(28370);const ae=({getI18n:e,staticHost:t})=>{const a=(0,d.x)(),{isConnected:r,address:n}=(0,i.m)(),[l,o]=(0,ee.Z)("arbitrum-faucet-dialog",!1),[s,c]=(0,te.Z)(l??!1),{data:m,decimals:p}=(0,j.m)({address:n,chainId:K.Z.id,token:"0xb444362CB447f4A703596F2a26A98331A43432ce",query:{enabled:Boolean(r)}}),g=(0,u.useCallback)((()=>{o(!1),c(!1)}),[o,c]),f=(0,u.useCallback)((()=>{c(!0)}),[c]),h=void 0!==m&&m<(0,Y.v)("50",p??0),{writeContractAsync:b,data:v,isPending:x}=(0,J.S)(),{isLoading:y}=(0,X.A)({hash:v}),k=(0,u.useCallback)((async()=>{if(h)try{await b({address:"0x615a54c1392748c11823bb6db44877a09c83e16d",abi:[{inputs:[],name:"claimTestnetTokens",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"claimTestnetTokens"})}catch(e){O.A.error(e?.reason??e.error??e?.shortMessage??e?.message)}}),[b,h]);return a&&a!==K.Z.id?null:u.createElement("div",{className:"bg-interactive-bg border border-border-line py-3 px-2 rounded mb-3 relative overflow-hidden"},u.createElement("span",{className:"text-caption2 text-t-white rounded-bl rounded-tr absolute top-0 right-0 px-1 py-0.5 bg-interactive-primary"},e("orderForm-faucet-testnet","Testnet")),u.createElement("p",{className:"text-caption1 text-t-third flex items-center"},e("orderForm-faucet-title","Get tokens for Arbitrum Sepolia Testnet"),":"),u.createElement("div",{className:"mt-2 flex gap-4 justify-between"},u.createElement("p",{className:"text-t-third text-caption1 flex items-center"},e("orderForm-faucet-get-token","Get tokens")),u.createElement("div",{className:"flex"},h?u.createElement("button",{type:"button",className:"flex items-center text-caption1",onClick:k,disabled:y||x},u.createElement("img",{width:20,height:20,className:"w-5 h-5 mr-1",loading:"lazy",decoding:"async",src:`${t}/static/images/futures/assets/usdt.svg`}),e("orderForm-faucet-get-usdt","Get USDT"),u.createElement(Q.q,{className:"w-4 h-4 -rotate-90"})):null,u.createElement("button",{type:"button",className:"flex items-center text-caption1",onClick:f},u.createElement("img",{loading:"lazy",decoding:"async",width:20,height:20,className:"w-5 h-5 mr-1",src:`${t}/static/images/wallet/arb-logo.svg`}),e("orderForm-faucet-get-gas-token","Get AGOR"),u.createElement(Q.q,{className:"w-4 h-4 -rotate-90"})))),u.createElement(H.Vq,{open:s},u.createElement(H.cZ,{className:"w-full max-w-[300px] p-6"},u.createElement("img",{width:60,height:60,className:"w-[3.75rem] h-[3.75rem] mx-auto mb-4 block",loading:"lazy",decoding:"async",src:`${t}/static/images/futures/assets/docs-dark.svg`}),u.createElement("h2",{className:"text-subtitle1 text-t-primary mb-2 text-center"},e("orderForm-faucet-dialog-title","How to get gas token AGOR?")),u.createElement("p",{className:"text-body2 mb-2 text-center text-t-third"},e("orderForm-faucet-dialog-desc","AGOR is the gas token of the Arb test network. For details on how to get it, please see the FAQ.")),u.createElement("a",{className:"block text-subtitle2 text-t-link hover:text-t-linkHover text-center mb-2",href:"https://arbitrum-faucet.com/",target:"_blank",rel:"noreferrer"},u.createElement("span",{className:"flex items-center justify-center"},e("orderForm-faucet-dialog-faq","Check FAQ")," ",u.createElement(Z,{className:"w-5 h-5 ml-1"}))),u.createElement(G.z,{onClick:g,type:"button",className:"block w-full mt-6"},e("orderForm-faucet-dialog-ok","OK")))))},re=u.createContext({}),ne=u.createContext({});var le=a(73684),oe=a(24973);const se=e=>u.createElement("svg",{width:"10",height:"5",viewBox:"0 0 10 5",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{d:"M5 5L10 0L0 -4.37114e-07L5 5Z",fill:"currentColor"})),ie=le.fC,ce=(le.ZA,le.B4,u.forwardRef((({className:e,children:t,iconClassName:a,iconType:r="ChevronDown",...n},l)=>u.createElement(le.xz,{ref:l,className:(0,s.cn)("group flex h-10 w-full items-center justify-between rounded-md border border-input bg-transparent px-3 py-2 text-body2 ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n},t,t&&u.createElement(u.Fragment,null,"TriangleDown"===r&&u.createElement(le.JO,{asChild:!0},u.createElement(se,{className:(0,s.cn)("h-[10px] w-[10px] ml-1.5 group-aria-[expanded=true]:rotate-x-180",a),style:{transition:"transform 300ms ease-in-out"}})),"ChevronDown"===r&&u.createElement(le.JO,{asChild:!0},u.createElement(oe.v,{className:(0,s.cn)("h-4 w-4 ml-0.5 group-aria-[expanded=true]:rotate-x-180",a),style:{transition:"transform 300ms ease-in-out"}})))))));ce.displayName=le.xz.displayName;const de=u.forwardRef((({className:e,children:t,position:a="popper",...r},n)=>u.createElement(le.h_,null,u.createElement(le.VY,{ref:n,className:(0,s.cn)("relative z-dropdown min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md animate-in fade-in-80","popper"===a&&"translate-y-1",e),position:a,...r},u.createElement(le.l_,{className:(0,s.cn)("popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]")},t)))));de.displayName=le.VY.displayName,u.forwardRef((({className:e,...t},a)=>u.createElement(le.__,{ref:a,className:(0,s.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}))).displayName=le.__.displayName;const me=u.forwardRef((({className:e,children:t,...a},r)=>u.createElement(le.ck,{ref:r,className:(0,s.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a},u.createElement(le.eT,null,t))));me.displayName=le.ck.displayName,u.forwardRef((({className:e,...t},a)=>u.createElement(le.Z0,{ref:a,className:(0,s.cn)("-mx-1 my-1 h-px bg-muted",e),...t}))).displayName=le.Z0.displayName;var ue=a(75429),pe=a(42249),ge=a(31781),fe=a(7061);const he=({assetPrecision:e,balance:t})=>u.createElement("span",{className:"block text-body2 text-t-primary"},(0,fe.FB)(t??"0",e)),be=({erc20Address:e,context:t})=>{const{address:a,isConnected:r}=(0,i.m)(),{isLoading:n,formatted:o}=(0,j.m)({address:a,token:e,query:{enabled:Boolean(a)&&Boolean(e),refetchInterval:3e4}}),[s]=(0,p.qo)({name:["tokenInName"]}),c=(0,pe.h)(),{useAssetPrecision:d}=(0,u.useContext)(t),m=d((0,l.De)(s,c))||2;return n||!r?null:u.createElement(he,{balance:o,assetPrecision:m})},ve=({context:e})=>{const{address:t,isConnected:a}=(0,i.m)(),{isLoading:r,data:n}=(0,ge.K)({address:t,query:{enabled:Boolean(t),refetchInterval:3e4}}),[o]=(0,p.qo)({name:["tokenInName"]}),s=(0,pe.h)(),{useAssetPrecision:c}=(0,u.useContext)(e),d=c((0,l.De)(o,s))||2;return!r&&a&&n?u.createElement(he,{balance:n.formatted,assetPrecision:d}):null},xe=({erc20Address:e,context:t})=>e?u.createElement(be,{erc20Address:e,context:t}):u.createElement(ve,{context:t});var ye=a(31074),ke=a(92529);const Ce=(0,ye.Ue)()((e=>({amountIn:"",setAmountIn:t=>{e((e=>({...e,amountIn:t})))},isLong:"true",setIsLong:t=>{e((e=>({...e,isLong:t})))}}))),Ee=(0,ye.Ue)()((0,ke.tJ)((e=>({expiration:{},setExpiration:(t,a,r)=>{e((e=>({...e,expiration:{...e.expiration,[t]:{[a]:r}}})))},orderType:"market",setOrderType:t=>{e((e=>({...e,orderType:t})))},takeProfitRadio:"3",setTakeProfitRadio:t=>{e((e=>({...e,takeProfitRadio:t})))},degenTakeProfitRadio:"1",setDegenTakeProfitRadio:t=>{e((e=>({...e,degenTakeProfitRadio:t})))},takeProfitPercentage:"",setTakeProfitPercentage:t=>{e((e=>({...e,takeProfitPercentage:t})))},degenTakeProfitPercentage:"",setDegenTakeProfitPercentage:t=>{e((e=>({...e,degenTakeProfitPercentage:t})))},stopLossRadio:"0",setStopLossRadio:t=>{e((e=>({...e,stopLossRadio:t})))},degenStopLossRadio:"0",setDegenStopLossRadio:t=>{e((e=>({...e,degenStopLossRadio:t})))},stopLossPercentage:"",setStopLossPercentage:t=>{e((e=>({...e,stopLossPercentage:t})))},degenStopLossPercentage:"",setDegenStopLossPercentage:t=>{e((e=>({...e,degenStopLossPercentage:t})))},degenLeverage:50,setDegenLeverage:t=>{e((e=>({...e,degenLeverage:t})))},leverage:50,setLeverage:t=>{e((e=>({...e,leverage:t})))},slippage:1,setSlippage:t=>{e((e=>({...e,slippage:t})))},tokenIn:{},setTokenIn:(t,a)=>{e((e=>({...e,tokenIn:{...e.tokenIn,[t]:a}})))}})),{name:"user-futures-order-preference-persist",version:1})),Ne=({context:e,collateralTokens:t=[]})=>{const a=(0,pe.h)(),{field:r}=(0,p.bc)({name:"tokenIn"}),{field:n}=(0,p.bc)({name:"tokenInDecimals"}),{data:o}=(0,ue.d)({address:r.value,query:{enabled:Boolean(r.value)}}),{chain:s}=(0,i.m)();(0,u.useEffect)((()=>{s&&""===r.value&&n.value!==s.nativeCurrency.decimals?n.onChange(s.nativeCurrency.decimals):n.value!==o?.decimals&&void 0!==o?.decimals&&n.onChange(o?.decimals)}),[s,o?.decimals,r.value,n]);const{resetField:c,getValues:m}=(0,p.Gc)(),g=(0,u.useMemo)((()=>t?.find((e=>e.tokenAddress===r.value))||null),[t,r.value]),f=(0,d.x)(),h=Ee((e=>e.setTokenIn));(0,u.useEffect)((()=>{const e=m("tokenIn");(e&&t&&t.length>0&&!t.find((t=>t.tokenAddress===e))||void 0===e&&t&&t.length>0)&&c("tokenIn",{defaultValue:t?.at(0)?.tokenAddress})}),[t,m,c]);const b=(0,u.useCallback)((e=>{r.onChange(e),h(f,e),c("amountIn")}),[c,h,f]);return u.createElement(u.Fragment,null,u.createElement("input",{type:"hidden",...n,value:n.value??""}),u.createElement(ie,{value:r.value,onValueChange:void 0!==r.value&&t&&0!==t.length?b:void 0},u.createElement(ce,{className:"p-1 h-8 border-0 focus:ring-0 focus:outline-none ring-transparent ring-offset-transparent",ref:r.ref},g&&(0,l.De)(g.name,a)?u.createElement("div",{className:"flex flex-row items-center"},(0,l.De)(g.name,a)):null),u.createElement(de,{className:"bg-interactive-interactiveBg border-0 p-0 min-w-[140px] h-min max-h-[198px] shadow-elevation3",align:"end",sideOffset:-4,alignOffset:-8},t?.map((t=>u.createElement(me,{key:t.tokenAddress,value:t.tokenAddress,className:"cursor-pointer hover:bg-interactive-interactiveBgHover px-2 py-1 h-8 text-body2 [&>span]:w-full"},u.createElement("div",{className:"flex flex-row w-full items-center justify-between"},u.createElement("div",{className:"pr-4"},(0,l.De)(t.name,a)),u.createElement(xe,{erc20Address:t.tokenAddress,context:e}))))))))};var Pe=a(18185);const we=u.forwardRef((({className:e,type:t,...a},r)=>u.createElement("input",{type:t,className:(0,s.cn)("flex h-10 w-full rounded-md border-none bg-interactive-interactive01 autofill:bg-interactive-interactive01 px-3 py-3.5 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-t-placeholder focus-visible:outline-none focus-visible:bg-interactive-interactive01 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a})));we.displayName="Input";const Ie=(0,Pe.j)("rounded bg-interactive-interactive02 text-body1 focus-visible:ring-0 ring-0 focus-visible:ring-offset-0 placeholder:text-t-placeholder input-text-field",{variants:{inputSize:{default:"h-10 py-2 px-4",lg:"h-12 py-6 px-9",md:"h-10 py-2 px-4",sm:"h-6 px-2 text-caption1",xs:"h-4 px-2 py-1 text-caption1"}},defaultVariants:{inputSize:"default"}}),Le=u.forwardRef((({error:e,className:t,inputSize:a,...r},n)=>u.createElement(we,{ref:n,...r,className:(0,s.cn)(Ie({inputSize:a}),t,e?"border-t-error":"border-transparent")})));Le.displayName="TextField";var Fe=a(10783),Me=a(6939),Te=a(8301),Be=a(24391);const Se=u.memo((({errorNames:e,children:t,align:a="start"})=>{const{clearErrors:r,getFieldState:n}=(0,p.Gc)(),l=(0,u.useRef)(null),o=e.map((e=>n(e).error))[0],s=(0,u.useCallback)((()=>{r(e)}),[r,e]);return u.createElement("div",{className:"contents [&_[data-radix-popper-content-wrapper]]:!absolute [&_[data-radix-popper-content-wrapper]]:!w-full",ref:l},u.createElement(Te.u,{open:Boolean(o)},u.createElement(Te.aJ,{asChild:!0},t),u.createElement(Te.NM,{container:l.current},u.createElement(Te._v,{align:a,onPointerDownOutside:s,side:"top",className:"p-0 bg-interactive-interactive01 w-full z-tooltip max-w-none",sideOffset:8,avoidCollisions:!1},u.createElement("div",{className:"bg-interactive-sell/10 text-caption2 text-t-error rounded p-2 flex gap-1 items-center"},u.createElement(Be.l,{className:"w-[0.875rem] h-[0.875rem]"}),u.createElement("div",null,u.createElement("p",null,o?.message)))))))})),Ve=e=>{const{suffix:t,getI18n:a,useGetMaxCollateral:r,tradeConfig:o,pairBaseConfig:c,symbol:d,onChainPerpContractAddress:g,...h}=e,v=(0,pe.h)(),{useMarketInfo:x,useWebsocketSymbolMarkPrice:y,useAssetPrecision:E}=(0,u.useContext)(re),{getValues:w,formState:L}=(0,p.Gc)(),{errors:F}=L,[V,q,R,$,_]=(0,p.qo)({name:["tokenIn","pairBase","indexPrice","tokenInName","fee"]}),z=E((0,l.De)($,v))||2,U=r({base:q}),{isDegenMode:W}=(0,n.C)(),O=y(d),Q=x(q),{address:H,isConnected:Z}=(0,i.m)(),{data:G,decimals:K,symbol:J}=(0,j.m)({address:H,token:V,query:{enabled:Boolean(H)&&Z}}),{data:X}=(0,ge.K)({address:H,query:{enabled:Boolean(H)&&Z}}),ee=V?K:X?.decimals,te=V?G:X?.value,ae=V?J:X?.symbol;(0,Fe.u)({address:V,abi:Me.Wo,functionName:"allowance",args:[H,g],query:{enabled:Z&&Boolean(V)&&Boolean(H)&&Boolean(g),refetchInterval:3e4}});const{field:ne,fieldState:{error:le}}=(0,p.bc)({name:"amountIn",rules:{shouldUnregister:!0,required:a("orderForm-required-field","Required"),validate:{isInsufficientCollateralBalance:e=>{const t=(0,Y.v)(`${e}`,ee??0);if(t>(te??(0,m.f)("0")))return a("orderForm-button-InsufficientBalance",{defaultValue:"Insufficient Balance"});const r=t*(0,m.f)(R)/10n**BigInt(ee??0),n="true"===w("isLong"),l=w("orderType"),s=w("price"),i=P(w("leverage")),d=k({collateral:t,leverage:i,indexPrice:R}),u=(({openFeeRate:e,size:t})=>t*e/10n**4n)({openFeeRate:N(c.feeConfig.openFeeP),size:d}),p=o?.data.executionFeeUsd,g=C({collateral:r,executionFee:p,openFee:u,orderType:l}),f=I({leverageMargins:c.leverageMargins,size:d}),h=(0,m.f)(O.close??"0"),b=B({isLong:n,collateral:r,leverage:i,marketPrice:h,size:d,slippageConfig:c?.slippageConfig,longQty:Q.data?.longQty,shortQty:Q.data?.shortQty}),v=(0,m.f)(`${s||0}`),x=S({limitPrice:v,isLong:n,marketPrice:h,orderType:l,spread:b}),y=(({qty:e,orderType:t,spread:a,limitPrice:r,marketPrice:n})=>{if("limit"===t)return r*e*a/10n**36n;if("market"===t)return n*e*a/10n**36n;throw new Error(`[functionName getOpenLost] unsupported order type ${t}`)})({qty:A({entryPrice:x,size:d}),orderType:l,spread:b,limitPrice:v,marketPrice:h});return g*f/BigInt(1e4)>y||a("orderForm-button-open-lost",{defaultValue:"Spread too high with current leverage and order size"})},isSafeInteger:e=>!Number.isSafeInteger(e),isNotANumber:e=>!Number.isNaN(e),isLessThanMaxCollateral:e=>{if(W)return!0;const t=U(w("leverage")||1);return(0,m.f)(`${e}`)*(0,m.f)(R||"1")/10n**18n<=t||a("orderForm-higher-than-max-collateral-v2",{defaultValue:"In {{leverage}}x, the maximum principal is {{maxCollateral}} {{collateralToken}}",leverage:w("leverage"),maxCollateral:Math.floor(parseFloat((0,b.d)(t*10n**18n/(0,m.f)(R||"1")))*10**z)/10**z,collateralToken:(0,l.De)(ae,v)})},isLargerThanMinCollateral:e=>{const t=P(w("leverage")),r=(0,m.f)(R),n=(0,m.f)(`${e}`)*r/10n**18n,s=BigInt(o?.data.minNotionalUsd)/t+BigInt(o?.data.minNotionalUsd)*BigInt(c.feeConfig.openFeeP)/10n**BigInt(l.cB.percent)+o?.data.executionFeeUsd,i=s*10n**18n/r;return n>=s||(e=>{const t=Math.ceil(parseFloat(e)*10**z)/10**z;return a("orderForm-less-than-min-collateral-patch-2-V2",{defaultValue:"In {{leverage}}x, the minimum principal is {{minPrincipal}} {{tokenInName}}",minPrincipal:t,leverage:w("leverage"),tokenInName:(0,l.De)(ae,v)})})((0,b.d)(i))},isBelowOrderMaxOI:e=>{const t=D(w("isLong")),r=(0,m.f)(O.close??"0"),n=t?c.maxLongOiUsd:c.maxShortOiUsd,l=(t?M({longQty:Q?.data?.longQty*10n**8n,marketPrice:r}):T({shortQty:Q.data.shortQty*10n**8n,marketPrice:r}))/10n**18n;return k({collateral:(0,m.f)(`${e}`),leverage:P(w("leverage")),indexPrice:R})+l<=n||a("orderForm-button-reach-max-oi",{defaultValue:"{{symbol}} has reached the position limit",symbol:d})},isLargerThanFee:e=>(0,m.f)(`${e}`)*(0,m.f)(R)/10n**18n-(0,m.f)(_)*(0,m.f)(R)/10n**18n>0n||a("orderForm-button-principal-higher-fee",{defaultValue:"Please increase the principal and try again"})}}}),oe=Ce((e=>e.setAmountIn)),se=(0,u.useCallback)((e=>{if(/^\d+(\.\d{0,8})?$/.test(e.target.value)&&e.target.value.length<19||""===e.target.value){const t=e.target.value.replaceAll(/[^0-9.]/g,"");ne.onChange(t),oe(t),f.set("initial_margin","input")}}),[z]),ie=(0,u.useMemo)((()=>["amountIn","leverage"]),[]);return u.createElement(u.Fragment,null,u.createElement("div",{className:"flex flex-col relative"},u.createElement(Se,{errorNames:ie},u.createElement("div",{className:(0,s.cn)("flex gap-2 bg-interactive-interactive01 h-11 py-1.5 px-2 rounded border border-transparent border-solid [&:has(input:focus)]:border-transparent items-center",le||F?.leverage?.message?"border-interactive-sell":"")},u.createElement(Le,{maxLength:19,inputMode:"decimal",type:"text",placeholder:a("orderForm-Collateral-placeholder",{defaultValue:"Collateral"}),autoComplete:"off",...h,...ne,value:ne.value,onChange:se,inputSize:"sm",className:"p-0 bg-transparent text-body2"}),u.createElement("div",null,t)))))},Ae=u.memo((({getI18n:e,symbol:t,collateralTokens:a=[],useGetMaxCollateral:r,tradeConfig:n,pairBaseConfig:l,onChainPerpContractAddress:o,useCoachmark:s=(()=>({})),guideNoticeKey:i})=>{const c=(0,u.useMemo)((()=>u.createElement(Ne,{context:re,collateralTokens:a})),[a]),d=(0,u.useRef)(null),{putCoachMarkStep:m}=s();return(0,u.useEffect)((()=>{m?.(i,1,{title:e("v2-sdk-guide-notice-step2-title","V2 Features: Degen Mode"),content:e("v2-sdk-guide-notice-step2-content","Degen Mode allows users to set leverage to 500x, enabling them to either achieve enormous wealth or end up with nothing."),target:d,position:"bottom-end",hasCloseIcon:!0})}),[e]),u.createElement("div",{className:"relative mb-1"},u.createElement(Ve,{symbol:t,getI18n:e,suffix:c,useGetMaxCollateral:r,tradeConfig:n,pairBaseConfig:l,onChainPerpContractAddress:o}),u.createElement("div",{className:"relative left-[50%] w-0",ref:d}))})),De=(0,u.memo)((({getI18n:e})=>u.createElement("div",{className:"flex h-[18px] border-1 border-solid relative rounded overflow-hidden pt-[3px] pb-0.5 px-1 mr-1 bg-gradient-141 from-t-emphasize/50 from-[-9.31%] via-t-emphasize/10 via-[60.22%] to-t-emphasize/30 to-[106.44%]"},u.createElement("div",{className:"absolute top-[1px] right-[1px] z-0 rounded bg-background-bg1 w-[calc(100%-2px)] h-[calc(100%-2px)]"}),u.createElement("div",{className:"absolute top-[1px] right-[1px] z-1 rounded bg-t-emphasize opacity-[.1] w-[calc(100%-2px)] h-[calc(100%-2px)]"}),u.createElement("div",{className:"relative z-2 text-caption2 text-highLight"},e("orderForm-degen-mode-label","Degen")))));De.displayName="DegenModeBadge";var qe=a(62866),Re=a(14676);const $e=({tokenName:e,approve:t,getI18n:a,refetch:r,disabled:n,isFetched:s,children:i})=>{const c=(0,pe.h)(),[d,m]=(0,u.useState)(!1),{trigger:g}=(0,p.Gc)(),f=(0,Re.Z)(),h=(0,u.useCallback)((async()=>{try{m(!0);const e=await t();await(0,o.As)({getI18n:a,config:f,hash:e}),setTimeout((()=>g("amountIn")),0)}catch(e){O.A.error(e.shortMessage??e?.reason??e.e??e?.message),m(!1)}finally{await r(),m(!1)}}),[t,a,f,r,g]);return u.createElement(G.z,{type:"button",className:"w-full h-10 text-subtitle2",onClick:h,disabled:d||!s||n},i??a("orderForm-button-approve",{defaultValue:"Approve {{token}}",token:(0,l.De)(e,c)}))},_e=({getI18n:e,useTokenApprove:t,collateralTokens:a,useCurrentProduct:r,pairBaseConfig:n})=>{const{isConnected:o,address:s}=(0,i.m)(),{baseAsset:c}=r(),[d,m,g,f]=(0,p.qo)({name:["tokenIn","isLong","amountIn","tokenInDecimals"]}),h=D(m),b=(({defaultText:e})=>{const{errors:t}=(0,p.cl)(),{isConnected:a}=(0,i.m)(),r=a?(({errorsInfo:e})=>[{field:"amountIn",errorType:"isInsufficientCollateralBalance",getButtonProps:e=>({disabled:!0,children:e?.amountIn?.message})}].find((({field:t,errorType:a})=>e?.[t]?.type===a))?.getButtonProps(e)??null)({defaultText:e,errorsInfo:t}):null,n=(0,u.useMemo)((()=>a&&r||{children:u.createElement("div",{className:"flex items-center"},e)}),[r,a,e]);return a?n:null})({defaultText:`${h?e("orderForm-long",{defaultValue:"Long"}):e("orderForm-short",{defaultValue:"Short"})} ${c}`}),v=a?.find((e=>e.tokenAddress===d))?.name||"",{allowance:x,approve:y,refetch:k,isFetched:C,isPending:E,amount:N}=t(d),P=(0,pe.h)(),{symbol:w}=(0,j.m)({address:s,token:d,query:{enabled:Boolean(s)&&o}});if(!o)return u.createElement("div",{className:"[&_a]:flex [&_a]:h-10 w-full [&_a]:items-center"},u.createElement(qe.Z,{getI18n:e,size:"md",className:"w-full"}));if(!x&&""!==d)return u.createElement($e,{disabled:E,isFetched:C,tokenName:v,getI18n:e,approve:y,refetch:k});if(""!==d&&(0,Y.v)(`${g}`,f??0)>N)return u.createElement($e,{disabled:E,isFetched:C,tokenName:v,getI18n:e,approve:y,refetch:k},e("orderForm-button-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:(0,l.De)(w,P)}));if(n?.status!==l.Uo.Available){const t={[l.Uo.Only_Reduce]:e("orderForm-button-openOrderSuspended","Open order suspended"),[l.Uo.Close]:e("orderForm-button-marketClosed","Market Closed")};return u.createElement(G.z,{type:"submit",className:"w-full h-10 text-subtitle2",disabled:!0},t[n?.status])}return u.createElement(G.z,{className:"w-full h-10 text-subtitle2",variant:h?"buy":"sell",type:"submit",...b})};var ze=a(89663);const Ue=({open:e,getI18n:t,onClose:a,onConfirm:r,pricePrecision:n,symbol:l,pairBaseConfig:o,useWebsocketSymbolMarkPrice:s,useMarketInfo:i})=>{const[c,d,g,f,h]=(0,p.qo)({name:["isLong","leverage","pairBase","entryPrice","size"]}),v=s(l),x=(0,m.f)(v.close??"0"),y=i(g),k=y?.data?.longQty,C=y?.data?.shortQty,E=(0,fe.e9)(Number((0,b.d)(B({isLong:D(c),leverage:P(d||1),marketPrice:x,slippageConfig:o?.slippageConfig,longQty:k,shortQty:C,size:(0,m.f)(h||"0")}))),{decimals:2});return u.createElement(H.Vq,{open:e},u.createElement(H.cZ,{className:"w-full max-w-[360px] p-6",onEscapeKeyDown:a,onPointerDownOutside:a},u.createElement("h2",{className:"text-headline3 text-t-primary mb-3 text-center"},t("orderForm-high-spread-confirm-dialog-title","High Spread Notice")),u.createElement("p",{className:"text-caption1 mb-2 text-center text-t-third"},t("orderForm-high-spread-confirm-dialog-desc","This trade may result in significant price impact due to a substantial disparity in open interest between long and short positions.Please be aware.")),u.createElement("div",{className:"flex flex-row justify-between py-1"},u.createElement("div",{className:"text-body2 text-t-secondary"},t("orderForm-high-spread-confirm-mark-price","Mark price")),u.createElement("div",{className:"text-subtitle2 text-t-primary"},(0,ze.uf)((0,b.d)(x||0n),n))),u.createElement("div",{className:"flex flex-row justify-between py-1"},u.createElement("div",{className:"text-body2 text-t-secondary"},t("orderForm-high-spread-confirm-est-entry-price","Est. Entry price")),u.createElement("div",{className:"text-subtitle2 text-t-primary"},(0,ze.uf)(f||"0",n))),u.createElement("div",{className:"flex flex-row justify-between py-1"},u.createElement("div",{className:"text-body2 text-t-secondary"},t(" orderForm-high-spread-confirm-price-spread","Price spread")),u.createElement("div",{className:"text-subtitle2 text-t-sell"},E)),u.createElement(G.z,{type:"button",onClick:r,className:"block w-full mt-6"},t("orderForm-high-spread-confirm-open-button","Continue to open"))))},We=u.memo((({getI18n:e})=>{const{control:t,clearErrors:a}=(0,p.Gc)(),r=Ce((e=>e.setIsLong)),{field:n}=(0,p.bc)({name:"isLong",control:t}),l=(0,u.useCallback)((e=>{n.onChange(e),r(e.currentTarget.value),a()}),[a,n,r]),o="true"===n.value;return u.createElement("div",{className:"flex bg-interactive-interactiveBg rounded direction-switch"},u.createElement("input",{...n,onChange:l,type:"radio",value:"true",id:"orderFormIsLongTrue",className:"absolute pointer-events-none",style:{clip:"rect(0,0,0,0)"}}),u.createElement("label",{htmlFor:"orderFormIsLongTrue",className:(0,s.cn)("w-full rounded cursor-pointer text-center py-[0.375rem] bg-background-bg1Accent01 direction-switch-long",o&&"bg-interactive-buy")},u.createElement("span",{className:"block text-subtitle2 "+(o?"text-t-white":"text-t-third")},e("orderForm-long",{defaultValue:"Long"}))),u.createElement("input",{className:"absolute pointer-events-none",...n,onChange:l,type:"radio",value:"false",id:"orderFormIsLongFalse",style:{clip:"rect(0,0,0,0)"}}),u.createElement("label",{htmlFor:"orderFormIsLongFalse",className:(0,s.cn)("w-full rounded-r cursor-pointer text-center py-[0.375rem] bg-background-bg1Accent01 direction-switch-short",!o&&"bg-interactive-sell rounded")},u.createElement("span",{className:"block text-subtitle2 "+(o?"text-t-third":"text-t-white")},e("orderForm-short",{defaultValue:"Short"}))))}));var Oe=a(44478),Qe=a(90471);const He=({getI18n:e,staticHost:t,Link:a="a",locale:r})=>{const{switchMode:l,isDumbMode:o}=(0,n.C)(),s=(0,Qe.G)((e=>e.changeTradeModeTab)),i=(0,u.useCallback)((()=>{l("dumb"),s(Oe.O.Dumb)}),[l,s]);return u.createElement(a,{className:"flex flex-row flex-1 items-center h-12 justify-center",href:`/${r}/futures/v2/BTCUSD`,onClick:i},u.createElement("img",{src:`${t}/static/images/dumb-mode/dumb-neutral.webp`,className:"w-6 h-6 mr-1"}),u.createElement("span",{className:"text-subtitle2 "+(o?"text-t-primary":"text-t-third")},e("orderForm-dumb-mode-button",{defaultValue:"Dumb"})))};var Ze=a(95795);const Ge=(0,u.memo)((({label:e,children:t,className:a,labelClassName:r,detailClassName:n})=>u.createElement("div",{className:(0,s.cn)("flex justify-between items-center pt-2",a)},u.createElement("span",{className:(0,s.cn)("text-t-third text-caption1",r)},e||null),u.createElement("span",{className:(0,s.cn)("text-t-primary text-caption1",n)},t||null))));Ge.displayName="FormItem";const je=({getI18n:e,symbol:t,useWebsocketSymbolMarkPrice:a,useMarketInfo:r,pairBaseConfig:n,pricePrecision:l})=>{const[o,s,i,c,d,g,f]=(0,p.qo)({name:["isLong","pairBase","orderType","price","leverage","amountIn","indexPrice"]}),h=r(s),v=a(t),x=D(o),y=(0,m.f)(g||"0"),C=P(d),E=(0,m.f)(v.close??"0"),N=(0,m.f)(`${c||0}`),w=h?.data?.longQty,I=h?.data?.shortQty,L=k({collateral:y,leverage:C,indexPrice:f}),F=(0,u.useMemo)((()=>B({collateral:y,isLong:x,leverage:C,marketPrice:E,slippageConfig:n?.slippageConfig,longQty:w,shortQty:I,size:L})),[L,y,x,C,E,n?.slippageConfig,w,I]),M=S({isLong:x,orderType:i,limitPrice:N,marketPrice:E,spread:F}),{field:T}=(0,p.bc)({name:"entryPrice",shouldUnregister:!0}),V=(0,b.d)(M);return(0,u.useEffect)((()=>{T.onChange(V)}),[T,V]),u.createElement(Ge,{label:u.createElement(Ze.t,{tip:u.createElement("div",{className:"w-[282px]"},u.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-entryPrice-tip01","In order to protect the price from being manipulated, the Entry Price of the market order will use Mark Price +/- Spread to open the position.")),u.createElement("div",{className:"text-caption whitespace-pre-line mt-5"},e("orderForm-entryPrice-tip02",{defaultValue:"The {{side}} slippage for {{symbol}} is {{spread}}",side:x?"Buy":"Sell",symbol:t,spread:(0,fe.e9)(Number((0,b.d)(F)),{decimals:2})})))},u.createElement("div",{className:"flex"},u.createElement("span",null,e("orderForm-entryPrice","Entry Price")),u.createElement("span",{className:"text-t-third"},"Â ",e("orderForm-entryPrice-spread",{defaultValue:"({{spread}} Spread)",spread:(0,fe.e9)(Number((0,b.d)(F)),{decimals:2})}))))},u.createElement("div",{className:"text-t-primary"},(0,ze.uf)((0,b.d)(M),l),"Â USD"))};var Ke=a(25681),Ye=a(33868);const Je=({getI18n:e,tradeConfig:t,pairBaseConfig:a,useAssetPrecision:r,Link:o="a"})=>{const s=(0,pe.h)(),[c,d,g,f,h]=(0,p.qo)({name:["leverage","amountIn","indexPrice","tokenInName","entryPrice"]}),{isDegenMode:x}=(0,n.C)(),{isConnected:y}=(0,i.m)(),k=r((0,l.De)(f,s))||2,C=(0,u.useMemo)((()=>t.data||{}),[t.data]),w=C.executionFeeUsd?C.executionFeeUsd:(0,m.f)("0"),I=(0,u.useMemo)((()=>P(c)),[c]),L=(0,u.useMemo)((()=>N(a?.feeConfig?.openFeeP)),[a?.feeConfig?.openFeeP]),F=(0,u.useMemo)((()=>w*10n**18n/(0,m.f)(g||"1")),[w,g]),M=(0,m.f)(h||"1")>0?(0,m.f)(h||"1"):(0,m.f)("1"),T=V({leverage:I,indexPrice:(0,m.f)(g||"1"),amountIn:(0,m.f)(d||"0"),entryPrice:M,executionFeeUSD:w,openFeeRate:L})*M*(0,m.f)(`${L}`)/10n**40n,B=(0,u.useMemo)((()=>(0,b.d)(F+T*10n**18n/(0,m.f)(g||"1"))),[F,g,T]),{field:S}=(0,p.bc)({name:"fee"});return(0,u.useEffect)((()=>{S.onChange(B)}),[B,S]),u.createElement(u.Fragment,null,u.createElement("input",{type:"hidden",...S}),u.createElement(Ge,{label:u.createElement("span",null,e("orderForm-fee","Fee"))},u.createElement(Ze.t,{mode:"click",tip:u.createElement("div",{className:"w-[282px]"},u.createElement("div",{className:"whitespace-pre-line text-caption"},e("orderForm-fee-tip01-openFee-patch1",{defaultValue:"Open Fee : {{openFee}} {{tokenInName}} ({{openFeeRate}})",openFee:`${(0,fe.FB)((0,b.d)(T*10n**18n/(0,m.f)(g||"1")),k)}`,openFeeRate:(0,fe.e9)(E(L.toString()),{decimals:4}),tokenInName:(0,l.De)(f,s)})),u.createElement("div",{className:"whitespace-pre-line text-caption"},y?e("orderForm-fee-tip01-executionFee-patch1",{defaultValue:"Execution Fee : {{executionFee}} â {{symbolExecutionFee}} (fixed)",executionFee:`${(0,b.d)(w)} USD`,symbolExecutionFee:`${(0,fe.FB)((0,b.d)(F),k)} ${(0,l.De)(f,s)||""}`}):e("orderForm-fee-tip01-executionFee",{defaultValue:"Execution Fee : {{executionFee}} (fixed)",executionFee:`${(0,b.d)(w)} USD`})),u.createElement("div",{className:"whitespace-pre-line text-caption mt-4"},e("orderForm-fee-tip02","Execution Fee is a fixed additional fee for the execution of the Keeper program. It will be charged when a position is opened.")),x&&u.createElement(u.Fragment,null,u.createElement("div",{className:"whitespace-pre-line text-caption text-highLight mt-[10px]"},e("orderForm-fee-degen-tip-title","Degen Mode")),u.createElement("div",{className:"whitespace-pre-line text-caption text-highLight mt-1"},e("orderForm-fee-degen-tip-desc",{defaultValue:"In \"degen mode,\" there's no fee for opening trades, but for closing trades, there's a fee of {{shareRate}}% PNL, with a minimum charge of just {{minCloseFeeRate}}%.",shareRate:(0,v.b)(BigInt(a?.feeConfig?.shareP??0n),3),minCloseFeeRate:(0,v.b)(BigInt(a?.feeConfig?.minCloseFeeP??0n),3)})),u.createElement(o,{href:"https://apollox-finance.gitbook.io/apollox-finance/welcome/trading-on-v2/degen-trading-mode/dynamic-close-fee-for-degen-mode",target:"_blank",className:"flex items-center text-highLight text-caption2 leading-[14px] mt-2"},u.createElement("span",null,e("orderForm-dee-degen-tip-more","View more details")),u.createElement(Ke.S,{className:"ml-1 w-[14px] h-[14px]"}))))},u.createElement("div",null,!x&&u.createElement("span",{className:"text-t-primary"},`${(0,fe.FB)((0,b.d)(T*10n**18n/(0,m.f)(g||"1")),k)} ${(0,l.De)(f,s)||""}`),x&&u.createElement("div",{className:"flex flex-row items-center text-highLight"},u.createElement(Ye.g,{className:"w-[14px] h-[14px] mr-1"}),u.createElement("span",null,y?`${(0,fe.FB)((0,b.d)(F),k)} ${(0,l.De)(f,s)||""}`:`${(0,b.d)(w)} USD`))))))},Xe=({getI18n:e,Link:t="a",locale:a})=>{const{switchMode:r,isDumbMode:l}=(0,n.C)(),o=(0,Qe.G)((e=>e.changeTradeModeTab)),s=(0,u.useCallback)((()=>{r("classic"),o(Oe.O.Classic)}),[r,o]);return u.createElement(t,{className:"flex flex-row items-center h-12 flex-1 justify-center",href:`/${a}/futures/v2/BTCUSD`,onClick:s},u.createElement("span",{className:"text-subtitle2 "+(l?"text-t-third":"text-t-primary")},e("orderForm-futures-mode-button",{defaultValue:"Perp"})))},et=({useWebSocketAssetIndex:e})=>{const t=(0,pe.h)(),{field:a}=(0,p.bc)({name:"indexPrice"}),{control:r}=(0,p.Gc)(),[n]=(0,p.qo)({name:["tokenInName"],control:r}),o=e((0,l.De)(n,t));return(0,u.useEffect)((()=>{a.value!==o.index&&a.onChange(o.index)}),[o.index,a]),u.createElement("input",{type:"hidden",...a,value:a.value??"0"})},tt=e=>u.createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},u.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 11.9474C2 11.6821 2.10536 11.4278 2.2929 11.2402L10.893 2.64043C11.2835 2.24992 11.9167 2.24992 12.3072 2.64044L13.9596 4.2929C14.3502 4.68343 14.3502 5.3166 13.9596 5.70712L6.39998 13.2665H13.3333C13.7015 13.2665 14 13.565 14 13.9332C14 14.3014 13.7015 14.5999 13.3333 14.5999L2.99999 14.5998C2.44771 14.5998 2 14.1521 2 13.5998V11.9474ZM3.33333 13.2665H4.12114C4.38516 13.2665 4.63847 13.1621 4.8258 12.976L10.7117 7.1306L9.52396 5.94283L3.62624 11.8402C3.4387 12.0278 3.33333 12.2821 3.33333 12.5474V13.2665ZM10.4668 5.00002L11.6601 6.19339L12.8668 5.00002L11.6668 3.80002L10.4668 5.00002Z",fill:"currentColor"})),at=e=>u.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},u.createElement("path",{d:"M3 12a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1z"})),rt=e=>u.createElement("svg",{width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",...e},u.createElement("path",{d:"M10 11a1 1 0 001-1V4a1 1 0 112 0v6a1 1 0 001 1h6a1 1 0 110 2h-6a1 1 0 00-1 1v6a1 1 0 11-2 0v-6a1 1 0 00-1-1H4a1 1 0 110-2h6z"}));var nt=a(86039);const lt=u.forwardRef((({className:e,orientation:t,marks:a,thumbProps:r={},...n},l)=>{const{className:o,rangeClassName:i,dragNode:c,children:d,...m}=r,[p,g]=u.useState(!1);return u.createElement(nt.fC,{ref:l,className:(0,s.cn)("relative flex w-full touch-none select-none items-center",e),onPointerUp:c?()=>g(!1):void 0,onPointerDown:c?()=>g(!0):void 0,...n},u.createElement(nt.fQ,{className:"relative h-1 w-full grow overflow-hidden rounded-full bg-interactive-interactive01 cursor-pointer"},u.createElement(nt.e6,{className:(0,s.cn)("slider-range absolute h-full bg-interactive-primary",i)})),a&&a.map(((e,a)=>u.createElement("button",{type:"button",key:`slider_mark_${a}`,className:(0,s.cn)("absolute cursor-pointer rounded-full "+("horizontal"===t?"-translate-x-1/2":"-translate-y-1/2"),e.className),style:e.style,onClick:()=>e.onClick(e.value)},e.children))),u.createElement(nt.bU,{className:(0,s.cn)("block cursor-pointer box-content h-3 w-3 rounded-full border-0 bg-border-lineStrong dark:bg-t-onColor ring-offset-background transition-colors disabled:pointer-events-none disabled:opacity-50 border-interactive-primary focus-within:outline-none",o),...m,asChild:!0},u.createElement("span",null,p?c:null,d)))}));lt.displayName=nt.fC.displayName;var ot=a(72413),st=a(91053);function it(e,t){(0,u.useEffect)((()=>{const a=a=>{e.current&&!e.current.contains(a.target)&&t(a)};return document.addEventListener("click",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("click",a),document.removeEventListener("touchstart",a)}}),[e,t])}const ct="top-[2px] w-1 h-1 rounded-full bg-t-third",dt="bg-border-lineStrong dark:bg-t-onColor",mt=({value:e,minLeverage:t,maxLeverage:a})=>{let r=0;return r=e===t?1:e===a?100:(e-t)/((a-t)/100),r};function ut({minLeverage:e=1,maxLeverage:t=1}){const a=(0,u.useRef)(null),[r,l]=(0,u.useState)(!1),{sliderThumbProps:o}=(0,u.useContext)(re),i=Ee(),{field:c}=(0,p.bc)({name:"leverage",defaultValue:i.leverage,rules:{deps:["amountIn"]}}),{switchMode:d}=(0,n.C)(),m=(0,u.useCallback)((a=>Math.max(Math.min(a,t),e)),[t,e]),g=(0,st.Z)(e),h=(0,st.Z)(e),b=(0,u.useCallback)((e=>{c.onChange(m(e)),i.setLeverage(m(e)),f.set("leverage","button")}),[m,i]),v=(0,u.useMemo)((()=>t>e?[{value:e,className:(0,s.cn)(ct,dt),style:{left:"0"},onClick:b,children:u.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 left-0"},e,"x")},{value:Math.round((t-e)/5),className:(0,s.cn)(ct,c.value>(t-e)/5?dt:""),style:{left:"calc(20% - 4px)"},onClick:b,children:u.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 left-[-6px]"},Math.round((t-e)/5),"x")},{value:Math.round(2*(t-e)/5),className:(0,s.cn)(ct,c.value>2*(t-e)/5?dt:""),style:{left:"calc(40% - 4px)"},onClick:b,children:u.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 left-[-6px]"},Math.round(2*(t-e)/5),"x")},{value:Math.round(3*(t-e)/5),className:(0,s.cn)(ct,c.value>3*(t-e)/5?dt:""),style:{left:"calc(60% - 4px)"},onClick:b,children:u.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 left-[-6px]"},Math.round(3*(t-e)/5),"x")},{value:Math.round(4*(t-e)/5),className:(0,s.cn)(ct,c.value>4*(t-e)/5?dt:""),style:{left:"calc(80% - 4px)"},onClick:b,children:u.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 left-[-6px]"},Math.round(4*(t-e)/5),"x")},{value:t,className:ct,style:{left:"calc(100% - 4px)"},onClick:b,children:u.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 right-0"},t,"x")}]:[]),[c.value,b,t,e]);(0,u.useEffect)((()=>{d("classic")}),[d]),(0,u.useEffect)((()=>{h&&h!==t&&c.value>t&&c.onChange(m(c.value)),g&&g!==e&&c.value<e&&c.onChange(m(c.value))}),[m,c,t,e,h,g]);const x=(0,u.useCallback)((([a])=>{const r=(({value:e,minLeverage:t,maxLeverage:a})=>{let r=0;if(1===e)r=t;else if(100===e)r=a;else{const n=(a-t)/100;r=t+Math.round(e*n)}return r})({value:a,maxLeverage:t,minLeverage:e});c.onChange(m(r)),i.setLeverage(m(r)),f.set("leverage","button")}),[m,t,e,i]),y=(0,u.useCallback)(((e="")=>{const t=m(parseInt(e,10));if(Number.isNaN(t))c.onChange("");else{if(0===t)return i.setLeverage(1),c.onChange(1);i.setLeverage(t),c.onChange(t),f.set("leverage","input")}}),[m,i]),k=(0,u.useCallback)((()=>{y(c.value-1)}),[c.value,y]),C=(0,u.useCallback)((()=>{y(c.value+1)}),[c.value,y]),E=(0,u.useCallback)((()=>{l((e=>!e))}),[]);return it(a,(0,u.useCallback)((()=>{l(!1)}),[])),u.createElement("div",{className:"relative flex flex-col w-auto",ref:a},u.createElement("button",{type:"button",className:"flex items-center text-subtitle2 text-t-primary",onClick:E},u.createElement("span",null,c.value,"x"),u.createElement(tt,{className:"w-4 h-4 ml-0.5"})),r&&u.createElement("div",{className:"z-[100] absolute w-[calc(100vw-48px)] md:w-[288px] h-auto top-[28px] right-0 items-center rounded bg-interactive-interactiveBg shadow-elevation3 bg-[linear-gradient(152.61deg,#FFFFFF_2.23%,#F2F2F5_82.94%)] dark:bg-[linear-gradient(152.61deg,#62658D_2.23%,#363655_82.94%)]"},u.createElement("div",{className:"flex flex-col gap-1 rounded overflow-hidden bg-interactive-interactiveBg bg-clip-padding border border-transparent border-solid"},u.createElement("div",{className:"flex gap-2 bg-interactive-interactive01 w-full h-11 min-h-11 py-1.5 px-2 rounded border border-transparent border-solid [&:has(input:focus)]:border-transparent items-center bg-clip-padding"},u.createElement("button",{onClick:k,type:"button"},u.createElement(at,{className:"w-4 h-4 text-t-third"})),u.createElement(ot.Z,{className:"w-full h-full bg-transparent border-0 text-t-primary outline-none text-center text-body2",autoComplete:"off",decimalsLimit:0,allowNegativeValue:!1,allowDecimals:!1,value:c.value,maxLength:t.toString().length||2,onValueChange:y,step:1}),u.createElement("button",{onClick:C,type:"button"},u.createElement(rt,{className:"w-4 h-4 text-t-third"}))),u.createElement("div",{className:(0,s.cn)("relative flex items-center w-full h-14 min-h-14 mb-1 px-2")},u.createElement(lt,{value:[mt({value:c.value||1,maxLeverage:t,minLeverage:e})],min:1,max:100,onValueChange:x,step:1,thumbProps:{...o,dragNode:u.createElement("div",{className:(0,s.cn)("absolute top-[-20px] right-[-6px] bg-interactive-primary px-0.5 text-caption1 rounded-sm text-t-onColor",c.value>9*(t-e)/10?"right-[2px]":"right-[-6px]")},c.value,"x")},marks:v})))))}const pt=250,gt=[pt,500,750,1e3],ft=e=>{const t=[];gt.forEach((a=>{t.push(Math.abs(a-e))}));const a=t.indexOf(Math.min.apply(null,t));return gt[a]},ht=({value:e,minLeverage:t,maxLeverage:a})=>{let r=0;return r=1===e?1:1001===e?100:e>250?50+(e-250)/((a-250)/50):(e-t)/((250-t)/50),r},bt="top-[2px] w-1 h-1 rounded-full bg-t-third",vt="bg-border-lineStrong dark:bg-t-onColor";function xt({symbol:e,pairBaseConfig:t,getI18n:a,minLeverage:r=1,maxLeverage:l=1e3,Link:o="a"}){const i=(0,u.useRef)(null),[c,d]=(0,u.useState)(!1),{getValues:g,setValue:h}=(0,p.Gc)(),{sliderThumbProps:b,useMarketInfo:v,useWebsocketSymbolMarkPrice:x,useCurrentProduct:y,usePairByBaseConfig:k}=(0,u.useContext)(re),{degenPairBase:C}=y(),{data:E}=k(C),[N,w]=(0,p.qo)({name:["pairBase","orderType"]}),I=x(e),L=v(N),F=v(C),M=Ee(),{isDegenMode:T,switchMode:B}=(0,n.C)(),{field:S}=(0,p.bc)({name:"leverage",defaultValue:M.degenLeverage,rules:{deps:["amountIn"],shouldUnregister:!0,required:{value:!0,message:a("orderForm-required-field","Required")},validate:{isOverMaxOI:e=>{const r=g("isLong"),n=g("amountIn"),l=g("indexPrice"),o=(0,m.f)(I.close??"0"),s=D(r),i=(0,m.f)(n||"0"),c=U({isLong:s,collateral:i,marketPrice:o,indexPrice:l,qty:s?L?.data?.longQty||0n:L?.data?.shortQty||0n,maxOi:s?t.maxLongOiUsd:t.maxShortOiUsd,leverage:P(e)}),d=U({isLong:s,collateral:i,marketPrice:o,indexPrice:l,qty:s?F?.data?.longQty||0n:F?.data?.shortQty||0n,maxOi:s?E.maxLongOiUsd:E.maxShortOiUsd,leverage:P(pt)});let u=!0,p="";return c&&(u=!1,p=T||d?a("orderForm-leverage-high-hit-maxoi","Hit the Max OI limit, please try 1x-250x Leverage."):a("orderForm-leverage-low-hit-maxoi","Hit the Max OI limit, please try 250x-1001x Leverage.")),u||p}}}}),V=(0,u.useCallback)((e=>Math.max(Math.min(e,l),r)),[l,r]),A=(0,st.Z)(r),q=(0,st.Z)(r),R=(0,u.useCallback)((e=>{S.onChange(V(e)),M.setDegenLeverage(V(e)),f.set("leverage","button")}),[V,M]),$=(0,u.useMemo)((()=>[{value:0,className:(0,s.cn)(bt,vt),style:{left:"0"},onClick:R,children:u.createElement("span",{className:"absolute text-caption2 text-t-primary top-3"},"0")},{value:250,className:(0,s.cn)(bt,S.value>250?vt:""),style:{left:"calc(50% - 4px)"},onClick:R,children:u.createElement("span",{className:"absolute text-caption2 text-t-primary top-3 left-[-6px]"},"250")},{value:500,className:(0,s.cn)(bt,S.value>500?vt:""),style:{left:"calc(66.6% - 4px)"},onClick:R,children:u.createElement("span",{className:"absolute text-caption2 text-highLight top-3 left-[-6px]"},"500")},{value:750,className:(0,s.cn)(bt,S.value>750?vt:""),style:{left:"calc(83.3% - 4px)"},onClick:R,children:u.createElement("span",{className:"absolute text-caption2 text-highLight top-3 left-[-6px]"},"750")},{value:1e3,className:bt,style:{left:"calc(100% - 4px)"},onClick:R,children:u.createElement("span",{className:"absolute text-caption2 text-highLight top-3 right-0"},"1001x")}]),[S.value,R]),_=(0,u.useCallback)((e=>{e<=pt&&T?B("classic"):e>pt&&!T&&(B("degen"),h("orderType","market"))}),[T,h,B]);(0,u.useEffect)((()=>{q&&q!==l&&g("leverage")>l&&S.onChange(V(g("leverage"))),A&&A!==r&&g("leverage")<r&&S.onChange(V(g("leverage")))}),[V,g,_,l,r,q,A]),(0,u.useEffect)((()=>{_(V(S.value))}),[V,S.value,_,w]);const z=(0,u.useCallback)((([e])=>{d(!0);const t=(({value:e,minLeverage:t,maxLeverage:a})=>{let r=0;if(1===e)r=t;else if(100===e)r=a;else if(e>50){const t=(a-250)/50,n=250+Math.round((e-50)*t);r=ft(n)}else{const a=(250-t)/50;r=t+Math.round(e*a)}return r})({value:e,maxLeverage:l,minLeverage:r});S.onChange(V(t)),M.setDegenLeverage(V(t)),f.set("leverage","button")}),[V,l,r,M]),W=(0,u.useCallback)(((e="")=>{const t=V(parseInt(e,10));if(Number.isNaN(t))S.onChange("");else{if(0===t)return M.setDegenLeverage(1),S.onChange(1);S.onChange(t),M.setDegenLeverage(t),f.set("leverage","input")}}),[V,M]),O=(0,u.useCallback)((()=>{const e=g("leverage"),t=gt.indexOf(e);W(t>0?gt[t-1]:e-1)}),[g,W]),Q=(0,u.useCallback)((()=>{const e=g("leverage"),t=gt.indexOf(e);t>-1&&t<gt.length-1?W(gt[t+1]):W(e+1)}),[g,W]),H=(0,u.useCallback)((()=>{d((e=>!e))}),[]);it(i,(0,u.useCallback)((()=>{d(!1)}),[]));const Z=(0,u.useCallback)((()=>{const e=g("leverage");W(e<=pt?e:ft(e))}),[g,W]),G=(0,u.useMemo)((()=>[ht({value:S.value||1,maxLeverage:l,minLeverage:r})]),[S.value,l,r]);return u.createElement("div",{className:"relative flex flex-col w-auto",ref:i},u.createElement("button",{type:"button",className:(0,s.cn)("flex items-center text-subtitle2",T?"text-highLight":"text-t-primary"),onClick:H},u.createElement("span",null,S.value===l?"1001":S.value,"x"),u.createElement(tt,{className:"w-4 h-4 ml-0.5"})),c&&u.createElement("div",{className:"z-[100] absolute w-[calc(100vw-48px)] md:w-[288px] h-auto top-[28px] right-0 rounded bg-interactive-interactiveBg shadow-elevation3 bg-[linear-gradient(152.61deg,#FFFFFF_2.23%,#F2F2F5_82.94%)] dark:bg-[linear-gradient(152.61deg,#62658D_2.23%,#363655_82.94%)]"},u.createElement("div",{className:"fflex flex-col gap-1 rounded overflow-hidden bg-interactive-interactiveBg bg-clip-padding border border-transparent border-solid"},u.createElement("div",{className:"flex gap-2 bg-interactive-interactive01 w-full h-11 min-h-11 py-1.5 px-2 rounded border border-transparent border-solid [&:has(input:focus)]:border-transparent items-center"},u.createElement("button",{onClick:O,type:"button"},u.createElement(at,{className:"w-4 h-4 text-t-third"})),u.createElement(ot.Z,{className:"w-full h-full bg-transparent border-0 text-t-primary outline-none text-center text-body2",autoComplete:"off",decimalsLimit:0,allowNegativeValue:!1,allowDecimals:!1,value:S.value===l?"1001":S.value,maxLength:l.toString().length||2,onValueChange:W,step:1,onBlur:Z}),u.createElement("button",{onClick:Q,type:"button"},u.createElement(rt,{className:"w-4 h-4 text-t-third"}))),u.createElement("div",{className:(0,s.cn)("flex items-center w-full h-14 min-h-14 mb-1",c?"px-2":"")},u.createElement(lt,{value:G,min:1,max:100,onValueChange:z,step:1,thumbProps:{...b,dragNode:u.createElement("div",{className:(0,s.cn)("absolute top-[-20px] right-[-6px] bg-interactive-primary px-0.5 text-caption1 rounded-sm text-t-onColor",S.value===l?"right-[2px]":"right-[-6px]")},S.value,"x")},marks:$})),T&&u.createElement("div",{className:"flex flex-col w-[calc(100%-1rem)] bg-support-warning/10 rounded mx-auto mb-2"},u.createElement("div",{className:"flex items-center gap-1 p-2 text-caption2 text-highLight"},u.createElement(Ye.g,{className:"w-[14px] h-[14px]"}),u.createElement("span",null,a("orderForm-leverage-degen-mode-tip-title","Degen Mode"))),u.createElement("div",{className:"px-2 pb-2"},u.createElement("ul",{className:"mb-1 text-highLight text-caption2 leading-[14px] list-disc ml-[18px] [&_li_span]:ml-[-4px]"},u.createElement("li",null,u.createElement("span",null,a("orderForm-leverage-degen-mode-tip-1","Lower price slippage"))),u.createElement("li",null,u.createElement("span",null,a("orderForm-leverage-degen-mode-tip-2","Lower trading fees"))),u.createElement("li",null,u.createElement("span",null,a("orderForm-leverage-degen-mode-tip-3","No opening position fees"))),u.createElement("li",null,u.createElement("span",null,a("orderForm-leverage-degen-mode-tip-4","Closing position fees are charged based on PNL"))),u.createElement("li",null,u.createElement("span",null,a("orderForm-leverage-degen-mode-tip-5","Unable to add margin to positions")))),u.createElement(o,{href:"https://apollox-finance.gitbook.io/apollox-finance/welcome/trading-on-v2/degen-trading-mode",target:"_blank",className:"flex items-center text-t-secondary text-caption2"},u.createElement("span",null,a("orderForm-leverage-degen-mode-tip-more","View more details")),u.createElement(Ke.S,{className:"ml-1 w-[14px] h-[14px]"})))))))}const yt=({getI18n:e,symbol:t,pricePrecision:a,useMarketInfo:r,useWebsocketSymbolMarkPrice:n,pairBaseConfig:o})=>{const{getValues:i,setValue:c}=(0,p.Gc)(),[d,g]=(0,p.qo)({name:["orderType","indexPrice"]}),[h,v,x,y]=i(["isLong","pairBase","amountIn","leverage"]),C=n(t),E=(C.symbol??"")===t,N=(0,m.f)(C.close??"0"),w=D(h),I=r(v),L=(0,m.f)(x||"0"),F=P(y||1),M=I.data?.longQty,T=I.data?.shortQty,S=k({collateral:L,leverage:F,indexPrice:g}),V=B({isLong:w,collateral:L,marketPrice:N,size:S,slippageConfig:o?.slippageConfig,longQty:M,shortQty:T,leverage:F}),{field:A,fieldState:{error:q}}=(0,p.bc)({name:"price",defaultValue:"",shouldUnregister:!1,rules:{required:e("orderForm-required-field","Required"),validate:{isLessMaxLimitPrice:t=>{const a=(0,Y.v)(t||"0",l.cB.price),r=e("orderForm-limit-price-over-max",{defaultValue:"Limit price over the max value"});return a<=2n**64n||r},isNumber:e=>!Number.isNaN(e),isTriggerPriceLessThanMarketPrice:t=>!w||(z({limitPrice:(0,m.f)(`${t||0}`),spread:V,isLong:w})<N||e("orderForm-trigger-price-over-market-price",{defaultValue:"Trigger price should smaller than Mark price"})),isTriggerPriceGreaterThanMarketPrice:t=>!!w||(z({limitPrice:(0,m.f)(`${t||0}`),spread:V,isLong:w})>N||e("orderForm-trigger-price-less-market-price",{defaultValue:"Trigger price should greater than Mark price"}))}}}),R=(0,u.useCallback)((e=>{(/^\d+(\.\d{0,8})?$/.test(e.target.value)&&e.target.value.length<19||""===e.target.value)&&(A.onChange(e.target.value.replaceAll(/[^0-9.]/g,"")),f.set("limitPrice","input"))}),[A]);(0,u.useEffect)((()=>{const e=(({isLong:e,marketPrice:t,orderType:a,pricePrecision:r})=>{if("limit"===a&&0n!==t){const a=e?(0,b.d)(t*BigInt(995)/1000n):(0,b.d)(t*BigInt(1005)/1000n);return parseFloat(a).toFixed(r)}return""})({orderType:d,isLong:w,marketPrice:N,pricePrecision:a});"limit"!==d||0n===N||i("price")||c("price",e)}),[t,w,d,E]);const $=(0,u.useMemo)((()=>["price"]),[]);return u.createElement("div",{className:"flex flex-col relative"},u.createElement(Se,{errorNames:$},u.createElement("div",{className:(0,s.cn)("flex gap-2 bg-interactive-interactive01 h-11 py-1.5 px-2 mb-2 rounded border border-transparent border-solid [&:has(input:focus)]:border-transparent items-center",q?"border-interactive-sell":"")},u.createElement(Le,{autoComplete:"off",type:"text",inputMode:"decimal",placeholder:e("orderForm-limit-price-title",{defaultValue:"Limit Price"}),...A,value:A.value,onChange:R,className:"p-0 bg-transparent text-body2"}),u.createElement("div",{className:"text-t-primary text-body2 mr-1"},"USD"))))};var kt=a(92518);const Ct=(0,u.memo)((({price:e,percent:t,tip:a,getI18n:r,isDegenMode:n})=>u.createElement(Ge,{label:u.createElement(Ze.t,{tip:a},u.createElement("div",{className:"flex"},u.createElement("span",null,r("orderForm-liqPrice","Liq. Price")),u.createElement("span",{className:"text-t-third"},"Â ",r("orderForm-liqPrice-margin",{defaultValue:"({{margin}} Margin)",margin:t}))))},u.createElement("div",{className:n?"text-t-sell":"text-t-primary"},e,n?` (${r("orderForm-degen-mode-liqPrice-rekt",{defaultValue:"Rekt"})})`:null,"Â USD")))),Et=({getI18n:e,symbol:t,useWebsocketSymbolMarkPrice:a,useMarketInfo:r,pairBaseConfig:l,pricePrecision:o})=>{const[s,i,c,d,g,f,h]=(0,p.qo)({name:["isLong","pairBase","orderType","price","leverage","amountIn","indexPrice"]}),v=(0,u.useMemo)((()=>(0,m.f)(f||"0")),[f]),x=(0,u.useMemo)((()=>P(g)),[g]),y=r(i),C=a(t),N=(0,u.useMemo)((()=>D(s)),[s]),I=(0,u.useMemo)((()=>(0,m.f)(C.close??"0")),[C.close]),L=(0,u.useMemo)((()=>(0,m.f)(`${d||0}`)),[d]),{longQty:F,shortQty:M}=y?.data||{},T=(0,u.useMemo)((()=>k({collateral:v,leverage:x,indexPrice:h})),[v,h,x]),V=(0,u.useMemo)((()=>(({leverageMargins:e,size:t})=>{if(!e)return 0n;const a=w({leverageMargins:e,size:t});return BigInt(a.liqLostP??0n)})({leverageMargins:l?.leverageMargins,size:T})),[l,T]),A=(0,u.useMemo)((()=>B({collateral:v,isLong:N,leverage:x,marketPrice:I,slippageConfig:l?.slippageConfig,longQty:F,shortQty:M,size:T})),[T,v,N,x,I,l,F,M]),q=(0,u.useMemo)((()=>S({isLong:N,orderType:c,limitPrice:L,marketPrice:I,spread:A})),[N,c,L,I,A]),R=(0,u.useMemo)((()=>(({entryPrice:e,liqLostRate:t,leverage:a})=>e*t/(a||1n)/10000n)({entryPrice:q,liqLostRate:V,leverage:x})),[q,V,x]),$=(0,u.useMemo)((()=>(({entryPrice:e,liqPriceDistance:t,isLong:a})=>a?e-t:e+t)({entryPrice:q,liqPriceDistance:R,isLong:N})),[q,R,N]),_=(0,u.useMemo)((()=>(0,fe.e9)(E((-1n*V).toString()),{decimals:4})),[V]),z=(0,u.useMemo)((()=>(0,fe.e9)(E(V.toString()),{decimals:4})),[V]),U=(0,u.useMemo)((()=>e("orderForm-liqPrice-tip",{defaultValue:"The position will be liquidated when the initial margin (after deducting the fee) reaches a loss of <red>{{margin}}</red>.",margin:z})),[z,e]),W=(0,u.useMemo)((()=>u.createElement("div",{className:"w-[282px]"},u.createElement("div",{className:"text-caption whitespace-pre-line"},u.createElement(kt.c,{i18nKey:"orderForm-liqPrice-tip",components:{red:u.createElement("div",{className:"inline text-t-sell"})},defaults:U})))),[U]),{isDegenMode:O}=(0,n.R)();return u.createElement(Ct,{isDegenMode:O,price:$>=0n?(0,ze.uf)((0,b.d)($),o):"-",percent:_,tip:W,getI18n:e})},Nt=u.memo((({getI18n:e})=>{const{control:t,clearErrors:a,resetField:r}=(0,p.Gc)(),{field:l}=(0,p.bc)({name:"orderType",control:t}),o=l.value,{isDegenMode:i}=(0,n.C)(),c=Ee(),d=(0,u.useCallback)((e=>{l.onChange(e),c.setOrderType(e.currentTarget.value),a(),r("takeProfit"),r("stopLoss")}),[a,l,c,r]);return u.createElement("div",{className:"flex items-center"},u.createElement("input",{className:"absolute pointer-events-none [clip:rect(0,0,0,0)]",...l,onChange:d,type:"radio",value:"market",id:"orderFormOrderTypeMarket"}),u.createElement("label",{htmlFor:"orderFormOrderTypeMarket",className:(0,s.cn)("mr-4 rounded cursor-pointer text-t-third hover:text-t-link "+("market"===o?"text-t-primary":"text-t-third"))},u.createElement("span",{className:"block text-subtitle2"},e("orderForm-market",{defaultValue:"Market"}))),i?null:u.createElement(u.Fragment,null,u.createElement("input",{className:"absolute pointer-events-none [clip:rect(0,0,0,0)]",...l,onChange:d,type:"radio",value:"limit",id:"orderFormOrderTypeLimit"}),u.createElement("label",{htmlFor:"orderFormOrderTypeLimit",className:(0,s.cn)("mr-4 rounded cursor-pointer text-t-third hover:text-t-link "+("limit"===o?"text-t-primary":"text-t-third"))},u.createElement("span",{className:"block text-subtitle2"},e("orderForm-limit",{defaultValue:"Limit"})))))}));var Pt=a(17921);function wt(e,t,a=3){return new Pt.O(e).toFixed(t).replace((0,ze.rv)(t,a),"$&,").replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}const It=e=>{const{address:t,isConnected:a}=(0,i.m)(),{isLoading:r,formatted:n}=(0,j.m)({address:t,token:e,query:{enabled:Boolean(t)&&Boolean(e),refetchInterval:1e4}}),{isLoading:l,data:o}=(0,ge.K)({address:t,query:{enabled:Boolean(t),refetchInterval:1e4}});return a?e?r&&void 0===n?null:n:l&&!o?null:o?.formatted:null},Lt="top-[2px] w-1 h-1 rounded-full bg-t-third",Ft="bg-border-lineStrong dark:bg-t-onColor";function Mt({getI18n:e}){const t=(0,pe.h)(),{sliderThumbProps:a,useAssetPrecision:r}=(0,u.useContext)(re),{setValue:n}=(0,p.Gc)(),[o,i,c,d]=(0,p.qo)({name:["amountIn","indexPrice","tokenInName","tokenIn"]}),g=r((0,l.De)(c,t))||2,f=It(d),h=Number(f??0),v=(0,m.f)(o||"0"),x=(0,m.f)(f||"0"),y=(0,fe.Y0)(Number(f??0),g),k=String(y).replace(/,/g,""),C=o&&Number(f??0)>0?Number(o)>=Number(k)?100:Number(o)/Number(h)*100:0,E=(100===C?x:v)*(0,m.f)(i||"1")/10n**18n,N=wt((0,b.d)(E),2),P=(0,u.useCallback)((e=>{if(e>=100)n("amountIn",k);else if(e<=0)n("amountIn","0");else{const t=Number(h)/100*e,a=Math.floor(t*10**g)/10**g;n("amountIn",String(a))}}),[g,k,h,n]),w=(0,u.useCallback)((([e])=>{P(e)}),[P]),I=(0,u.useCallback)((e=>{P(e)}),[P]),L=(0,u.useMemo)((()=>[{value:0,className:(0,s.cn)(Lt,Ft),style:{left:0},onClick:I},{value:25,className:(0,s.cn)(Lt,C>25?Ft:""),style:{left:"25%"},onClick:I},{value:50,className:(0,s.cn)(Lt,C>50?Ft:""),style:{left:"50%"},onClick:I},{value:75,className:(0,s.cn)(Lt,C>75?Ft:""),style:{left:"75%"},onClick:I},{value:100,className:Lt,style:{right:0},onClick:I}]),[I,C]),F=(0,u.useCallback)((()=>{n("amountIn",k)}),[k,n]);return u.createElement("div",{className:"relative flex flex-col mb-3 w-full"},u.createElement("div",{className:(0,s.cn)("relative flex items-center w-full h-14 min-h-14 mb-1")},u.createElement(lt,{value:[C],min:0,max:100,onValueChange:w,step:1,thumbProps:{...a,dragNode:u.createElement("div",{className:(0,s.cn)("absolute top-[-20px] right-[-6px] bg-interactive-primary px-0.5 text-caption1 rounded-sm text-t-onColor",C>90?"right-[2px]":"right-[-6px]")},parseInt(`${C}`,10),"%")},marks:L}),u.createElement("div",{className:"absolute flex text-caption1 left-0 top-10 text-t-third"},u.createElement("span",{className:"mr-1"},`${parseInt(`${C}`,10)}%`),u.createElement("span",null,`â $${N}`)),u.createElement("button",{type:"button",className:"absolute flex text-caption1 text-t-primary right-0 top-10",onClick:F},u.createElement("span",{className:"text-t-third mr-1"},e("orderForm-leverage-max","Max")),y)))}const Tt=({getI18n:e,symbol:t,pairBaseConfig:a,tradeConfig:r,useMarketInfo:n,useWebsocketSymbolMarkPrice:l})=>{const[o,s,i,c,d,g,f]=(0,p.qo)({name:["pairBase","isLong","orderType","amountIn","leverage","price","indexPrice","entryPrice"]}),h=l(t,{enabled:"market"===i}),v=(0,m.f)(h.close??"0"),x=n(o),y=(0,m.f)(`${g||0}`),C=(0,m.f)(c||"0"),E=P(d||1),w=x.data?.longQty,I=x.data?.shortQty,L="true"===s,F=k({collateral:C,leverage:E,indexPrice:f}),M=B({isLong:L,collateral:C,leverage:E,marketPrice:v,size:F,slippageConfig:a?.slippageConfig,longQty:w,shortQty:I}),T=S({limitPrice:y,isLong:L,marketPrice:v,orderType:i,spread:M}),A=V({leverage:E,indexPrice:(0,m.f)(f||"1"),amountIn:(0,m.f)(c||"0"),entryPrice:T,executionFeeUSD:r.data?.executionFeeUsd?r.data?.executionFeeUsd:0n,openFeeRate:N(a?.feeConfig?.openFeeP)}),D=(0,b.d)(A),q=(0,b.d)(F),{field:R}=(0,p.bc)({name:"qty"}),{field:$}=(0,p.bc)({name:"size"});(0,u.useEffect)((()=>{R.onChange(D)}),[D]),(0,u.useEffect)((()=>{$.onChange(q)}),[q]);const _=(0,ze.uf)((0,b.d)(F),1);return u.createElement(Ge,{label:u.createElement("div",{className:"flex"},u.createElement("span",null,e("orderForm-size-in-usd",{defaultValue:"Size in USD"})))},u.createElement("div",{className:"text-t-primary"},_,"Â USD"))},[Bt,St]=[0,50],Vt=({getI18n:e})=>{const{field:t,fieldState:a}=(0,p.bc)({name:"slippage",defaultValue:1,rules:{required:{value:!0,message:e("orderForm-required-field","Required")}}}),r=Ee((e=>e.setSlippage));(0,u.useEffect)((()=>{const e=parseFloat(`${t.value}`);isNaN(e)||(e<Bt?t.onChange(Bt):e>St&&t.onChange(St))}),[t.value,t]);const[,n]=((e=l.YE)=>(0,ee.Z)("trading-v2-order-form-default-values",e))(),o=(0,u.useCallback)(((e="")=>{n(e?t=>({...t,slippage:e}):e=>({...e,slippage:void 0})),t.onChange(e),r(e),f.set("slippage","input")}),[n,t,r]),i=(0,u.useMemo)((()=>["slippage"]),[]);return u.createElement(Se,{errorNames:i,align:"end"},u.createElement("div",{className:(0,s.cn)("flex flex-row flex-1 h-11 py-3 px-2 items-center justify-between text-body2 bg-interactive-interactive01 rounded border border-solid currency-input border-transparent",a.error&&"border-interactive-sell")},u.createElement("div",{className:"text-t-third"},u.createElement(Ze.t,{tip:u.createElement("div",{className:"w-[282px]"},u.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-slippage-tip01","Used to cancel a market order automatically if the price moved too fast in the direction of the trade before it was opened.")),u.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-slippage-tip02","For example if you wish to market long the current price but before your trade is opened the price moved up 1%, it will cancel automatically.")))},u.createElement("span",{className:"text-t-third whitespace-nowrap"},e("orderForm-slippage","Slippage")))),u.createElement("div",{className:"flex text-t-primary"},u.createElement(ot.Z,{className:"text-right bg-transparent border-0 text-t-primary outline-none w-full ",autoComplete:"off",allowNegativeValue:!1,step:.1,value:t.value,onValueChange:o}),u.createElement("span",null,"%"))))},At=({collateralTokens:e})=>{const{supportedChains:t}=(0,c.o6)(),a=(0,d.x)(),r=(0,u.useMemo)((()=>t.find((e=>e.id===a))),[a,t]),{field:n}=(0,p.bc)({name:"tokenInName"}),{control:l}=(0,p.Gc)(),[o]=(0,p.qo)({name:["tokenIn"],control:l}),s=e?.find((e=>e.tokenAddress===o))?.name||r?.nativeCurrency.symbol||"";return(0,u.useEffect)((()=>{n.value!==s&&n.onChange(s)}),[n,o,s]),u.createElement("input",{type:"hidden",...n,value:n.value??""})};var Dt=a(66618),qt=a(83896),Rt=a(24757);const $t=({getI18n:e,useWebsocketSymbolMarkPrice:t,useMarketInfo:a,pairBaseConfig:r,tradeConfig:o,symbol:i,pricePrecision:c})=>{const[d,g,h,v,x,y,C]=(0,p.qo)({name:["isLong","pairBase","orderType","price","leverage","amountIn","indexPrice"]}),{getValues:E,resetField:N}=(0,p.Gc)(),w=t(i),I=a(g),L=D(d),F=(0,m.f)(y||"0"),M=P(x),T=(0,m.f)(w.close??"1"),V=(0,m.f)(`${v||0}`),_=I?.data?.longQty,z=I?.data?.shortQty,U=k({collateral:F,leverage:M,indexPrice:C}),W=S({isLong:L,orderType:h,limitPrice:V,marketPrice:T,spread:B({collateral:F,isLong:L,leverage:M,marketPrice:T,slippageConfig:r?.slippageConfig,longQty:_,shortQty:z,size:U})}),O=A({entryPrice:W,size:U}),{min:Q,max:H}=(0,u.useMemo)((()=>(0,Rt.nW)()),[]),Z=o.data?.maxTakeProfitP/10**l.cB.percent*100,G=Math.min(H,Z),{isDegenMode:j}=(0,n.C)(),K=M>750n?Rt.IU:Rt.dU,{field:J,fieldState:{invalid:X}}=(0,p.bc)({name:"takeProfit",rules:{required:{value:!0,message:e("orderForm-take-profit-required",{defaultValue:"Take Profit is required"})},validate:{isLessMaxTakePrice:t=>{const a=(0,Y.v)(t||"0",l.cB.price),r=e("orderForm-take-profit-over-max",{defaultValue:"Take Profit over the max value"});return a<=2n**64n||r},isTakeProfitPositive:t=>{const a=e("orderForm-take-profit-large-than-zero",{defaultValue:"TP price should large than zero"});return parseFloat(t)>0||a},isTakeProfitLowerThanMaxTakeProfitRatio:t=>{if(O<=0n)return!0;const a=e("orderForm-take-profit-not-in-range",{defaultValue:"Please enter a number of take profit with in the range of {{min}}%-{{max}}%",min:Q,max:G}),r=R({entryPrice:W,tpSlPrice:(0,m.f)(`${parseFloat(t||"0")}`),qty:O,isLong:L}),n=$({pnl:r,leverage:M,qty:O,entryPrice:W}),l=parseFloat((0,b.d)(n));return 0n!==O&&l<=G||a},isTakeProfitGreaterThanMinTakeProfitRatio:t=>{if(O<=0n)return!0;const a=R({entryPrice:W,tpSlPrice:(0,m.f)(`${parseFloat(t||"0")}`),qty:O,isLong:L}),r=$({pnl:a,leverage:M,qty:O,entryPrice:W}),n=parseFloat((0,b.d)(r));return 0n!==O&&n>=Q||e("orderForm-take-profit-not-in-range",{defaultValue:"Please enter a number of take profit with in the range of {{min}}%-{{max}}%",min:Q,max:G})},isTakeProfitLargeThanZero:()=>!0,isTakeProfitLargerThanPrice:t=>{if("true"!==d)return!0;const a=e("orderForm-take-profit-too-low",{defaultValue:"TP price is too low"});return"limit"===h?parseFloat(t)>parseFloat(v)||a:"market"!==h||parseFloat(t)>parseFloat((0,b.d)(W))||a},isTakeProfitLowerThanPrice:t=>{if("true"===d)return!0;const a=e("orderForm-take-profit-too-high",{defaultValue:"TP price is too high"});return"limit"===h?parseFloat(t)<parseFloat(v)||a:"market"!==h||parseFloat(t)<parseFloat((0,b.d)(W))||a}}}}),{field:ee,fieldState:{invalid:te}}=(0,p.bc)({name:"stopLoss",rules:{validate:{isLessMaxStopLoss:t=>{const a=(0,Y.v)(t||"0",l.cB.price),r=e("orderForm-stop-loss-over-max",{defaultValue:"Stop loss over the max value"});return a<=2n**64n||r},isStopLossLessThanPrice:t=>{if("true"!==d)return!0;if(""===t)return!0;const a=e("orderForm-stop-loss-too-high",{defaultValue:"SL price is too high"});return"limit"===h?parseFloat(t)<parseFloat(v)||a:"market"!==h||parseFloat(t)<parseFloat((0,b.d)(W))||a},isStopLossLargerThanPrice:t=>{if("true"===d)return!0;if(""===t)return!0;const a=e("orderForm-stop-loss-too-low",{defaultValue:"SL price is too low"});return"limit"===h?parseFloat(t)>parseFloat(v)||a:"market"!==h||parseFloat(t)>parseFloat((0,b.d)(W))||a}}}}),ae=J.value?R({entryPrice:W,tpSlPrice:(0,m.f)(`${parseFloat(J.value||"0")}`),qty:O,isLong:L}):0n,re=ee.value?R({entryPrice:W,tpSlPrice:(0,m.f)(ee.value||"0"),qty:O,isLong:L}):0n,ne=$({pnl:ae,leverage:M,qty:O,entryPrice:W}),le=$({pnl:re,leverage:M,qty:O,entryPrice:W}),oe=Ee(),se=(0,u.useCallback)((e=>{e.preventDefault()}),[]),ie=(0,u.useMemo)((()=>j?oe.degenTakeProfitPercentage?"":oe.degenTakeProfitRadio:oe.takeProfitPercentage?"":oe.takeProfitRadio),[j,oe.degenTakeProfitPercentage,oe.degenTakeProfitRadio,oe.takeProfitPercentage,oe.takeProfitRadio]),ce=(0,u.useMemo)((()=>j?oe.degenStopLossPercentage?"":oe.degenStopLossRadio:oe.stopLossPercentage?"":oe.stopLossRadio),[j,oe.degenStopLossPercentage,oe.degenStopLossRadio,oe.stopLossPercentage,oe.stopLossRadio]);(0,u.useEffect)((()=>{N("takeProfitOptions",{defaultValue:ie}),N("takeProfitPercentage",{defaultValue:j?oe.degenTakeProfitPercentage:oe.takeProfitPercentage}),N("stopLossOptions",{defaultValue:ce}),N("stopLossPercentage",{defaultValue:j?oe.degenStopLossPercentage:oe.stopLossPercentage})}),[j]);const{field:de}=(0,p.bc)({name:"takeProfitOptions",defaultValue:ie}),{field:me}=(0,p.bc)({name:"takeProfitPercentage",defaultValue:j?oe.degenTakeProfitPercentage:oe.takeProfitPercentage}),{field:ue}=(0,p.bc)({name:"takeProfitText",defaultValue:""}),{field:pe}=(0,p.bc)({name:"stopLossOptions",defaultValue:ce}),{field:ge}=(0,p.bc)({name:"stopLossPercentage",defaultValue:j?oe.degenStopLossPercentage:oe.stopLossPercentage}),{field:fe}=(0,p.bc)({name:"stopLossText",defaultValue:""}),he=(0,u.useCallback)((e=>{ge.onChange(""),fe.onChange(""),pe.onChange(e),f.set("sl","button"),j?(oe.setDegenStopLossRadio(e.currentTarget.value),oe.setDegenStopLossPercentage("")):(oe.setStopLossRadio(e.currentTarget.value),oe.setStopLossPercentage(""))}),[j,oe,pe,ge,fe]),be=(0,u.useCallback)((e=>{if(/^\d+(\.\d{0,8})?$/.test(e.currentTarget.value)&&e.currentTarget.value.length<19||""===e.currentTarget.value){const t=e.currentTarget.value.replaceAll(/[^0-9.]/g,"");fe.onChange(t),ee.onChange(t),pe.onChange(""),ge.onChange(""),f.set("sl","input")}}),[ee,pe,ge,fe]),ve=(0,u.useCallback)((e=>{""===e?.currentTarget.value&&ee.onChange("");const t=Number.isNaN(Number(e.currentTarget.value))||""===e.currentTarget.value?e.currentTarget.value:Math.abs(Number(e.currentTarget.value));fe.onChange(""),pe.onChange(""),ge.onChange(t),j?(oe.setDegenStopLossPercentage(e.currentTarget.value),oe.setDegenStopLossRadio("")):(oe.setStopLossPercentage(e.currentTarget.value),oe.setStopLossRadio(""))}),[j,oe,ee,pe,ge,fe]),xe=(0,u.useCallback)((e=>{const t=Number.isNaN(Number(e.currentTarget.value))?e.currentTarget.value:Math.abs(Number(e.currentTarget.value));me.onChange(""),ue.onChange(""),de.onChange(t),f.set("tp","button"),j?(oe.setDegenTakeProfitRadio(e.currentTarget.value),oe.setTakeProfitPercentage("")):(oe.setTakeProfitRadio(e.currentTarget.value),oe.setTakeProfitPercentage(""))}),[j,oe,de,me,ue]),ye=(0,u.useCallback)((e=>{ue.onChange(""),de.onChange(""),me.onChange(e),j?(oe.setDegenTakeProfitPercentage(e.currentTarget.value),oe.setDegenTakeProfitRadio("")):(oe.setTakeProfitPercentage(e.currentTarget.value),oe.setTakeProfitRadio(""))}),[j,oe,de,me,ue]),ke=(0,u.useCallback)((e=>{if(/^\d+(\.\d{0,8})?$/.test(e.currentTarget.value)&&e.currentTarget.value.length<19||""===e.currentTarget.value){const t=e.currentTarget.value.replaceAll(/[^0-9.]/g,"");ue.onChange(t),J.onChange(t),de.onChange(""),me.onChange(""),f.set("tp","input")}}),[J,de,me,ue]);(0,u.useEffect)((()=>{if(!me.value&&!de.value)return;const e=me.value?parseFloat(me.value)/100:parseFloat(de.value),t=L?100*parseFloat(`${e}`)===Q?Math.ceil:Math.floor:100*parseFloat(`${e}`)===G?Math.ceil:Math.floor;if(0n!==W){const a=q({isLong:L,entryPrice:W,returnOfInvestmentRate:e,leverage:M});if(L){const e=10**c,r=t(parseFloat((0,b.d)(a))*e)/e;J.onChange(`${r}`)}else{const e=10**c,r=t(parseFloat((0,b.d)(a))*e)/e;J.onChange(`${r}`)}}else E("takeProfit")&&0n===W&&J.onChange("")}),[W,x,L,M,G,Q,c,K,de.value,me.value]),(0,u.useEffect)((()=>{if(ge.value||pe.value)if(0n!==W){const e=-1*Math.abs(ge.value?parseFloat(ge.value)/100:parseFloat(pe.value));if(Number.isNaN(e)||0===e)return void ee.onChange("");const t=q({isLong:L,entryPrice:W,returnOfInvestmentRate:e,leverage:M}),a=10**c,r=Math.floor(parseFloat((0,b.d)(t))*a)/a;ee.onChange(`${r}`)}else E("stopLoss")&&0n===W&&ee.onChange("")}),[W,E,L,M,c,pe.value,ge.value,fe.value]);const Ce=me.value?parseFloat(me.value):de.value?100*parseFloat(de.value):Math.floor(parseFloat((0,b.d)(ne))),Ne=ge.value?-1*Math.abs(parseFloat(ge.value)):pe.value?100*parseFloat(pe.value):Math.floor(parseFloat((0,b.d)(le))),Pe=(0,u.useRef)(null),we=(0,u.useMemo)((()=>["takeProfit","stopLoss"]),[]);return u.createElement(Dt.J2,null,u.createElement("div",{className:"contents [&_[data-radix-popper-content-wrapper]]:!absolute [&_[data-radix-popper-content-wrapper]]:!w-full",ref:Pe},u.createElement(Se,{errorNames:we},u.createElement(Dt.xo,{className:"w-full"},u.createElement("div",{className:(0,s.cn)("text-t-third flex flex-row flex-1 h-11 py-3 px-2 items-center justify-between text-body2 bg-interactive-interactive01 rounded",(X||te)&&"ring-1 ring-support-error")},e("orderForm-tp-sl",{defaultValue:"TP/SL"}),u.createElement("div",{className:"flex items-center text-t-primary text-body2 overflow-hidden gap-1.5"},u.createElement("div",null,(0,ze.fd)(Ce),"%"),u.createElement("div",{className:"h-3 border-r border-solid border-t-primary"}),u.createElement("div",null,0===Ne?"None":`${(0,ze.fd)(Ne)}%`)))))),u.createElement(Dt.yk,{align:"start",className:"z-[100] p-0 bg-transparent rounded overflow-visible md:max-w-[18rem] max-w-none border border-border-line border-solid items-center relative shadow-elevation3",sideOffset:8,onOpenAutoFocus:se,container:Pe.current},u.createElement("div",{className:"rounded overflow-hidden"},u.createElement("div",{className:"grid gap-2 grid-cols-[1fr_min-content_64px] py-3 bg-interactive-interactive01 px-2 items-center"},u.createElement("label",{className:"flex items-center gap-2"},u.createElement("span",{className:"text-t-third text-body2"},e("orderForm-tpsl-tp-price",{defaultValue:"TP Price"})),u.createElement(Le,{...ue,className:"h-5 text-body2 rounded-none bg-interactive-interactive01 flex-1 p-0 text-end placeholder:text-t-primary focus:placeholder:text-transparent text-t-primary",type:"number",inputMode:"decimal",placeholder:J.value,onChange:ke})),u.createElement(qt.Z,{decorative:!0,orientation:"vertical",className:"h-5"}),u.createElement("label",{className:"flex gap-0.5"},u.createElement("span",{className:"text-body2 text-t-third"},"+"),u.createElement(Le,{...me,className:"h-5 text-body2 rounded-none bg-interactive-interactive01 flex-1 p-0 placeholder:text-t-primary focus:placeholder:text-transparent text-end text-t-primary",placeholder:(0,ze.fd)(Ce),type:"number",inputMode:"numeric",onChange:ye}),u.createElement("span",{className:"text-t-primary text-body2"},"%"))),u.createElement("div",{className:"bg-interactive-interactiveBg px-2 h-10 flex justify-between"},K.map((e=>u.createElement("label",{key:e.key,className:"text-caption1 text-t-third text-center cursor-pointer hover:text-t-linkHover flex items-center justify-center has-[:checked]:text-t-primary"},e.label,u.createElement("input",{...de,type:"radio",value:e.key,className:"sr-only",onChange:xe,checked:String(de.value)===e.key}))))),u.createElement("div",{className:"grid gap-2 grid-cols-[1fr_min-content_64px] py-3 bg-interactive-interactive01 px-2 items-center"},u.createElement("label",{className:"flex items-center gap-2"},u.createElement("span",{className:"text-t-third text-body2"},e("orderForm-tpsl-sl-price",{defaultValue:"SL Price"})),u.createElement(Le,{...fe,className:"h-5 text-body2 rounded-none bg-interactive-interactive01 flex-1 p-0 text-end placeholder:text-t-primary focus:placeholder:text-transparent text-t-primary",type:"number",inputMode:"decimal",placeholder:ee.value,onChange:be})),u.createElement(qt.Z,{decorative:!0,orientation:"vertical",className:"h-5"}),u.createElement("label",{className:"flex gap-0.5"},u.createElement("span",{className:"text-body2 text-t-third"},"-"),u.createElement(Le,{...ge,className:(0,s.cn)("h-5 text-body2 rounded-none bg-interactive-interactive01 flex-1 p-0 focus:placeholder:text-transparent text-end text-t-primary",0===Ne?"placeholder:text-t-placeholder":"placeholder:text-t-primary"),placeholder:0===Ne?"ROI":`${(0,ze.fd)(Math.abs(Ne))}`,type:"number",inputMode:"numeric",onChange:ve}),u.createElement("span",{className:"text-t-primary text-body2"},"%"))),u.createElement("div",{className:"bg-interactive-interactiveBg px-2 h-10 flex justify-between"},Rt.t_.map((e=>u.createElement("label",{key:e.key,className:"text-caption1 text-t-third text-center cursor-pointer hover:text-t-linkHover flex items-center justify-center has-[:checked]:text-t-primary first:justify-start last:justify-end"},e.label,u.createElement("input",{...pe,type:"radio",value:e.key,className:"sr-only",checked:pe.value===e.key,onChange:he}))))))))};var _t=a(11273);const zt=({getI18n:e,symbol:t,pricePrecision:a=2,useMarketInfo:r,useWebsocketSymbolMarkPrice:n,pairBaseConfig:l})=>{const{isMobile:o}=(0,_t.F)(),{getValues:s}=(0,p.Gc)(),[i,c]=(0,p.qo)({name:["price","indexPrice"]}),[d,g,f,h]=s(["isLong","pairBase","amountIn","leverage"]),v=n(t),x=(0,m.f)(v.close??"0"),y=D(d),C=r(g),E=(0,m.f)(f||"0"),N=P(h||1),w=C.data?.longQty,I=C.data?.shortQty,L=(0,m.f)(`${i||0}`),F=k({collateral:E,leverage:N,indexPrice:c}),M=B({isLong:y,collateral:E,marketPrice:x,size:F,slippageConfig:l?.slippageConfig,longQty:w,shortQty:I,leverage:N}),T=z({limitPrice:L,spread:M,isLong:y});return 0n!==T?u.createElement(Ge,{label:u.createElement(Ze.t,{tip:u.createElement("div",null,u.createElement("div",{className:"text-caption mb-6"},e("orderForm-trigger-price-tip",{defaultValue:"In order to protect the price from being manipulated, the limit order will be triggered when Limit price * ( 1 +/- Spread), and the transaction will be executed at the Limit price"})),u.createElement("div",{className:"text-caption"},e("orderForm-trigger-price-long-tip",{defaultValue:"Long Trigger Price = Limit Price * (1 - Spread%)"})),u.createElement("div",{className:"text-caption"},e("orderForm-trigger-price-short-tip",{defaultValue:"Short Trigger Price = Limit Price * (1 + Spread%)"})))},u.createElement("div",{className:"flex"},u.createElement("span",{className:o?"border-b border-dashed border-b-t-secondary":""},e("orderForm-limit-trigger-price",{defaultValue:"Trigger Price"}))))},u.createElement("div",{className:"text-t-primary"},Math.ceil(parseFloat((0,b.d)(T))*10**a)/10**a,"Â USD")):null},Ut=({assetDecimals:e,ee:t,enableDumbMode:a,filterTabInfo:r,filterTabItems:o=h.n,getI18n:b,guideNoticeKey:v,isLeverageLoading:x,isLight:y,Link:k,locale:E,onChainPerpContractAddress:w,onError:L,onSubmit:F,pairBase:M,pricePrecision:T,siteHost:V,staticHost:D,tradeConfig:q,sliderThumbProps:R,useActionBtnDisabled:$,useAssetPrecision:_,useChangeSymbol:z,useCoachmark:U,useCurrentProduct:O,useFuturesMarket:Q,useFuturesMarketSort:H,useGetCollateralTokens:Z,useGetMaxCollateral:G,useGetPairMaxTpRatios:j,useIsMarketClose:K,useMarketInfo:Y,usePairByBaseConfig:J,useSymbolConfigInfo:X,useSymbolLogo:ee,useTokenApprove:te,useTrackPopupViewWithWalletAddress:ne,useTrackWebClickWithWalletAddress:le,useWebSocketAssetIndex:oe,useWebsocketSymbolMarkPrice:se})=>{const{chain:ie}=(0,i.m)(),{supportedChains:ce}=(0,c.o6)(),de=(0,d.x)(),me=(0,u.useMemo)((()=>ce.find((e=>e.id===de))),[de,ce]),ue=Ce(),pe=Ee(),{isDegenMode:ge,tradingMode:fe}=(0,n.C)(),he=O(),{symbol:be,degenPairSymbol:ve,degenPairBase:xe}=he,ye=(0,p.cI)({shouldFocusError:!1,reValidateMode:"onSubmit",defaultValues:{isLong:ue.isLong,orderType:Boolean(xe)&&Boolean(ve)&&ge?"market":pe.orderType,tokenIn:pe.tokenIn[de],pairBase:M,amountIn:ue.amountIn,price:"",takeProfit:"",stopLoss:"",leverage:Boolean(xe)&&Boolean(ve)?pe.degenLeverage:pe.leverage,slippage:pe.slippage,fee:"",acceptablePrice:""}});(0,u.useEffect)((()=>{xe&&ye.resetField("leverage",{defaultValue:Boolean(xe)&&Boolean(ve)?pe.degenLeverage:pe.leverage})}),[xe,ve,ye,pe.degenLeverage,pe.leverage]);const[ke,Ne]=(0,p.qo)({name:["orderType","pairBase"],control:ye.control}),{handleSubmit:Pe,reset:we,setValue:Ie}=ye,Le=!!xe&&!!ve,{data:Fe}=J(Ne||M),Me=(0,u.useMemo)((()=>Fe?.leverageMargins?.reduce(((e,t)=>t.maxLeverage>e?t.maxLeverage:e),0)||1),[Fe]),Te=j(Ne),Be=(0,u.useMemo)((()=>Te.data&&0!==Te.data.length?Math.min(...Te.data.map((e=>e.leverage))):1),[Te.data]),Se=Z(),Ve=(0,u.useMemo)((()=>Se?.map((e=>l.KF.has(e.tokenAddress)?{...e,tokenAddress:"",name:ie?ie.nativeCurrency.symbol:me?.nativeCurrency.symbol}:e))?.filter((e=>{switch(fe){case"classic":case"degen":return e?.asMargin;case"dumb":return e?.asBet;default:return!0}})).filter(Boolean)||[]),[ie,me?.nativeCurrency.symbol,Se,fe]);(0,u.useEffect)((()=>{Ie("pairBase",ge?xe:M)}),[xe,ge,M,Ie]);const qe=(0,u.useMemo)((()=>({ee:t,filterTabInfo:r,filterTabItems:o,getI18n:b,isLeverageLoading:x,isLight:y,Link:k,locale:E,maxLeverage:Me,minLeverage:Be,siteHost:V,sliderThumbProps:R,useActionBtnDisabled:$,useAssetPrecision:_,useChangeSymbol:z,useCurrentProduct:O,useFuturesMarket:Q,useFuturesMarketSort:H,useIsMarketClose:K,useMarketInfo:Y,useSymbolConfigInfo:X,useSymbolLogo:ee,usePairByBaseConfig:J,useTokenApprove:te,useTrackPopupViewWithWalletAddress:ne,useTrackWebClickWithWalletAddress:le,useWebsocketSymbolMarkPrice:se})),[t,r,o,b,x,y,k,E,Me,Be,V,R,$,_,z,O,Q,H,K,Y,X,ee,J,te,ne,le,se]),Re=(0,u.useCallback)((()=>{we(void 0,{keepDirtyValues:!0,keepValues:!0,keepDefaultValues:!0})}),[we]),$e=se(be),ze=Y(M),[Oe,Qe]=(0,g.Z)(!1),Ze=(0,u.useRef)(null),Ge=(0,u.useCallback)((()=>{Ze.current?.resolve&&(Ze.current?.resolve(),Qe(!1))}),[Qe]),Ke=(0,u.useCallback)((()=>{Ze.current?.reject&&(Qe(!1),Ze.current?.reject(new Error("User cancel")))}),[Qe]),Ye=(0,u.useCallback)((async(e,t)=>{const a=(0,m.f)($e.close??"0"),r=(0,m.f)(`${e.price||0}`),n="true"===e.isLong,l=(0,m.f)(e.size),o=(0,m.f)(e.amountIn||"0"),s=B({isLong:n,leverage:P(e.leverage),marketPrice:a,slippageConfig:Fe?.slippageConfig,longQty:ze?.data?.longQty,shortQty:ze?.data?.shortQty,size:l}),i=S({isLong:n,orderType:ke,limitPrice:r,marketPrice:a,spread:s}),c=A({entryPrice:i,size:l}),d=q?.data?.executionFeeUsd||0n,u=N(Fe?.feeConfig?.openFeeP),p=o*(0,m.f)(e.indexPrice||"1")/10n**BigInt(e.tokenInDecimals??0),g=C({collateral:p,executionFee:d,openFee:u,orderType:e.orderType}),h=Fe?.leverageMargins?I({leverageMargins:Fe?.leverageMargins,size:l}):0n,b=(({initialMargin:e,initialLostRate:t,orderType:a,qty:r,limitPrice:n,marketPrice:l})=>{const o="limit"===a?n*r:l*r,s=e*t;return 0n===s||0n===o?0n:s/(o/10n**18n)*10n**14n})({orderType:e.orderType,limitPrice:r,marketPrice:a,qty:c,initialMargin:g,initialLostRate:h}),v=0n===b?0n:b/((0,m.f)("4")/10n**18n);if(e.amountIn&&s>=v&&s<b){Qe(!0);const e=()=>{let e,t;return{promise:new Promise(((a,r)=>{e=a,t=r})),resolve:e,reject:t}};Ze.current=e();try{await(Ze.current?.promise)}catch(e){return t.preventDefault(),void(Ze.current=null)}finally{Ze.current=null}}await F({...e,userHeatMap:f.toObject()},void 0,Re)}),[ze?.data?.longQty,ze?.data?.shortQty,F,ke,Fe?.feeConfig?.openFeeP,Fe?.leverageMargins,Fe?.slippageConfig,Re,$e.close,Qe,q?.data?.executionFeeUsd]);return u.createElement(p.RV,{...ye},u.createElement("form",{noValidate:!0,onSubmit:Pe(Ye,L)},u.createElement("div",{className:"flex items-center justify-evenly border-b-[0.6px] border-solid border-border-line"},u.createElement(Xe,{getI18n:b,Link:k,locale:E}),a?u.createElement("div",{className:"border-r-[0.6px] border-solid border-border-line h-6"}):null,a?u.createElement(He,{getI18n:b,staticHost:D,Link:k,locale:E}):null),u.createElement("div",{className:"p-4"},u.createElement(re.Provider,{value:qe},u.createElement(u.Fragment,null,u.createElement("div",{className:"mb-4"},u.createElement(We,{getI18n:b})),u.createElement("div",{className:"mb-2 flex flex-row justify-between z-[2]"},u.createElement(Nt,{getI18n:b}),u.createElement("div",{className:"flex flex-row items-center text-subtitle2"},ge&&u.createElement(De,{getI18n:b}),Le?u.createElement(xt,{symbol:be,pairBaseConfig:Fe,getI18n:b,isLoading:x,staticHost:D,Link:k}):u.createElement(ut,{minLeverage:Be,maxLeverage:Me}))),"limit"===ke?u.createElement(yt,{useMarketInfo:Y,useWebsocketSymbolMarkPrice:se,getI18n:b,symbol:be,pricePrecision:T,pairBaseConfig:Fe}):null,"market"===ke?u.createElement(W,{useWebsocketSymbolMarkPrice:se,pairBaseConfig:Fe,useMarketInfo:Y,symbol:be}):null,u.createElement("div",{className:"relative mb-4"},u.createElement(Ae,{symbol:be,collateralTokens:Ve,useGetMaxCollateral:G,getI18n:b,tradeConfig:q,pairBaseConfig:Fe,onChainPerpContractAddress:w,useCoachmark:U,guideNoticeKey:v}),u.createElement(Mt,{getI18n:b})))),u.createElement("div",{className:(0,s.cn)("mb-6 relative isolate z-[2]","market"===ke&&"grid grid-cols-2 gap-2")},u.createElement($t,{getI18n:b,useWebsocketSymbolMarkPrice:se,pairBaseConfig:Fe,useMarketInfo:Y,symbol:be,pricePrecision:T,tradeConfig:q,useAssetPrecision:_}),"market"===ke?u.createElement(Vt,{getI18n:b}):null),u.createElement(et,{useWebSocketAssetIndex:oe}),u.createElement(At,{collateralTokens:Ve}),u.createElement(_e,{symbol:be,getI18n:b,tradeConfig:q,useTokenApprove:te,collateralTokens:Ve,useMarketInfo:Y,useWebsocketSymbolMarkPrice:se,pricePrecision:T,pairBaseConfig:Fe,useActionBtnDisabled:$,useCurrentProduct:O}),u.createElement("div",{className:"mt-2"},"limit"===ke?u.createElement(zt,{getI18n:b,symbol:be,pricePrecision:T,useMarketInfo:Y,useWebsocketSymbolMarkPrice:se,pairBaseConfig:Fe}):null,u.createElement(Tt,{getI18n:b,symbol:be,pairBaseConfig:Fe,tradeConfig:q,useMarketInfo:Y,useWebsocketSymbolMarkPrice:se}),"market"===ke?u.createElement(je,{getI18n:b,symbol:be,useMarketInfo:Y,useWebsocketSymbolMarkPrice:se,pairBaseConfig:Fe,pricePrecision:T}):null,u.createElement(Et,{getI18n:b,symbol:be,useMarketInfo:Y,useWebsocketSymbolMarkPrice:se,pairBaseConfig:Fe,pricePrecision:T}),u.createElement(Je,{getI18n:b,tradeConfig:q,pairBaseConfig:Fe,assetDecimal:e,useAssetPrecision:_,Link:k})))),u.createElement("div",{className:"p-4"},u.createElement(ae,{getI18n:b,staticHost:D})),u.createElement(Ue,{open:Oe,getI18n:b,onClose:Ke,onConfirm:Ge,useWebsocketSymbolMarkPrice:se,useMarketInfo:Y,symbol:be,pricePrecision:T,pairBaseConfig:Fe}))};var Wt=a(41822),Ot=a(61878),Qt=a(36499),Ht=a(43693),Zt=a(33687),Gt=a(63469),jt=a(17845),Kt=a(87685),Yt=a(85177),Jt=a(2547),Xt=a(96988),ea=a(52590),ta=a(32327),aa=a(1619),ra=a(43785),na=a(82452),la=a(12284),oa=a(93699),sa=a(94300),ia=a(29376),ca=a(73586);const da=()=>{const{chain:e,address:t,isConnected:a}=(0,i.m)(),{supportedChains:r}=(0,c.o6)(),n=(0,d.x)(),o=(0,u.useMemo)((()=>r.find((e=>e.id===n))),[n,r]),{data:s}=(()=>{const e=(0,ia.E)();return(0,Fe.u)({...e,functionName:"tokensV3"})})(),{data:p,isFetched:g}=(0,la.a)({queryKey:["assetIndex",oa.e.id],queryFn:()=>(async()=>{try{return fetch(`${Zt.brokerConfig.apiBaseUrl}/fapi/v1/assetIndex`).then((e=>e.json()))}catch(e){return[]}})(),staleTime:1/0,refetchInterval:!!w?.watch&&1e4}),f=(0,u.useMemo)((()=>new Map(p?.map((e=>[e.symbol.slice(0,e.symbol.lastIndexOf("USD")),(0,m.f)(e.index||"0")]))||[])),[p]),h=(0,u.useMemo)((()=>s?.map((e=>e.tokenAddress))),[s]),{data:x}=(0,ge.K)({address:t,query:{enabled:Boolean(t)}}),{data:y,isFetched:k}=(e=>{const t=e.tokens.map((t=>({address:t,abi:Me.Wo,functionName:"balanceOf",args:[e.address],chainId:e.chainId}))),a=e.tokens.map((t=>({address:t,abi:Me.Wo,functionName:"decimals",chainId:e.chainId}))),r=e.tokens.map((t=>({address:t,abi:Me.Wo,functionName:"symbol",chainId:e.chainId}))),{data:n,isLoading:l,refetch:o,isError:s,queryKey:i,isFetched:c}=(0,sa.N)({allowFailure:!1,contracts:t.concat(a).concat(r),scopeKey:e.scopeKey,query:e.query}),d=(0,u.useMemo)((()=>{const t=[];if(n)for(let a=0,r=e.tokens.length;a<r;a+=1){const r=n[a],l=n[a+e.tokens.length],o=n[a+2*e.tokens.length];t.push({data:r,decimals:l,symbol:o,formatted:(0,v.b)(r??0n,l??0)})}return t}),[e.tokens.length,n]);return(0,u.useMemo)((()=>({data:d,isLoading:l,isFetched:c,refetch:o,isError:s,queryKey:i})),[d,l,o,s,i,c])})({address:t,tokens:h||[],query:{enabled:Boolean(t)&&Boolean(h)}}),C=(0,ca.n)(h),E=(0,u.useMemo)((()=>C?.map((e=>({...e,functionName:"symbol"})))),[C]),{data:N}=(0,sa.N)({contracts:E,query:{enabled:Boolean(E?.length&&E?.length>0)}}),P=(0,u.useMemo)((()=>s?.map(((t,a)=>l.KF.has(t.tokenAddress)?{...t,name:(e?e.nativeCurrency.symbol:o?.nativeCurrency.symbol)||"",formatted:x?.formatted||"0"}:{...t,name:N?.at(a)?.result||"",formatted:y?.at(a)?.formatted||"0"}))),[e,o?.nativeCurrency.symbol,s,x?.formatted,N,y]);var w;return(0,u.useMemo)((()=>!g||!k&&a||!P?[]:a&&P?Array.from(P)?.sort(((e,t)=>{const a=(0,m.f)(e.formatted)*(f.get((0,l.De)(e.name))||0n)/10n**18n,r=(0,m.f)(t.formatted)*(f.get((0,l.De)(t.name))||0n)/10n**18n;return Number((0,b.d)(r))-Number((0,b.d)(a))})):P),[g,k,a,P,f])};var ma=a(72200);const ua=({base:e})=>{const t=(0,ma.t)(e,{watch:!1});return(0,u.useCallback)((e=>{const a=(({leverageMarginTier:e,leverage:t})=>{const a=Array.from(e??[])?.sort(((e,t)=>e.maxLeverage-t.maxLeverage)).find((e=>t<=e.maxLeverage));return a?.notionalUsd??0n})({leverageMarginTier:t.data?.leverageMargins,leverage:e});return(({maxOrderNotional:e,leverage:t})=>e/BigInt(t))({maxOrderNotional:a,leverage:e})}),[t.data?.leverageMargins])};var pa=a(66779),ga=a(24722),fa=a(54872),ha=a(48118),ba=a(26101),va=a(25254),xa=a(59712);const ya=(0,u.memo)((()=>{const{brokerId:e}=Zt.brokerConfig,{isDegenMode:t}=(0,n.C)(),a=(0,u.useRef)(t),{isLight:s}=(0,ea.F)(),{symbol:i,products:c}=(0,Yt.GS)(),{getI18n:d,i18n:p}=(0,Xt.V6)(),g=(0,Kt.E4)(),{setDisabled:f}=(0,Yt.a9)(),[h,v]=(0,Kt.zC)(),{data:x,isLoading:y}=(0,ga.S)(),k=(0,Kt.fV)(i),C=(0,u.useMemo)((()=>(x||[]).find((e=>e.name.replace("/","").toLowerCase()===i.toLocaleLowerCase()))),[x,i]),E=(0,Wt.NL)(),N=(0,Re.Z)(),P=(0,Ot.t)(),w=(0,u.useCallback)((async(a,r,n)=>{const{pairBase:s,isLong:c,tokenIn:u,amountIn:p,price:x,stopLoss:y,takeProfit:k,orderType:C,acceptablePrice:w,tokenInDecimals:I,fee:L,leverage:F,entryPrice:M,indexPrice:T,qty:B,userHeatMap:S,tokenInName:V}=a;f(!0),(0,ra.wu)(t?"click_open_degen_position_button":"tradingV2_place_order",{...S});const A=y?(0,Y.v)(y,l.cB.price):0n,D=(0,Y.v)(k,l.cB.price),q=(0,Y.v)(p,I),R=(0,m.f)(p)*(0,m.f)(T||"1")/10n**18n,$="true"===c;try{if("limit"===C){const t=Math.floor(parseFloat(x)*10**l.cB.price),a=(R-(0,m.f)(L)*(0,m.f)(T||"1")/10n**18n)*BigInt(F)*10n**BigInt(l.cB.qty)/(0,m.f)(x),r=F>=v||F>=750?995n*a/1000n:F===h&&1!==h?1100n*a/1000n:a;xa.debug("limit order",{parsedAmountInBasedUSD:R.toString(),pairBase:s,direction:$,tokenIn:u,tempQty:a,parsedAmountIn:q.toString(),finalQty:r,limitPrice:t,stopLossPrice:A.toString(),takeProfitPrice:D.toString(),OnChainPerpBrokerCode:e});const c={amountIn:q,broker:e,isLong:$,pairBase:s,price:BigInt(t),qty:r,stopLoss:A,takeProfit:D,tokenIn:u};await(0,o.sW)({address:g.address,amountIn:p,config:N,getI18n:d,leverage:F,limitPrice:x,onUserConfirm:()=>n?.(),openLimitOrderParams:c,publicClient:P,symbol:i,tokenInName:V}),(0,ra.wu)("tradingV2_place_order_success")}if("market"===C){const a=Math.floor(parseFloat(w)*10**l.cB.price),r=(0,m.f)(B),c=BigInt(Math.floor(parseFloat((0,b.d)(r))*10**l.cB.qty)),f=F>=v||F>=750?995n*c/1000n:F===h&&1!==h?1100n*c/1000n:c,x=(R-(0,m.f)(L)*(0,m.f)(T||"1")/10n**18n)*BigInt(F)*10n**BigInt(l.cB.qty)/(0,m.f)(M);xa.debug("market order",{leverage:F,maxLeverage:v,isMaxLeverage:F>=v,pairBase:s,direction:$,tokenIn:u,parsedAmountInBasedUSD:(0,b.d)(R),parsedAmountIn:q.toString(),tempQty:c.toString(),qtyFromAmountIn:x.toString(),finalQty:f.toString(),acceptPrice:a,stopLossPrice:A.toString(),takeProfitPrice:D.toString(),OnChainPerpBrokerCode:e,entryPrice:M,fee:(0,m.f)(L).toString(),indexPrice:T,feeInUsd:(0,b.d)((0,m.f)(L)*(0,m.f)(T||"1")/10n**18n)}),await(0,o.k3)({address:g.address,amountIn:p,config:N,getI18n:d,leverage:F,onUserConfirm:()=>n?.(),openMarketTradeParams:{amountIn:q,broker:e,isLong:$,pairBase:s,price:BigInt(a),qty:f,stopLoss:A,takeProfit:D,tokenIn:u},publicClient:P,symbol:i,tokenInName:V}).then((()=>{(0,ra.wu)(t?"open_degen_position_success":"tradingV2_place_order_success")}))}(0,ra.wu)(t?"open_degen_position_success":"tradingV2_place_order_success")}catch(e){xa.error(e),e instanceof Qt.ab||(0,ra.wu)(t?"open_degen_position_error":"tradingV2_place_order_error"),(0,ra.wu)(t?"open_degen_position_error":"tradingV2_place_order_error"),O.A.error(e.shortMessage??e?.reason??e.error??e?.message)}finally{f(!1),await E.invalidateQueries({predicate:e=>"balance"===e.queryKey[0].entity||"getMarketInfo"===e.queryKey[0].functionName}),jt.ee.emit("REFETCH_POSITION_LIST",void 0),jt.ee.emit("REFETCH_ORDER_LIST",void 0)}}),[f,t,v,h,e,N,g,P,d,i,E]),I=(0,u.useCallback)((()=>{}),[]),L=(0,ha.J)(),F=(0,na.$)();(0,u.useEffect)((()=>{t?!a.current&&t&&(0,ra.wu)("click_degen_mode_button"):a.current=!1}),[t]);const{dumb:M}=(0,Jt.B)();return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(Ut,{assetDecimals:F.data,ee:aa.ee,enableDumbMode:M,getI18n:d,isLeverageLoading:y,isLight:s,Link:Ht.G,locale:p.language,maxLeverage:v,minLeverage:h,onChainPerpContractAddress:g.address,onError:I,onSubmit:w,pairBase:C?.base||"",pricePrecision:k,products:c,siteHost:Zt.brokerConfig.staticBaseUrl,staticHost:Zt.brokerConfig.apxStaticBaseUrl,tradeConfig:L,useActionBtnDisabled:Yt.a9,useAssetPrecision:Kt.RK,useChangeSymbol:Kt.d0,useCurrentProduct:Kt.j2,useFuturesMarket:Kt.Pj,useFuturesMarketSort:Kt.e,useGetCollateralTokens:da,useGetMaxCollateral:ua,useGetPairMaxTpRatios:ba.r,useIsMarketClose:va.Z,useMarketInfo:pa.c,usePairByBaseConfig:ma.t,useSymbolConfigInfo:Kt.Kn,useSymbolList:ga.S,useSymbolLogo:Kt.sH,useTokenApprove:fa.Z,useTrackPopupViewWithWalletAddress:Kt.Tb,useTrackWebClickWithWalletAddress:Kt.fM,useWebSocketAssetIndex:Kt.Ms,useWebsocketSymbolMarkPrice:Kt.Le,enableActivityNotice:!0,useCoachmark:ta.KO,guideNoticeKey:Gt.IL})})})),ka=({symbol:e,useWebsocketSymbolMarkPrice:t})=>{const{field:a}=(0,p.bc)({name:"acceptablePrice",shouldUnregister:!0,defaultValue:""}),{control:r}=(0,p.Gc)(),[n,l]=(0,p.qo)({name:["slippage","isLong"],control:r}),o=t(e),s=(0,m.f)(o.close??"0"),i=D(l),c=(0,m.f)("0"),d=S({isLong:i,orderType:"market",limitPrice:c,marketPrice:s,spread:0n}),g=_({entryPrice:d,slippage:n||0,isLong:i});return(0,u.useEffect)((()=>{a.onChange(`${g}`)}),[g,a]),(0,u.useEffect)((()=>()=>{a.onChange("")}),[a]),u.createElement("input",{type:"hidden",...a,value:void 0===a.value?"":a.value})};var Ca=a(86645);const Ea=e=>{const t=(0,pe.h)(),{suffix:a,getI18n:r,onChainPerpContractAddress:n,predictionConfig:o,symbol:c,predictionPairs:g,...h}=e,{useAssetPrecision:v}=(0,u.useContext)(ne),{getValues:x}=(0,p.Gc)(),[y,k,C,E,N]=(0,p.qo)({name:["tokenIn","indexPrice","tokenInName","period","pairBase"]}),P=v((0,l.De)(C,t))||2,{address:w,isConnected:I,chain:L}=(0,i.m)(),{data:F,decimals:M,symbol:T}=(0,j.m)({address:w,token:y,query:{enabled:Boolean(w)&&I}}),{data:B}=(0,ge.K)({address:w,query:{enabled:Boolean(w)&&I}}),S=y?M:B?.decimals,V=y?F:B?.value,A=y?T:B?.symbol;(0,Fe.u)({address:y,abi:Me.Wo,functionName:"allowance",args:[w,n],query:{enabled:Boolean(I&&y&&w&&n),refetchInterval:3e4}});const q=(0,d.x)(),R=(0,Fe.u)({chainId:q,abi:Ca.Z,address:n,functionName:"getPredictionMarket",args:[N,[E]],query:{enabled:Boolean(void 0!==E&&N)}}),{field:$,fieldState:{error:_}}=(0,p.bc)({name:"amountIn",rules:{shouldUnregister:!0,required:r("orderForm-required-field","Required"),validate:{isInsufficientCollateralBalance:e=>!((0,Y.v)(`${e}`,S??18)>(V??(0,Y.v)("0",S??18)))||r("orderForm-button-InsufficientBalance",{defaultValue:"Insufficient Balance"}),isSafeInteger:e=>!Number.isSafeInteger(e),isNotANumber:e=>!Number.isNaN(e),isLargerThanMinCollateral:e=>{const a=y?S:L?.nativeCurrency.decimals??18,n=(0,m.f)(k),s=(0,Y.v)(`${e}`,a??18)*10n**BigInt(18-(a??18)),i=(o?.minBetUsd||0n)*10n**18n/n;return s>=i||(e=>{const a=Math.ceil(parseFloat(e)*10**P)/10**P;return r("orderForm-dumb-mode-is-larger-min-bet",{defaultValue:"The minimum principal is {{minPrincipal}} {{tokenInName}}",minPrincipal:a,tokenInName:(0,l.De)(A,t)})})((0,b.d)(i))},isBelowOrderMaxOI:e=>{if(!R.data)return!0;const t=D(x("isLong")),a=g?.find((e=>e.base===N))?.predictionPeriods.find((e=>e.period===E)),n=t?a?.maxUpUsd:a?.maxDownUsd;if(!n)return!0;const l=t?R.data[0].upUsd:R.data[0].downUsd,o=(0,m.f)(k);return(0,Y.v)(e||"0",S??18)*o/10n**BigInt(S??18)+l<=n||r("orderForm-button-reach-max-oi",{defaultValue:"{{symbol}} has reached the position limit",symbol:c})}}}}),z=(0,u.useCallback)((e=>{(/^\d+(\.\d{0,8})?$/.test(e.target.value)&&e.target.value.length<19||""===e.target.value)&&($.onChange(e.target.value.replaceAll(/[^0-9.]/g,"")),f.set("initial_margin","input"))}),[P]),U=(0,u.useMemo)((()=>["amountIn"]),[]);return u.createElement("div",{className:"flex flex-col"},u.createElement(Se,{errorNames:U},u.createElement("div",{className:(0,s.cn)("flex gap-2 bg-interactive-interactive01 h-11 py-1.5 px-2 rounded border border-transparent border-solid [&:has(input:focus)]:border-transparent items-center",_?"border-interactive-sell":"")},u.createElement(Le,{maxLength:19,inputMode:"decimal",type:"text",placeholder:r("orderForm-Collateral-placeholder",{defaultValue:"Collateral"}),autoComplete:"off",...h,...$,value:$.value,onChange:z,inputSize:"sm",className:"p-0 bg-transparent text-body2"}),u.createElement("div",null,a))))},Na=u.memo((({collateralTokens:e=[],getI18n:t,symbol:a,onChainPerpContractAddress:r,predictionConfig:n,predictionPairs:l})=>{const o=(0,u.useMemo)((()=>u.createElement(Ne,{context:ne,collateralTokens:e})),[e]);return u.createElement("div",{className:"relative mb-1"},u.createElement(Ea,{symbol:a,getI18n:t,suffix:o,onChainPerpContractAddress:r,predictionConfig:n,predictionPairs:l}))})),Pa=({tokenName:e,approve:t,getI18n:a,refetch:r,disabled:n,isFetched:s,children:i})=>{const c=(0,pe.h)(),[d,m]=(0,u.useState)(!1),{trigger:g}=(0,p.Gc)(),f=(0,Re.Z)(),h=(0,u.useCallback)((async()=>{try{m(!0);const e=await t();await(0,o.As)({getI18n:a,config:f,hash:e}),await r(),setTimeout((()=>g("amountIn")),0)}catch(e){}finally{m(!1)}}),[t,a,f,r,g]);return u.createElement(G.z,{type:"button",className:"w-full h-10 text-subtitle2",onClick:h,disabled:d||!s||n},i??a("orderForm-button-approve",{defaultValue:"Approve {{token}}",token:(0,l.De)(e,c)}))};var wa=a(94043);const Ia=({getI18n:e,useTokenApprove:t,predictionConfig:a,collateralTokens:r=[],useCurrentProduct:n})=>{const o=(0,u.useRef)(null),{isConnected:s,address:c}=(0,i.m)(),{errors:d}=(0,p.cl)(),{getValues:g,setValue:f}=(0,p.Gc)(),{baseAsset:h}=n(),[b,v,x]=(0,p.qo)({name:["tokenIn","amountIn","tokenInDecimals"]}),y=(({getI18n:e})=>{const{errors:t}=(0,p.cl)(),{isConnected:a}=(0,i.m)(),r=a?(({getI18n:e,errorsInfo:t})=>{const a=[{field:"amountIn",errorType:"required",getButtonProps:()=>({children:e("orderForm-button-OpenPosition","Open Position")})},{field:"price",errorType:"required",getButtonProps:()=>({children:e("orderForm-button-OpenPosition","Open Position")})},{field:"amountIn",errorType:"isInsufficientCollateralBalance",getButtonProps:e=>({children:e?.amountIn?.message})},{field:"amountIn",errorType:"isBelowOrderMaxOI",getButtonProps:e=>({children:e?.amountIn?.message})},{field:"amountIn",errorType:"isLargerThanMinCollateral",getButtonProps:e=>({children:e?.amountIn?.message})}];return a.find((({field:e,errorType:a})=>t?.[e]?.type===a))?.getButtonProps(t)??null})({getI18n:e,errorsInfo:t}):null,n=(0,u.useMemo)((()=>a&&r||{children:u.createElement("div",{className:"flex items-center"},u.createElement(wa.b,{className:"w-5 h-5 mr-2"}),e("orderForm-button-OpenPosition","Open Position"))}),[r,a,e]);return a?n:null})({getI18n:e}),k=r?.find((e=>e.tokenAddress===b))?.name||"",{allowance:C,approve:E,refetch:N,isFetched:P,isPending:w,amount:I}=t(b,"isLessThanAllowance"===d.amountIn?.type?(0,m.f)(g("amountIn")):void 0),L=e=>{f("isLong",e),o.current&&o.current.click()},{symbol:F}=(0,j.m)({address:c,token:b,query:{enabled:Boolean(c)&&s}}),M=(0,pe.h)();return s?C||""===b?""!==b&&(0,Y.v)(`${v}`,x??0)>I?u.createElement(Pa,{disabled:w,isFetched:P,tokenName:k,getI18n:e,approve:E,refetch:N},e("orderForm-button-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:(0,l.De)(F,M)})):a&&!a.predictionBet?u.createElement(G.z,{type:"submit",className:"w-full h-10 text-subtitle2",disabled:!0},e("orderForm-button-marketClosed","Market Closed")):u.createElement("div",{className:"flex flex-row items-center gap-2"},u.createElement(G.z,{className:"hidden",type:"submit",ref:o}),u.createElement(G.z,{className:"w-full h-10 text-subtitle2",type:"button",variant:"buy",onClick:()=>L("true"),...y},`${e("orderForm-long",{defaultValue:"Long"})} ${h}`),u.createElement(G.z,{className:"w-full h-10 text-subtitle2",type:"button",variant:"sell",onClick:()=>L("false"),...y},`${e("orderForm-short",{defaultValue:"Short"})} ${h}`)):u.createElement(Pa,{disabled:w,isFetched:P,tokenName:k,getI18n:e,approve:E,refetch:N}):u.createElement("div",{className:"[&_a]:flex [&_a]:h-10 w-full [&_a]:items-center"},u.createElement(qe.Z,{getI18n:e,size:"md",className:"w-full"}))},La=({getI18n:e,symbol:t,useWebsocketSymbolMarkPrice:a,pricePrecision:r})=>{const[n]=(0,p.qo)({name:["isLong"]}),l=a(t),o=D(n),s=(0,m.f)(l.close??"0"),i=S({isLong:o,orderType:"market",limitPrice:(0,m.f)("0"),marketPrice:s,spread:0n}),{field:c}=(0,p.bc)({name:"entryPrice",shouldUnregister:!0}),d=(0,b.d)(i);return(0,u.useEffect)((()=>{c.onChange(d)}),[d]),u.createElement(Ge,{label:u.createElement(Ze.t,{tip:u.createElement("div",{className:"w-[282px]"},u.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-dumb-entry-price-tips","The current price is for reference only, and the final entry price is the price at the time of confirmation on the chain.")))},u.createElement("span",null,e("orderForm-entryPrice","Entry Price")))},u.createElement("div",{className:"text-t-primary"},(0,ze.uf)((0,b.d)(i),r)," USD"))};var Fa=a(37444),Ma=a(51308);const Ta=({getI18n:e,predictionPairs:t,pairBase:a})=>{const r=Ee(),n=(0,d.x)(),{getValues:o,resetField:s}=(0,p.Gc)(),{field:i}=(0,p.bc)({name:"period"}),{setCurrentPredictionPeriod:c,currentPredictionPeriod:m}=(0,Ma.W)(),[g,f]=(0,u.useState)(),h=(0,u.useMemo)((()=>t?.find((e=>e.base===a))?.predictionPeriods.filter((e=>l.v$.has(e.period))).filter((e=>0===e.status))),[t,a]),b=(0,u.useCallback)((e=>{if(!h)return;const t=h.at(e);t&&(i.onChange(parseInt(`${t.period}`,10)),f(e),r.setExpiration(n,o("pairBase"),e))}),[n,i,o,r,h]);(0,u.useEffect)((()=>{const e=o("period");if(a&&void 0===g&&void 0===e&&h&&h.length>0){const e=Math.min(r.expiration?.[n]?.[a]||0,h.length-1);s("period",{defaultValue:h.at(e)?.period}),f(e)}}),[g,n,a,o,r.expiration,h,s]),(0,u.useEffect)((()=>{m!==i.value&&c(i.value)}),[m,i.value,c]);const v=(0,u.useMemo)((()=>h?.map((e=>({key:e.period,label:l.v$.get(e.period)?.label})))),[h]);return u.createElement(Ge,{className:"pt-0 mt-4",label:u.createElement(Ze.t,{tip:u.createElement("div",{className:"w-[282px]"},u.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-dumb-mode-expiration-tips","This is not the time when you click to open a position, but the 60S countdown from the moment it is confirmed on the chain.")))},u.createElement("span",{className:"text-body2"},e("orderForm-dumb-mode-expiration","Expiration")))},v?u.createElement(Fa.W,{activeIndex:g,className:"flex items-center gap-2",optionClassName:"w-[32px] py-0 h-6 text-t-cation1",options:v,onChange:b}):null)},Ba=({getI18n:e,useAssetPrecision:t,predictionPairs:a})=>{const r=(0,pe.h)(),[n,o,s,i,c]=(0,p.qo)({name:["tokenInName","period","pairBase","amountIn","tokenInDecimals"]}),d=(0,u.useMemo)((()=>a?.find((e=>s===e.base))?.predictionPeriods.find((e=>e.period===parseInt(o,10)))),[o,a,s]),m=(0,u.useMemo)((()=>{if(!i||!d)return null;const e=(0,Y.v)(i,c);return(e-e*BigInt(d.openFeeP)/10n**BigInt(l.cB.percent))*BigInt(1e4)/10n**BigInt(l.cB.percent)}),[i,d,c]),g=t((0,l.De)(n,r))||2;return u.createElement(Ge,{detailClassName:"text-end",label:u.createElement("span",null,e("orderForm-dumb-loss-label","Loss"))},u.createElement("span",{className:"text-t-sell"},i?null:`-${(0,fe.FB)((0,v.b)(10000n,l.cB.percent-2),2)}%`,i&&n?`-${(0,fe.FB)((0,v.b)(m||0n,c),g)} ${n} (-${(0,fe.FB)((0,v.b)(BigInt(1e4),l.cB.percent-2),2)}%) `:null))},Sa=({getI18n:e,predictionPairs:t,useAssetPrecision:a})=>{const r=(0,pe.h)(),[n,o,s,i,c]=(0,p.qo)({name:["tokenInName","period","pairBase","amountIn","tokenInDecimals"]}),d=(0,u.useMemo)((()=>t?.find((e=>s===e.base))?.predictionPeriods.find((e=>e.period===parseInt(o,10)))),[o,t,s]),m=a((0,l.De)(n,r))||2,g=(0,u.useMemo)((()=>{if(!i||!d?.winRatio||!d.winCloseFeeP)return null;const e=(0,Y.v)(i,c);return(e-e*BigInt(d.openFeeP)/10n**BigInt(l.cB.percent))*(BigInt(d.winRatio)-BigInt(d.winCloseFeeP))/10n**BigInt(l.cB.percent)}),[i,d?.winRatio,d?.winCloseFeeP,d?.openFeeP,c]);return u.createElement(Ge,{detailClassName:"text-end",label:u.createElement(Ze.t,{tip:u.createElement("div",{className:"w-[282px]"},u.createElement("span",{className:"whitespace-pre-line text-caption"},e("orderForm-dumb-profit-tip","As a prediction product, if you are right, you will make huge profits, if you are wrong, you will lose all your principal.")))},u.createElement("span",null,e("orderForm-dumb-profit-label","Profit")))},u.createElement("span",{className:"text-t-buy"},!i&&d?.winRatio?`${(0,fe.FB)((0,v.b)(BigInt(d.winRatio-d.winCloseFeeP),l.cB.percent-2),2)}%`:null,i&&n&&d?.winRatio?`+${(0,fe.FB)((0,v.b)(g||0n,c),m)} ${n} (${(0,fe.FB)((0,v.b)(BigInt(d.winRatio-d.winCloseFeeP),l.cB.percent-2),2)}%) `:null))},Va="top-[2px] w-1 h-1 rounded-full bg-t-third",Aa="bg-border-lineStrong dark:bg-t-onColor";function Da({getI18n:e}){const t=(0,pe.h)(),{sliderThumbProps:a,useAssetPrecision:r}=(0,u.useContext)(ne),{setValue:n}=(0,p.Gc)(),[o,i,c,d]=(0,p.qo)({name:["amountIn","indexPrice","tokenInName","tokenIn"]}),g=r((0,l.De)(c,t))||2,f=It(d),h=Number(f??0),v=(0,m.f)(o||"0"),x=(0,m.f)(f||"0"),y=(0,fe.Y0)(Number(f??0),g),k=String(y).replace(/,/g,""),C=o&&Number(f??0)>0?Number(o)>=Number(k)?100:Number(o)/Number(h)*100:0,E=(100===C?x:v)*(0,m.f)(i||"1")/10n**18n,N=wt((0,b.d)(E),2),P=(0,u.useCallback)((e=>{if(e>=100)n("amountIn",k);else if(e<=0)n("amountIn","0");else{const t=Number(h)/100*e,a=Math.floor(t*10**g)/10**g;n("amountIn",String(a))}}),[g,k,h,n]),w=(0,u.useCallback)((([e])=>{P(e)}),[P]),I=(0,u.useCallback)((e=>{P(e)}),[P]),L=(0,u.useMemo)((()=>[{value:0,className:(0,s.cn)(Va,Aa),style:{left:0},onClick:I},{value:25,className:(0,s.cn)(Va,C>25?Aa:""),style:{left:"25%"},onClick:I},{value:50,className:(0,s.cn)(Va,C>50?Aa:""),style:{left:"50%"},onClick:I},{value:75,className:(0,s.cn)(Va,C>75?Aa:""),style:{left:"75%"},onClick:I},{value:100,className:Va,style:{right:0},onClick:I}]),[I,C]),F=(0,u.useCallback)((()=>{n("amountIn",k)}),[k,n]);return u.createElement("div",{className:"relative flex flex-col mb-3 w-full"},u.createElement("div",{className:(0,s.cn)("relative flex items-center w-full h-14 min-h-14 mb-1")},u.createElement(lt,{value:[C],min:0,max:100,onValueChange:w,step:1,thumbProps:{...a,dragNode:u.createElement("div",{className:(0,s.cn)("absolute top-[-20px] right-[-6px] bg-interactive-primary px-0.5 text-caption1 rounded-sm text-t-onColor",C>90?"right-[2px]":"right-[-6px]")},parseInt(`${C}`,10),"%")},marks:L}),u.createElement("div",{className:"absolute flex text-caption1 text-t-primary left-0 top-10 text-t-third"},u.createElement("span",{className:"mr-1"},`${parseInt(`${C}`,10)}%`),u.createElement("span",null,`â $${N}`)),u.createElement("button",{type:"button",className:"absolute flex text-caption1 text-t-primary right-0 top-10",onClick:F},u.createElement("span",{className:"text-t-third mr-1"},e("orderForm-leverage-max","Max")),y)))}const qa=({ee:e,filterTabInfo:t,filterTabItems:a=h.n,getI18n:r,isLight:o,Link:s,locale:m,onChainPerpContractAddress:g,onError:b,onSubmit:v,pairBase:x,predictionConfig:y,predictionPairs:k,pricePrecision:C,siteHost:E,staticHost:N,useActionBtnDisabled:P,useAssetPrecision:w,useChangeSymbol:I,useCurrentProduct:L,useFuturesMarket:F,useFuturesMarketSort:M,useGetCollateralTokens:T,useIsMarketClose:B,useMarketInfo:S,useSymbolConfigInfo:V,useSymbolLogo:A,usePairByBaseConfig:D,useTokenApprove:q,useTrackPopupViewWithWalletAddress:R,useTrackWebClickWithWalletAddress:$,useWebSocketAssetIndex:_,useWebsocketSymbolMarkPrice:z})=>{const{chain:U}=(0,i.m)(),{supportedChains:W}=(0,c.o6)(),O=(0,d.x)(),Q=(0,u.useMemo)((()=>W.find((e=>e.id===O))),[O,W]),H=Ee(),Z=(0,p.cI)({shouldFocusError:!1,defaultValues:{isLong:"true",tokenIn:H.tokenIn[O],pairBase:x,amountIn:"",slippage:1,fee:"",acceptablePrice:""}}),{symbol:G}=L(),j=T(),{tradingMode:K}=(0,n.C)(),Y=(0,u.useMemo)((()=>j?.map((e=>l.KF.has(e.tokenAddress)?{...e,tokenAddress:"",name:U?U.nativeCurrency.symbol:Q?.nativeCurrency.symbol}:e))?.filter((e=>{switch(K){case"classic":case"degen":return e?.asMargin;case"dumb":return e?.asBet;default:return!0}})).filter(Boolean)||[]),[U,Q?.nativeCurrency.symbol,j,K]),J=(0,u.useMemo)((()=>({ee:e,filterTabInfo:t,filterTabItems:a,getI18n:r,isLight:o,siteHost:E,useChangeSymbol:I,useCurrentProduct:L,useFuturesMarketSort:M,useFuturesMarket:F,useMarketInfo:S,useTokenApprove:q,useTrackPopupViewWithWalletAddress:R,useTrackWebClickWithWalletAddress:$,useSymbolConfigInfo:V,useSymbolLogo:A,usePairByBaseConfig:D,useWebsocketSymbolMarkPrice:z,useIsMarketClose:B,useAssetPrecision:w,useActionBtnDisabled:P,locale:m,Link:s,isLeverageLoading:!1})),[e,t,a,r,o,E,I,L,M,F,S,q,R,$,V,A,D,z,B,w,P,m,s]),{handleSubmit:X,reset:ee,setValue:te}=Z,re=(0,u.useCallback)((async e=>{y?.predictionBet&&await v({...e,userHeatMap:f.toObject()},(()=>ee(void 0,{keepDirtyValues:!0,keepValues:!0,keepDefaultValues:!0})))}),[v,y?.predictionBet,ee]);return(0,u.useEffect)((()=>{x&&te("pairBase",x)}),[x,te]),u.createElement(p.RV,{...Z},u.createElement("form",{noValidate:!0,onSubmit:X(re,b)},u.createElement("div",{className:"flex items-center justify-evenly border-b-[0.6px] border-solid border-border-line"},u.createElement(Xe,{getI18n:r,Link:s,locale:m}),u.createElement("div",{className:"border-r-[0.6px] border-solid border-border-line h-6"}),u.createElement(He,{getI18n:r,staticHost:N,Link:s,locale:m})),u.createElement("div",{className:"p-4"},u.createElement("div",{className:"relative mb-4"},u.createElement(ne.Provider,{value:J},u.createElement(Na,{symbol:G,collateralTokens:Y,getI18n:r,onChainPerpContractAddress:g,predictionConfig:y,predictionPairs:k}),u.createElement(Da,{getI18n:r})),u.createElement(Ta,{getI18n:r,predictionPairs:k,pairBase:x})),u.createElement(Ia,{getI18n:r,useTokenApprove:q,collateralTokens:Y,useActionBtnDisabled:P,useCurrentProduct:L,predictionConfig:y}),u.createElement("div",{className:"mt-2"},u.createElement(La,{getI18n:r,symbol:G,useMarketInfo:S,useWebsocketSymbolMarkPrice:z,pricePrecision:C}),u.createElement(Sa,{getI18n:r,predictionPairs:k,useAssetPrecision:w}),u.createElement(Ba,{getI18n:r,predictionPairs:k,useAssetPrecision:w}),u.createElement("div",{className:"hidden"},u.createElement(Vt,{getI18n:r})),u.createElement(et,{useWebSocketAssetIndex:_}),u.createElement(At,{collateralTokens:Y}),u.createElement(ka,{useWebsocketSymbolMarkPrice:z,symbol:G})))),u.createElement("div",{className:"p-4"},u.createElement(ae,{getI18n:r,staticHost:N})))};var Ra=a(87354),$a=a(52030),_a=a(14369),za=a(19469),Ua=a(59712);const Wa=()=>{const{brokerId:e}=Zt.brokerConfig,{isLight:t}=(0,ea.F)(),{symbol:a,products:n}=(0,Yt.GS)(),{getI18n:s,i18n:c}=(0,Xt.V6)(),d=(0,Wt.NL)(),m=(0,Kt.E4)(),{address:p}=(0,i.m)(),g=(0,Kt.fV)(a),f=(0,u.useCallback)((()=>{}),[]),h=(0,na.$)(),{data:b}=(0,_a.R)(),{data:v}=(()=>{const e=(0,ia.E)();return(0,Fe.u)({...e,functionName:"getPredictionConfig"})})(),x=(0,u.useMemo)((()=>b?.find((e=>e.name.replace("/","").toLocaleUpperCase()===a))?.base),[b,a]),y=(0,Re.Z)(),k=(0,Ot.t)(),C=(0,u.useCallback)((async(t,r)=>{if(!p)return;const n=Math.floor(parseFloat(t.acceptablePrice)*10**l.cB.price),i=(0,Y.v)(t.amountIn,Number(t.tokenInDecimals));try{await(0,o.oM)({config:y,publicClient:k,getI18n:s,address:m.address,predictAndBetParams:{predictionPairBase:t.pairBase,isUp:"true"===t.isLong,broker:e,period:t.period,price:BigInt(n),amountIn:i,tokenIn:t.tokenIn},symbol:a,onUserConfirm:()=>r?.()})}catch(e){Ua.error(e),O.A.error(e.shortMessage??e?.reason??e.error??e?.message)}finally{d.invalidateQueries({queryKey:[Ra.ac.DumbPositionList]})}}),[p,e,y,s,m.address,k,d,a]),{dumb:E}=(0,Jt.B)();return(0,r.jsx)(qa,{assetDecimals:h.data,ee:aa.ee,enableDumbMode:E,getI18n:s,isLight:t,locale:c.language,onChainPerpContractAddress:m.address,onError:f,onSubmit:C,pairBase:x,predictionConfig:v,predictionPairs:b,pricePrecision:g,products:n,Link:Ht.G,siteHost:Zt.brokerConfig.staticBaseUrl,staticHost:Zt.brokerConfig.apxStaticBaseUrl,useActionBtnDisabled:Yt.a9,useAssetPrecision:Kt.RK,useChangeSymbol:Kt.d0,useCurrentProduct:Kt.j2,useFuturesMarket:za.n,useFuturesMarketSort:Kt.e,useGetCollateralTokens:da,useGetMaxCollateral:ua,useGetPairMaxTpRatios:ba.r,useIsMarketClose:va.Z,useMarketInfo:pa.c,usePairByBaseConfig:ma.t,useSymbolConfigInfo:Kt.Kn,useSymbolList:ga.S,useSymbolLogo:Kt.sH,useTokenApprove:fa.Z,useTrackPopupViewWithWalletAddress:$a.T,useTrackWebClickWithWalletAddress:$a.f,useWebSocketAssetIndex:Kt.Ms,useWebsocketSymbolMarkPrice:Kt.Le,enableActivityNotice:!0,useCoachmark:ta.KO,guideNoticeKey:Gt.IL})},Oa=()=>{const{isDegenMode:e,isClassicMode:t,isDumbMode:a}=(0,n.C)();return(0,r.jsxs)(r.Fragment,{children:[e||t?(0,r.jsx)(ya,{},"futures"):null,a?(0,r.jsx)(Wa,{},"prediction"):null]})}},19469:(e,t,a)=>{a.d(t,{n:()=>m});var r=a(8429),n=a(52983),l=a(87685),o=a(87250),s=a(85177),i=a(14369),c=a(25254),d=a(86562);const m=()=>{const{data:e=[]}=(0,l.sP)(),t=(0,i.R)(),a=(0,l.j2)(),{updateTime:m,products:u}=(0,s.GS)(),p=(0,s.P2)(u,"desc"),g=(0,n.useMemo)((()=>t.data?.map((e=>e.name.replace(/\//g,"")))),[t.data]),{baseTicker:f}=(0,o.dK)(p),h=(0,d.W)(),b=(0,c.H)(e),v=(0,o.Ae)(f,h,b),x=Date.now();return{validTickers:(0,n.useMemo)((()=>u.filter((e=>(0,r.L)(e.symbolType).isDumb)).filter((e=>g?.includes(e.symbol))).map((e=>{const t=v[e.symbol];return{...e,...t,update:x,symbolType:e.symbolType}}))),[v,g,u,x]),loading:t.isLoading,update:[m],activeSymbol:a}}},1619:(e,t,a)=>{a.d(t,{ee:()=>r});const r=new(a(58407).v)}}]);