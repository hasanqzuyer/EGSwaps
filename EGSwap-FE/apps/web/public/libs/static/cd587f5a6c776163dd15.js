"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[2096],{70326:(e,t,a)=>{a.d(t,{D:()=>A});var n=a(11273),i=a(94043),r=a(58395),s=a(27618),l=a(89339),o=a(33740),c=a(76933),m=a(87514),u=a(28216),d=a(75429),f=a(34395),p=a(9125),h=a(31781),g=a(41822),E=a(38344),x=a(10783),b=a(6939),y=a(17921),N=a(52983),v=a(7061),P=a(38880),w=a(37444),C=a(95386),I=a(42249),O=a(50855),S=a(37672),L=a(14676),k=a(87405);const D=({approve:e,getI18n:t,children:a,refetch:n,disabled:i})=>{const[r,s]=(0,N.useState)(!1),[o,c]=(0,N.useState)(!1),m=(0,L.Z)(),u=!(!r||o)||i,d=(0,N.useCallback)((async()=>{s(!0),c(!1);try{if(e){const a=await e();await(0,k.As)({getI18n:t,hash:a,config:m})}}catch(e){c(!0)}n(),s(!1)}),[n,e,t,m]);return(0,N.useMemo)((()=>N.createElement(l.z,{type:"button",className:"w-full h-full",onClick:d,disabled:u||r},a)),[u,a,d,r])},M=({label:e,value:t,className:a,isError:n=!1})=>(0,N.useMemo)((()=>N.createElement("div",{className:(0,s.cn)("flex flex-col flex-[1]",a)},N.createElement("div",{className:"text-caption text-t-third"},e),N.createElement("div",{className:(0,s.cn)("text-t-primary text-subtitle2",{"text-t-error":n})},t))),[e,a,t,n]),_=[{key:"0.25",label:"25%"},{key:"0.5",label:"50%"},{key:".75",label:"75%"},{key:"1",label:"100%"}],F=({hash:e,onClose:t})=>{const a=(0,I.h)(),{getI18n:n,usePositionAddMargin:o,onChainPerpContractAddress:c}=(0,N.useContext)(O.Z),[S,L]=(0,N.useState)(-1),[k,F]=(0,N.useState)("0"),[A,T]=(0,N.useState)(""),{symbol:B,side:R,marginToken:q,marginQtyPrecision:z,pricePrecision:Z,formatNumber:U,calcMargin:G,calcMarginRatio:K,calcMaxMarginRatio:V,calcInitialMargin:Q,calcMaxMargin:j,calcLiqPrice:H,useTokenApprove:W,useContractAddMargin:$,isLong:J,calcLeverage:X}=o(e),{address:Y,chain:ee}=(0,u.m)(),te=C.KF.has(q)?"":q,{data:ae}=(0,d.d)({address:te||void 0}),{decimals:ne=ee?.nativeCurrency.decimals,symbol:ie=(0,C.De)(ee?.nativeCurrency.symbol)}=ae||{},[re,se]=(0,N.useState)("");(0,f.x)({pollingInterval:3e4,onBlockNumber:e=>{se(e.toString(10))}});const{queryKey:le,formatted:oe}=(0,p.m)({address:Y,token:te,query:{enabled:Boolean(te),gcTime:C.g_}}),ce=(0,h.K)({address:Y,query:{enabled:!te}}),me=(0,g.NL)();(0,N.useEffect)((()=>{re&&me.invalidateQueries({queryKey:te?le:ce.queryKey})}),[re,te,ce.queryKey,me,le]);const{approve:ue}=W(te,(0,E.v)(k,ne??0)),{addMargin:de}=$(),fe=(0,N.useMemo)((()=>te?new y.Z(oe??0).toFixed(z,y.Z.ROUND_DOWN):new y.Z(ce.data?.formatted??0).toFixed(z,y.Z.ROUND_DOWN)),[oe,z,te,ce.data?.formatted]),{data:pe,refetch:he}=(0,x.u)({address:te,abi:b.Wo,functionName:"allowance",args:[Y,c],query:{enabled:Boolean(te)&&Boolean(Y)&&Boolean(c)}}),ge=(0,N.useCallback)((()=>t()),[t]),Ee=(0,N.useCallback)((e=>{F(e||"0"),L(-1)}),[]),xe=(0,N.useCallback)(((e,t)=>{L(e),F(new y.Z(t).multipliedBy(fe).toFixed(z,y.Z.ROUND_DOWN))}),[fe,z]),be=(0,N.useMemo)((()=>new y.Z(fe).isLessThanOrEqualTo(0)||new y.Z(fe).isLessThan(k)?{label:n("userinfo-dialog-margin-insufficient-balance","Insufficient balance"),disabled:!0}:{label:N.createElement("div",{className:"flex items-center"},N.createElement(i.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),N.createElement("span",null,n("userinfo-dialog-margin-button-confirm","Add Margin"))),disabled:new y.Z(k).isLessThanOrEqualTo(0)}),[n,k,fe]),ye=(0,N.useMemo)((()=>Q(k).toString()),[Q,k]),Ne=(0,N.useMemo)((()=>G(k).toString()),[G,k]),ve=(0,N.useMemo)((()=>X(Ne).toNumber()),[X,Ne]),Pe=(0,N.useMemo)((()=>j()),[j]),we=(0,N.useMemo)((()=>K(k).toString()),[K,k]),Ce=(0,N.useMemo)((()=>V()),[V]),Ie=(0,N.useMemo)((()=>Ce.lt(we||0)),[Ce,we]),Oe=(0,N.useMemo)((()=>{const e=H(ye);return e.isNegative()?"-":U(e.toString(),Z)}),[H,ye,U,Z]),Se=a[ie]||ie,Le=(0,N.useCallback)((()=>{de({hash:e,amount:(0,m.r)(k,ne),marginToken:te,closeModalCallBack:ge,symbol:B,decimals:ne,isLong:J,leverage:ve,tokenName:ie})}),[de,ve,ge,e,J,ne,k,ie,te,B]);return(0,N.useMemo)((()=>N.createElement("div",{className:"[&_.add-margin-input_>_div]:!rounded-none"},N.createElement("div",{className:"flex items-center sm:hidden mb-[16px]"},N.createElement("div",{className:"flex-[1] text-t-primary text-subtitle1 text-center"},n("userinfo-dialog-margin-add-margin","Add Margin")),N.createElement(r.E,{onClick:ge,className:"w-5 h-5 text-[20px] text-t-third cursor-pointer absolute right-4"})),N.createElement("div",{className:"flex flex-col"},N.createElement("div",{className:"flex flex-row items-center justify-between"},N.createElement("div",{className:"text-t-primary text-subtitle2"},B," ",R),N.createElement(r.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-[16px] hidden sm:flex",onClick:ge})),N.createElement("div",{className:"flex justify-between my-[16px]"},N.createElement(M,{className:"text-left",isError:Ie,label:n("userinfo-positions-column-marginRatio","Margin ratio"),value:(0,v.e9)(we,{decimals:2})}),N.createElement(M,{className:"text-left",label:n("userinfo-positions-column-margin","Margin"),value:`${U(Ne,z)} ${Se}`}),N.createElement(M,{className:"text-right",label:n("userinfo-positions-column-liquidPriceV2","Liq. Price"),value:Oe})),N.createElement("div",{className:"rounded p-4 flex mb-4 flex-col bg-interactive-interactive01 order-form-card"},N.createElement("div",{className:"flex flex-row justify-between mb-2"},N.createElement("div",{className:"text-t-primary text-subtitle2"},n("userinfo-dialog-margin-add-margin","Add Margin")),N.createElement("div",{className:"text-t-secondary text-caption"},n("userinfo-dialog-margin-user-avail",{defaultValue:"Available : {{available}} {{margin}}",available:fe,margin:Se}))),N.createElement(P.Q,{className:`add-margin-input h-[40px] mt-[4px] rounded-0 ${A?"border-interactive-primary":"!border-t-third"} border-t-0 border-x-0 [&>input]:text-left`,precision:z,maxLength:19,boxProps:{className:(0,s.cn)("flex pb-0.5 rounded-none border-x-0 border-t-0 border-b border-t-third w-full h-10 [&_input]:text-left [&_input]:px-0 [&_.bn-input-suffix]:!mr-0",{"border-t-error":Ie})},value:k,onChange:Ee,onFocus:()=>T("focus"),onBlur:()=>T(""),suffix:N.createElement("div",{className:"text-body2 text-t-primary"},Se)})),N.createElement(w.W,{activeIndex:S,options:_,onChange:xe}),Ie&&N.createElement("p",{className:"text-t-error text-caption mt-4"},n("userinfo-dialog-margin-maximum-margin-ratio-warn",{defaultValue:"the maximum Margin ratio for {{symbol}} is {{maxMarginRatio}} , so it is recommended to input an additional margin below {{maxMargin}} {{marginSymbol}}.",maxMarginRatio:(0,v.e9)(Ce.toString(),{decimals:2}),symbol:B,maxMargin:U(Pe.toString(),z,{roundMode:1}),marginSymbol:Se})),N.createElement("div",{className:"flex mt-8 h-10"},te&&pe&&!new y.Z((0,m.r)(k,ne)).isLessThanOrEqualTo(pe.toString())&&new y.Z(k).isLessThanOrEqualTo(fe)?N.createElement(D,{approve:ue,getI18n:n,refetch:he},n("userinfo-dialog-margin-increase-authorized-amount",{defaultValue:"Increase {{symbol}} authorization amount",symbol:Se})):N.createElement(l.z,{className:"w-full text-subtitle2",disabled:be.disabled||Ie,onClick:Le},be.label))))),[n,ge,B,R,U,we,Ne,z,Se,Oe,fe,A,Ce,k,Ee,S,xe,te,pe,ne,ue,he,be.disabled,be.label,Le,Ie,Pe])},A=()=>{const[e,t]=(0,N.useState)(""),{isMobile:a}=(0,n.F)(),i=(0,N.useCallback)((()=>{t("")}),[]);return(0,N.useEffect)((()=>S.ee.on("MODAL_ADD_MARGIN_OPEN",(({hash:e})=>{t(e)}))),[]),(0,N.useEffect)((()=>S.ee.on("MODAL_ADD_MARGIN_CLOSE",(()=>{t("")}))),[]),(0,N.useMemo)((()=>e?a?N.createElement(o.yo,{open:!0},N.createElement(o.ue,{side:"bottom",className:"w-full border-none p-4 pb-6 rounded-t-[4px] bg-interactive-interactiveBg",onPointerDownOutside:i},N.createElement(F,{hash:e,onClose:i}))):N.createElement(c.Vq,{open:!0},N.createElement(c.PK,null,N.createElement(c.cZ,{className:"w-full sm:w-[320px] p-4 min-h-[384px] sm:min-h-[332px]",onPointerDownOutside:i},N.createElement(F,{hash:e,onClose:i})))):null),[e,a,i])}},80291:(e,t,a)=>{a.d(t,{n:()=>c});var n=a(76933),i=a(52983);const r=e=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"icon-warn css-aenbdp",viewBox:"0 0 96 96",...e},i.createElement("g",{filter:"url(#a)"},i.createElement("rect",{width:"65",height:"65",x:"8",y:"9",fill:"url(#b)",rx:"10"})),i.createElement("g",{filter:"url(#c)"},i.createElement("rect",{width:"58",height:"58",x:"30",y:"31",fill:"#F1F8FF",fillOpacity:".5",rx:"8"})),i.createElement("g",{filter:"url(#d)"},i.createElement("rect",{width:"38",height:"38",x:"40",y:"41",fill:"#fff",rx:"19"})),i.createElement("g",{filter:"url(#e)"},i.createElement("path",{fill:"#F0B90B",fillRule:"evenodd",d:"M62 51c0-1.105-1-3-3-3s-3 1.895-3 3l1 13a2 2 0 1 0 4 0l1-13zm-3 21a2 2 0 1 0 0-4 2 2 0 0 0 0 4z",clipRule:"evenodd"})),i.createElement("defs",null,i.createElement("filter",{id:"a",width:"66",height:"66",x:"8",y:"9",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"1",dy:"1"}),i.createElement("feGaussianBlur",{stdDeviation:"1"}),i.createElement("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.45 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),i.createElement("filter",{id:"c",width:"59",height:"59",x:"30",y:"31",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"1",dy:"1"}),i.createElement("feGaussianBlur",{stdDeviation:"1"}),i.createElement("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.45 0"}),i.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),i.createElement("filter",{id:"d",width:"50",height:"50",x:"36",y:"37",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"2",dy:"2"}),i.createElement("feGaussianBlur",{stdDeviation:"3"}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 0.941667 0 0 0 0 0.797749 0 0 0 0 0.427674 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"1",dy:"1"}),i.createElement("feGaussianBlur",{stdDeviation:".5"}),i.createElement("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.3 0"}),i.createElement("feBlend",{in2:"shape",result:"effect2_innerShadow"})),i.createElement("filter",{id:"e",width:"14",height:"32",x:"54",y:"46",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",{dx:"2",dy:"2"}),i.createElement("feGaussianBlur",{stdDeviation:"2"}),i.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),i.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 0.811167 0 0 0 0 0.141667 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})),i.createElement("linearGradient",{id:"b",x1:"13.417",x2:"60.591",y1:"9",y2:"74",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#FFD37E"}),i.createElement("stop",{offset:"1",stopColor:"#F0B90B"}))));var s=a(89339),l=a(50855),o=a(37672);const c=()=>{const{getI18n:e,usePositions:t}=(0,i.useContext)(l.Z),a=t(),[c,m]=(0,i.useState)(!1),u=(0,i.useCallback)((()=>{m(!1)}),[]),d=(0,i.useCallback)((()=>m(!0)),[]),f=(0,i.useCallback)((()=>{o.ee.emit("POSITION_ALL_CLOSE",void 0),u()}),[u]);return(0,i.useEffect)((()=>(o.ee.on("MODAL_CLOSE_ALL_POSITION",d),o.ee.on("MODAL_CLOSE_ALL_POSITION_CLOSE",u),()=>{o.ee.off("MODAL_CLOSE_ALL_POSITION",d),o.ee.off("MODAL_CLOSE_ALL_POSITION_CLOSE",u)})),[u,d]),i.createElement(n.Vq,{open:c},i.createElement(n.PK,null,i.createElement(n.cZ,{className:"!w-[298px] !min-h-[280px] p-6",onPointerDownOutside:u},i.createElement("div",{className:"flex flex-col"},i.createElement("div",{className:"flex w-full justify-center items-center mb-4"},i.createElement(r,{width:60,height:60})),i.createElement("div",{className:"flex w-full justify-center items-center mb-2"},i.createElement("div",{className:"text-subtitle1 text-t-primary"},e("userinfo-positions-close-all-position-title",{defaultValue:"Closing all positions"}))),i.createElement("div",{className:"flex w-full justify-center items-center mb-6"},i.createElement("div",{className:"text-body2 text-t-third text-center"},e("userinfo-positions-close-all-position-desc-v2",{defaultValue:"Closing all positions will cancel all open orders. And the current {{number}} positions will be filled with market orders.",number:a.length}))),i.createElement("div",{className:"flex w-full justify-between items-center"},i.createElement(s.z,{className:"text-subtitle2 flex-[1] j-10 !mr-3",onClick:u,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),i.createElement(s.z,{className:"text-subtitle2 flex-[1] h-10",onClick:f},i.createElement("div",{className:"flex items-center"},e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"}))))))))}},48837:(e,t,a)=>{a.d(t,{t:()=>x});var n=a(8429),i=a(76933),r=a(89663),s=a(58905),l=a(52983),o=a(24757),c=a(50855),m=a(37672),u=a(89339),d=a(94043);const f=l.forwardRef((({getI18n:e,onClose:t,onSubmit:a,showMinTp:n,minTp:r},s)=>l.createElement(i.cZ,{className:"!w-[298px] !min-h-[186px]",onPointerDownOutside:t,ref:s},l.createElement("div",{className:"flex flex-col"},l.createElement("div",{className:"flex w-full justify-between h-[38px] items-center"},l.createElement("div",{className:"text-t-primary text-subtitle1"},e("userinfo-positions-close-position-title",{defaultValue:"Close Position"})),l.createElement(i.GG,{onClick:t,className:"[&_svg]:w-5 [&_svg]:h-5 [&_svg]:text-[20px]"})),l.createElement("div",{className:"flex-1 pt-4 pb-10"},n?l.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-pnl-loss-close-patch1",{defaultValue:"When ROI is less than {rate}%, there may be a loss after closing the position due to close position fees.",rate:r})):null,l.createElement("div",{className:"text-body2 text-t-primary"},e("userinfo-positions-close-position-desc",{defaultValue:"Are you sure to close your position?"}))),l.createElement("div",{className:"flex w-full justify-between items-center"},l.createElement(u.z,{className:"text-subtitle2 flex-[1] j-10 !mr-2",onClick:t,variant:"secondary"},e("userinfo-positions-close-position-cancel",{defaultValue:"Cancel"})),l.createElement(u.z,{className:"text-subtitle2 flex-[1] h-10",onClick:a},l.createElement("div",{className:"flex items-center"},l.createElement(d.b,{className:"mr-2",width:"20px",height:"20px",fontSize:"20px"}),l.createElement("span",null,e("userinfo-positions-close-position-confirm",{defaultValue:"Confirm"})))))))));var p,h=a(372),g=a(95386);!function(e){e[e.FIXED=0]="FIXED",e[e.ONE_PERCENT_DEPTH=1]="ONE_PERCENT_DEPTH",e[e.NET_POSITION=2]="NET_POSITION",e[e.DEGEN=3]="DEGEN"}(p||(p={}));const E=({getI18n:e,onClose:t,onSubmit:a,markPrice:n,closePrice:r,ROIColor:s,ROI:o,spread:c})=>l.createElement(i.cZ,{className:"w-full max-w-[360px] p-6",onEscapeKeyDown:()=>t(),onPointerDownOutside:()=>t()},l.createElement("h2",{className:"text-headline3 text-t-primary mb-3 text-center"},e("orderForm-high-spread-confirm-dialog-title","High Spread Notice")),l.createElement("p",{className:"text-caption1 mb-2 text-center text-t-third"},e("orderForm-high-spread-confirm-dialog-desc","This trade may result in significant price impact due to a substantial disparity in open interest between long and short positions.Please be aware.")),l.createElement("div",{className:"flex flex-row justify-between py-1"},l.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-mark-price","Mark price")),l.createElement("div",{className:"text-subtitle2 text-t-primary"},n)),l.createElement("div",{className:"flex flex-row justify-between py-1"},l.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-est-close-price","Est. Close price")),l.createElement("div",{className:"text-subtitle2 text-t-primary"},r)),l.createElement("div",{className:"flex flex-row justify-between py-1"},l.createElement("div",{className:"text-body2 text-t-secondary"},e("orderForm-high-spread-confirm-est-roi","Est. ROI")),l.createElement("div",{className:`text-subtitle2 ${s}`},o)),l.createElement("div",{className:"flex flex-row justify-between py-1"},l.createElement("div",{className:"text-body2 text-t-secondary"},e(" orderForm-high-spread-confirm-price-spread","Price spread")),l.createElement("div",{className:"text-subtitle2 text-t-sell"},c)),l.createElement(u.z,{type:"button",onClick:a,className:"block w-full mt-6"},e("orderForm-high-spread-confirm-close-button","Continue to close"))),x=()=>{const{getI18n:e,useColumnSymbol:t,useColumnPNL:a,useLeverage:u,usePositionDetail:d,useSpread:x}=(0,l.useContext)(c.Z),[b,y]=(0,l.useState)(""),{symbolType:N,symbol:v,isLong:P}=t(b),{ROIInNumber:w,isROINegative:C}=a(b),I=u(b),{min:O}=(0,o.Fe)(I),{isDegenMode:S}=(0,n.L)(N),{usePositionDetailPricePrecision:L}=d(),k=L(v),{entryPrice:D,marketPrice:M,qty:_,margin:F,longQty:A,shortQty:T,fundingFee:B,holdingFee:R,slippageConfig:q}=x(b),z=(({marketPrice:e,qty:t})=>e*t/10n**BigInt(g.cB.qty))({marketPrice:M,qty:_}),Z=(({isLong:e,size:t,longQty:a,shortQty:n,slippageConfig:i,marketPrice:r})=>{if(0n===t)return 0n;if(i?.slippageType===p.FIXED)return(0,h.f)(`${e?i?.slippageLongP:i?.slippageShortP}`)/10n**4n;const l=(({longQty:e,marketPrice:t})=>e*t)({longQty:a*10n**8n,marketPrice:r})/10n**18n,o=(({shortQty:e,marketPrice:t})=>e*t)({shortQty:n*10n**8n,marketPrice:r})/10n**18n;if(i?.slippageType===p.ONE_PERCENT_DEPTH){if(!t||!a)return 0n;if(0n===i.onePercentDepthAboveUsd)return 0n;const n=(e?(o+t)/i.onePercentDepthBelowUsd:(l+t)/i.onePercentDepthAboveUsd)*10n**18n;return(0,h.f)(""+Math.ceil(1e4*Number((0,s.d)(n)))/1e4)}if(i?.slippageType===p.NET_POSITION){if(!t||!a)return 0n;const n=e?i.onePercentDepthBelowUsd:i.onePercentDepthAboveUsd,r=BigInt(e?i?.slippageShortP:i?.slippageLongP)*10n**(18n-4n),s=(e?t-l+o:t-o+l)*10n**18n/n;return s>r?s:r}if(i?.slippageType===p.DEGEN){if(!t||!a)return 0n;const n=e?i.onePercentDepthBelowUsd:i.onePercentDepthAboveUsd,r=(0,h.f)("10000000000000000000000"),s=(e?t+o-r:t+l-r)*10n**18n/n;return s>0n?s:0n}return BigInt(0)})({isLong:P,size:z,longQty:A,shortQty:T,slippageConfig:q,marketPrice:M}),U=(({isLong:e,marketPrice:t,spread:a})=>e?t*(10n**18n-a)/10n**18n:t*(10n**18n+a)/10n**18n)({isLong:P,marketPrice:M,spread:Z}),G=(({qty:e,entryPrice:t,closePrice:a,isLong:n,fundingFee:i,holdingFee:r})=>{if(0n===a)return 0n;const s=i-r;return n?(a-t)*e/10n**BigInt(g.cB.qty)+s:(t-a)*e/10n**BigInt(g.cB.qty)+s})({isLong:P,qty:_,entryPrice:D,closePrice:U,fundingFee:B,holdingFee:R}),K=(({pnl:e,margin:t})=>0n===e||0n===t?0n:e/t)({pnl:G,margin:F}),V=0n===M?"-":(0,r.uf)((0,s.d)(M),k),Q=0n===U?"-":(0,r.uf)((0,s.d)(U),k),j=0n===K?"-":`${(0,r.uf)((0,s.d)(100n*K),2)}%`,H=`${(0,r.uf)((0,s.d)(100n*Z),2)}%`,W=(({size:e,pnl:t,margin:a})=>{if(0n===a)return 0n;const n=e*(0,h.f)("4")/10n**18n/10n**18n,i=a*10n**18n+t/10n**18n;return 0n!==i&&0n!==n?i/n:0n})({size:z,margin:F,pnl:G}),$=(0,l.useCallback)((()=>{y("")}),[]),J=(0,l.useCallback)((({hash:e})=>{y(e)}),[]),X=(0,l.useCallback)((()=>{m.ee.emit("POSITION_CLOSE",{hash:b,symbol:v,isLong:P,leverage:I}),$()}),[b,P,I,$,v]);return(0,l.useEffect)((()=>(m.ee.on("MODAL_CLOSE_POSITION",J),m.ee.on("MODAL_CLOSE_POSITION_CLOSE",$),()=>{m.ee.off("MODAL_CLOSE_POSITION",J),m.ee.off("MODAL_CLOSE_POSITION_CLOSE",$)})),[$,J]),l.createElement(i.Vq,{open:Boolean(b)},l.createElement(i.PK,null,b?0n!==W&&Z>=W?l.createElement(E,{getI18n:e,onClose:$,onSubmit:X,markPrice:V,closePrice:Q,ROIColor:0n===K?"text-t-primary":K>0?"text-t-buy":"text-t-sell",ROI:j,spread:H}):l.createElement(f,{getI18n:e,onClose:$,onSubmit:X,showMinTp:S&&!C&&w<O,minTp:O}):null))}},66099:(e,t,a)=>{a.d(t,{F:()=>k});var n=a(11273),i=a(58395),r=a(5837),s=a(33740),l=a(76933),o=a(17921),c=a(52983),m=a(49506),u=a(49382),d=a(26997);const f=({hash:e,onClose:t})=>{const{getI18n:a,usePositionDetail:n}=(0,c.useContext)(d.C),{usePositionDetailSymbol:r}=n(),{symbol:s,isLong:l,symbolName:o}=r(e);return(0,c.useMemo)((()=>c.createElement("div",{className:"items-center flex justify-between mb-4"},c.createElement("div",{className:"text-subtitle1 text-t-primary font-[500]"},o||s," ",l?a("orderForm-long","Long"):a("orderForm-short","Short")),c.createElement(i.E,{width:"20px",height:"20px",fontSize:"20px",className:"text-t-third cursor-pointer absolute right-4",onClick:t}))),[a,l,t,s,o])},p=({hash:e})=>{const{getI18n:t,usePositionDetail:a,staticHost:n}=(0,c.useContext)(d.C),{usePositionDetailLeverage:i,usePositionDetailPNLROI:r,usePositionDetailSymbol:s}=a(),{isPNLNegative:l,isPNLPositive:o}=r(e),{symbolType:f}=s(e),p=i(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-leverage","Leverage")},c.createElement("div",{className:"flex items-center gap-[2px]"},p,c.createElement(u.b,{isPNLNegative:l,isPNLPositive:o,staticHost:n,symbolType:f})))},h=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailInitialMargin:n}=a(),i=n(e),r=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips01","Initial Margin is the margin initially allocated to this position.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-initialMargin-tips02","Initial Margin = Principal - Open Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-initialMargin","Initial Margin"),tips:r,showLabelSx:!0},i)},g=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailQtyAndSize:n,usePositionDetailPair:i}=a(),{baseAsset:r}=i(e),{size:s,qty:l}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-qty","QTY(Size)")},l," ",r," ( â‰ˆ ",s," USD )")},E=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailEntryPrice:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-entryPrice","Entry Price")},i," USD")},x=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailLiquidPrice:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-estLiquidPrice","Est. Liquid Price")},i," USD")},b=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailLiqLostRate:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-liquidLostRate","Liquid Lost Rate")},`${new o.Z(i).multipliedBy(100).toFixed(2)}%`)},y=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailFundingFee:n}=a(),{fundingFee:i,isFundingFeeNegative:r}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-accFundingFee","Acc. Funding Fee")},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},i))},N=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailPNLROI:n}=a(),{PNL:i,isPNLNegative:r}=n(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips01","Unrealized PNL only calculates the profit and loss generated after the position is successfully opened.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips02","Long : Unrealized PNL = (Mark Price - Entry Price) * Qty + Funding Fee")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedPnl-tips03","Short : Unrealized PNL = (Entry Price - Mark Price ) * Qty + Funding Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-unrealizedPnl","Unrealized PNL"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},i))},v=({hash:e})=>{const{getI18n:t,usePositionDetail:a,enableShare:n,ee:i}=(0,c.useContext)(d.C),{usePositionDetailPNLROI:s}=a(),{ROI:l,isROINegative:o}=s(e),u=(0,c.useCallback)((()=>i.emit("MODAL_POSITION_SHARE_OPEN",{hash:e,overlay:!0})),[i,e]),f=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-unrealizedROI-tips01","Unrealized ROI = Unrealized PNL / Initial margin * 100%")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-unrealizedROI","Unrealized ROI"),tips:f,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:o?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},l),n&&c.createElement("div",null,c.createElement(r.f,{className:"relative ml-0.5 cursor-pointer text-t-third",width:"16px",height:"16px",fontSize:"16px",onClick:u})))},P=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailOpenFee:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-openFee","Open Fee")},i)},w=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailExecutionFee:n}=a(),i=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-executionFee","Execution Fee")},i)},C=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailNetProfit:n}=a(),{netProfit:i,isNetProfitNegative:r}=n(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips01","Net Profit is the profit and loss obtained after taking into account the trader's principal and trading fees.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3",color:"t.white"},t("userinfo-dialog-detail-position-netProfit-tips02-v2","Net Profit = Realized PNL - Open Fee - Execution Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-netProfit","Net Profit"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},i))},I=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailDuration:n}=a(),{time:i}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-time","Time")},i)},O=({hash:e})=>{const{getI18n:t,usePositionDetail:a}=(0,c.useContext)(d.C),{usePositionDetailDuration:n}=a(),{duration:i}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-duration","Duration")},i)},S=({hash:e})=>c.createElement("div",{className:"flex gap-6 flex-col sm:flex-row max-h-[80vh] sm:max-h-[unset] overflow-auto sm:overflow-hidden"},c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4"},c.createElement(p,{hash:e}),c.createElement(h,{hash:e}),c.createElement(g,{hash:e}),c.createElement(E,{hash:e}),c.createElement(x,{hash:e}),c.createElement(b,{hash:e}),c.createElement(y,{hash:e}),c.createElement(N,{hash:e}),c.createElement(v,{hash:e})),c.createElement("div",{className:"flex flex-col w-full sm:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-4 h-[max-content]"},c.createElement(P,{hash:e}),c.createElement(w,{hash:e}),c.createElement(C,{hash:e}),c.createElement("div",{className:"border-b-border-line border-b border-solid"}),c.createElement(I,{hash:e}),c.createElement(O,{hash:e}))),L=({hash:e,onClose:t})=>(0,c.useMemo)((()=>c.createElement(c.Fragment,null,c.createElement(f,{hash:e,onClose:t}),c.createElement(S,{hash:e}))),[e,t]),k=()=>{const[e,t]=(0,c.useState)(""),{ee:a,usePositionDetail:i}=(0,c.useContext)(d.C),{onPositionDetailOpen:r,useIsDegenMode:o}=i(),m=o(),{isMobile:u}=(0,n.F)(),f=(0,c.useCallback)((()=>{t("")}),[]),p=(0,c.useCallback)((({hash:e})=>{r?.(m(e)),t(e)}),[m,r]);return(0,c.useEffect)((()=>(a.on("MODAL_POSITION_DETAIL_CLOSE",f),a.on("MODAL_POSITION_DETAIL_OPEN",p),()=>{a.off("MODAL_POSITION_DETAIL_CLOSE",f),a.off("MODAL_POSITION_DETAIL_OPEN",p)})),[a,f,p]),u?c.createElement(s.yo,{open:Boolean(e)},c.createElement(s.ue,{side:"bottom",className:"w-full border-none px-4 py-6 bg-interactive-interactiveBg",onPointerDownOutside:f},c.createElement(L,{hash:e,onClose:f}))):c.createElement(l.Vq,{open:Boolean(e)},c.createElement(l.PK,null,c.createElement(l.cZ,{className:"w-full sm:w-[750px] sm:min-w-[750px] p-4 sm:min-h-[332px]",onPointerDownOutside:f},c.createElement(L,{hash:e,onClose:f}))))}},26130:(e,t,a)=>{a.d(t,{m:()=>N});var n=a(11273),i=a(96336),r=a(57255),s=a(89663),l=a(76126),o=a(47231),c=a(28216),m=a(98995),u=a(84542),d=a(52983),f=a(82210),p=a(86364),h=a(62998),g=a(61239),E=a(26997),x=a(59712);const b={markPrice:"-",ROI:"-",PNL:"-"},y=({hash:e,checked:t,onClose:a,snapshotRef:r,onCheckedChange:l,copy:o,download:m})=>{const[u,h]=(0,d.useState)(b),{locale:x,getI18n:y,useMarkPrice:N,usePositionDetail:v,useTheme:P,staticHost:w,siteHost:C}=(0,d.useContext)(E.C),{usePositionDetailSymbol:I,usePositionDetailLeverage:O,usePositionDetailPNLROI:S,usePositionDetailEntryPrice:L,usePositionDetailPricePrecision:k}=v(),{isLight:D}=P(),{PNLFormatted:M,ROI:_,marginSymbol:F}=S(e),{symbol:A,isLong:T}=I(e),B=N(A),R=O(e),q=L(e),z=k(A),{address:Z}=(0,c.m)(),{isMobile:U}=(0,n.F)(),G=(0,g.e)({staticHost:w});return(0,d.useEffect)((()=>{void 0!==B&&u.markPrice===b.markPrice&&h({markPrice:B,ROI:_,PNL:M})}),[M,_,B]),d.createElement("div",{className:"flex flex-col"},a&&d.createElement(i.M,{width:"24px",height:"24px",fontSize:"24px",className:"text-t-third cursor-pointer absolute top-[8px] right-[8px] z-[1]",onClick:a}),d.createElement(f.L,{data:{hash:e,locale:x||"en",symbol:A,tokenInSymbol:F,closeTime:0,side:T?"LONG":"SHORT",leverage:R,markPrice:Number(u.markPrice)>0?(0,s.uf)(u.markPrice,z):"-",entryPrice:q,closePrice:"-",PNL:u.PNL,ROI:u.ROI,isLightTheme:D,staticResource:G,SITE_HOST:C,userAddress:Z,getI18n:y,sharePNL:t,snapshotRef:r}}),!U&&d.createElement(d.Fragment,null,d.createElement(p.k,{className:"pt-[12px] pb-[24px]",getI18n:y,checked:t,onCheckedChange:l}),d.createElement(p.n,{getI18n:y,copy:o,download:m})))},N=()=>{const e=(0,m.x)(),t=(0,u.pT)(e),{ee:a,getI18n:i,locale:s}=(0,d.useContext)(E.C),[c,f]=(0,d.useState)(""),[p,b]=(0,d.useState)(!1),[N,v]=(0,d.useState)(!1),{isMobile:P}=(0,n.F)(),w=(0,d.useRef)(),C=(0,d.useMemo)((()=>(0,g.O)({network:t?.apiNetwork,locale:s,hash:c,sharePNL:N})),[t?.apiNetwork,s,c,N]),I=(0,d.useCallback)((async()=>{try{await(0,l.v)(C),P||r.A.success(i("share-copy-message","Copy Successfully"))}catch(e){x.error(e)}}),[i,P,C]),O=(0,d.useCallback)((async()=>{w.current&&(0,o.Q)({el:w.current,success(e){(0,o.L)(e,`share-position-${Date.now()}`)}})}),[]),S=(0,d.useCallback)((e=>{"boolean"==typeof e&&v(e)}),[]),L=(0,d.useCallback)((()=>{f("")}),[]);return(0,d.useEffect)((()=>a.on("MODAL_POSITION_SHARE_OPEN",(({hash:e,overlay:t})=>{f(e),b(t)}))),[a]),(0,d.useEffect)((()=>a.on("MODAL_POSITION_SHARE_CLOSE",(()=>{f(""),b(!1)}))),[a]),(0,d.useMemo)((()=>c?P?d.createElement(h.V,{hash:c,onClose:L,getI18n:i,checked:N,onCheckedChange:S,copy:I,download:O},d.createElement(y,{hash:c,checked:N,snapshotRef:w})):d.createElement(h.t,{onClose:L,overlay:p},d.createElement(y,{hash:c,checked:N,onClose:L,onCheckedChange:S,copy:I,download:O,snapshotRef:w})):null),[I,O,i,c,P,S,L,p,N])}},26997:(e,t,a)=>{a.d(t,{C:()=>n});const n=a(52983).createContext({})},50855:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a(52983).createContext({})},37672:(e,t,a)=>{a.d(t,{ee:()=>n});const n=new(a(13565).v)},7061:(e,t,a)=>{a.d(t,{FB:()=>m,Y0:()=>c,e9:()=>o});var n=a(89663),i=a(17921);const r=2,s="-%",l=1,o=(e,t)=>{let a=new i.Z(e);const{positiveSign:n=!1,decimals:o=r,customNaNDisplay:c=s,allowNegative:m=!0,rm:u=l}=t||{};if(a.isNaN())return c;m||(a=a.abs());const d=a.shiftedBy(2).dp(o,u).toFormat({suffix:"%",decimalSeparator:"."}).toString();return n?`+${d}`:d},c=(e,t,a=3)=>(0,n.yd)(e,t).replace((0,n.rv)(t,a),"$&,"),m=(e,t,a=3)=>c(e,t,a).replace(/\.?[0,]+$/,"")},9125:(e,t,a)=>{a.d(t,{m:()=>l});var n=a(52983),i=a(6939),r=a(94300),s=a(55544);const l=e=>{const{data:t,isLoading:a,refetch:l,isError:o,queryKey:c}=(0,r.N)({allowFailure:!1,contracts:[{address:e.token,abi:i.Wo,functionName:"balanceOf",args:[e.address],chainId:e.chainId},{address:e.token,abi:i.Wo,functionName:"decimals",chainId:e.chainId},{address:e.token,abi:i.Wo,functionName:"symbol",chainId:e.chainId}],scopeKey:e.scopeKey,query:e.query}),[m,u,d]=t||[];return(0,n.useMemo)((()=>({data:m,decimals:u,symbol:d,formatted:(0,s.b)(m??0n,u??0),isLoading:a,refetch:l,isError:o,queryKey:c})),[m,u,d,a,l,o,c])}},83130:(e,t,a)=>{a.d(t,{o:()=>i});var n=a(52983);const i=e=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",...e},n.createElement("path",{d:"M12 6a1 1 0 00-1 1v4H7a1 1 0 100 2h4v4a1 1 0 102 0v-4h4a1 1 0 100-2h-4V7a1 1 0 00-1-1z"}),n.createElement("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10 10-4.477 10-10zm-2 0a8 8 0 10-16 0 8 8 0 0016 0z",clipRule:"evenodd"}))},68848:(e,t,a)=>{a.d(t,{W:()=>i});var n=a(15220);function i(e){return"number"==typeof e?e:"wei"===e?0:Math.abs(n.Bd[e])}},31781:(e,t,a)=>{a.d(t,{K:()=>E});var n=a(25086),i=a(72361),r=a(73693),s=a(55544),l=a(25158),o=a(48386),c=a(68848),m=a(21434);async function u(e,t){const{balanceAddress:a,chainId:n,symbolType:i,tokenAddress:r,unit:l}=t,o={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:i}]}],address:r},[u,d,f]=await(0,m.J)(e,{allowFailure:!1,contracts:[{...o,functionName:"balanceOf",args:[a],chainId:n},{...o,functionName:"decimals",chainId:n},{...o,functionName:"symbol",chainId:n}]});return{decimals:d,formatted:(0,s.b)(u??"0",(0,c.W)(l??d)),symbol:f,value:u}}var d=a(75902);function f(e={}){return["balance",(0,d.OP)(e)]}var p=a(37837),h=a(98995),g=a(14676);function E(e={}){const{address:t,query:a={}}=e,m=(0,g.Z)(e),d=(0,h.x)({config:m}),E=function(e,t={}){return{async queryFn({queryKey:t}){const{address:a,scopeKey:m,...d}=t[1];if(!a)throw new Error("address is required");const f=await async function(e,t){const{address:a,blockNumber:m,blockTag:d,chainId:f,token:p,unit:h="ether"}=t;if(p)try{return u(e,{balanceAddress:a,chainId:f,symbolType:"string",tokenAddress:p})}catch(t){if(t instanceof n.uq){const t=await u(e,{balanceAddress:a,chainId:f,symbolType:"bytes32",tokenAddress:p}),n=(0,i.rR)((0,r.f)(t.symbol,{dir:"right"}));return{...t,symbol:n}}throw t}const g=e.getClient({chainId:f}),E=(0,o.s)(g,l.s,"getBalance"),x=await E(m?{address:a,blockNumber:m}:{address:a,blockTag:d}),b=e.chains.find((e=>e.id===f))??g.chain;return{decimals:b.nativeCurrency.decimals,formatted:(0,s.b)(x,(0,c.W)(h)),symbol:b.nativeCurrency.symbol,value:x}}(e,{...d,address:a});return f??null},queryKey:f(t)}}(m,{...e,chainId:e.chainId??d}),x=Boolean(t&&(a.enabled??!0));return(0,p.aM)({...a,...E,enabled:x})}},75429:(e,t,a)=>{a.d(t,{d:()=>p});var n=a(25086),i=a(55544),r=a(72361),s=a(73693),l=a(68848),o=a(21434),c=a(75902);function m(e={}){return["token",(0,c.OP)(e)]}var u=a(37837),d=a(98995),f=a(14676);function p(e={}){const{address:t,query:a={}}=e,c=(0,f.Z)(e),p=(0,d.x)({config:c}),h=function(e,t={}){return{async queryFn({queryKey:t}){const{address:a,scopeKey:c,...m}=t[1];if(!a)throw new Error("address is required");return async function(e,t){const{address:a,chainId:c,formatUnits:m=18}=t;function u(e){return[{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"name",stateMutability:"view",inputs:[],outputs:[{type:e}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:e}]},{type:"function",name:"totalSupply",stateMutability:"view",inputs:[],outputs:[{type:"uint256"}]}]}try{const t={address:a,abi:u("string"),chainId:c},[r,s,d,f]=await(0,o.J)(e,{allowFailure:!0,contracts:[{...t,functionName:"decimals"},{...t,functionName:"name"},{...t,functionName:"symbol"},{...t,functionName:"totalSupply"}]});if(s.error instanceof n.uq)throw s.error;if(d.error instanceof n.uq)throw d.error;if(r.error)throw r.error;if(f.error)throw f.error;return{address:a,decimals:r.result,name:s.result,symbol:d.result,totalSupply:{formatted:(0,i.b)(f.result,(0,l.W)(m)),value:f.result}}}catch(t){if(t instanceof n.uq){const t={address:a,abi:u("bytes32"),chainId:c},[n,d,f,p]=await(0,o.J)(e,{allowFailure:!1,contracts:[{...t,functionName:"decimals"},{...t,functionName:"name"},{...t,functionName:"symbol"},{...t,functionName:"totalSupply"}]});return{address:a,decimals:n,name:(0,r.rR)((0,s.f)(d,{dir:"right"})),symbol:(0,r.rR)((0,s.f)(f,{dir:"right"})),totalSupply:{formatted:(0,i.b)(p,(0,l.W)(m)),value:p}}}throw t}}(e,{...m,address:a})},queryKey:m(t)}}(c,{...e,chainId:e.chainId??p}),g=Boolean(t&&(a.enabled??!0));return(0,u.aM)({...a,...h,enabled:g})}}}]);