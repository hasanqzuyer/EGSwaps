"use strict";(self.webpackChunkcloud_onchain_trade_sdk=self.webpackChunkcloud_onchain_trade_sdk||[]).push([[5541],{2203:(e,t,i)=>{i.d(t,{F:()=>T,K:()=>f});var n=i(11273),a=i(58395),r=i(5837),s=i(33740),o=i(76933),l=i(17921),c=i(52983),u=i(92518),d=i(95386),m=i(49506),p=i(49382),h=i(69464);const f={Close:1,CancelLimit:2,Open:3},g=({hash:e,onClose:t})=>{const{useHistoryDetail:i,getI18n:n}=(0,c.useContext)(h.C),{useHistoryDetailSymbol:r,useHistoryDetailType:s}=i(),{symbol:o,isLong:l,symbolName:u}=r(e),{i18n:d}=s(e);return(0,c.useMemo)((()=>c.createElement("div",{className:"flex items-center justify-between mb-4"},c.createElement("div",{className:"text-t-primary text-subtitle1"},u||o," ",l?n("orderForm-long","Long"):n("orderForm-short","Short")," -  ",d),c.createElement(a.E,{width:"20px",height:"20px",fontSize:"20px",className:"cursor-pointer absolute right-4 text-t-third",onClick:t}))),[n,d,l,t,o,u])},y=({hash:e})=>{const{getI18n:t,useHistoryDetail:i,staticHost:n}=(0,c.useContext)(h.C),{useHistoryDetailLeverage:a,useHistoryDetailSymbol:r,useHistoryDetailPNLROI:s}=i(),o=a(e),{symbolType:l}=r(e),{isPNLNegative:u,isPNLPositive:d}=s(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-leverage","Leverage")},c.createElement("div",{className:"flex items-center gap-1"},o,c.createElement(p.b,{staticHost:n,symbolType:l,isPNLNegative:u,isPNLPositive:d})))},E=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailInitialMargin:n}=i(),a=n(e),r=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-initialMargin-tips01","Initial Margin is the margin initially allocated to this position.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3"},t("userinfo-dialog-detail-history-initialMargin-tips02","Initial Margin = Principal - Open Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-initialMargin","Initial Margin"),tips:r,showLabelSx:!0},a)},x=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailQtyAndSize:n,useHistoryDetailPair:a}=i(),{baseAsset:r}=a(e),{size:s,qty:o}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-qty","QTY(Size)")},o," ",r," ( ≈ ",s," USD )")},F=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailPrice:n}=i(),{entryPrice:a}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-entryPrice","Entry Price")},a," USD")},_=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailPrice:n}=i(),{closePrice:a}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-closePrice","Close Price")},a," USD")},v=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailLiqLostRate:n}=i(),a=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-liquidLostRate","Liquid Lost Rate")},`${new l.Z(a).multipliedBy(100).toFixed(2)}%`)},S=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailFundingFee:n}=i(),{fundingFee:a,isFundingFeeNegative:r}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-accFundingFee","Acc. Funding Fee")},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},a))},C=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailPNLROI:n}=i(),{PNL:a,isPNLNegative:r}=n(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-realizedPnl-tips01","Realized PNL only calculates the profit and loss generated after the position is successfully opened.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3"},t("userinfo-dialog-detail-history-realizedPnl-tips02-v2","Long : Realized PNL = (Close Price - Entry Price) * Qty + Funding Fee")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-realizedPnl-tips03-v2","Short : Realized PNL = (Entry Price - Close Price ) * Qty + Funding Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-realizedPnl","Realized PNL"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},a))},N=({hash:e})=>{const{getI18n:t,useHistoryDetail:i,enableShare:n,ee:a}=(0,c.useContext)(h.C),{useHistoryDetailPNLROI:s}=i(),{ROI:o,isROINegative:l}=s(e),u=(0,c.useCallback)((()=>a.emit("MODAL_POSITION_SHARE_OPEN",{hash:e,overlay:!0})),[a,e]),d=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-realizedROI-tips01","Realized ROI = Realized PNL / Initial margin * 100%")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-realizedROI","Realized ROI"),tips:d,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:l?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},o),n&&c.createElement("div",null,c.createElement(r.f,{className:"relative ml-0.5 cursor-pointer text-t-third",width:"16px",height:"16px",fontSize:"16px",onClick:u})))},L=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailOpenCloseFee:n}=i(),{openFee:a}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-openFee","Open Fee")},a)},b=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailOpenCloseFee:n}=i(),{closeFee:a,isDynamicClosingFee:r}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-closeFee","Close Fee")},c.createElement("div",{className:"flex flex-col"},a,r?c.createElement("div",{className:"text-caption1 text-t-secondary text-right"},c.createElement(u.c,{i18nKey:"userinfo-close-fee-based-pnl",defaults:t("userinfo-close-fee-based-pnl","Charge based on PNL <viewMoreLink>View</viewMoreLink>"),components:{viewMoreLink:c.createElement("a",{href:d.WO,className:"text-t-link hover:text-t-linkHover",target:"_blank",rel:"noreferrer"})}})):null))},P=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailOpenCloseFee:n}=i(),{executionFee:a}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-executionFee","Execution Fee")},a)},I=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailNetProfit:n}=i(),{netProfit:a,isNetProfitNegative:r}=n(e),s=(0,c.useMemo)((()=>c.createElement("div",{className:"w-[282px]"},c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line"},t("userinfo-dialog-detail-history-netProfit-tips01","Net Profit is the profit and loss obtained after taking into account the trader's principal and trading fees.")),c.createElement("div",{className:"text-t-white text-caption whitespace-pre-line mt-3"},t("userinfo-dialog-detail-history-netProfit-tips02-v2","Net Profit = Realized PNL - Open Fee - Execution Fee - Close Fee")))),[t]);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-netProfit","Net Profit"),tips:s,showLabelSx:!0},c.createElement("div",{className:"text-subtitle2",style:{color:r?"rgb(var(--colors-t-sell)":"var(--colors-t-buy))"}},a))},D=({hash:e})=>{const{getI18n:t,useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailDuration:n}=i(),{time:a}=n(e);return c.createElement(m.Z,{label:t("userinfo-dialog-detail-time","Time")},a)},w=({hash:e})=>c.createElement("div",{className:"flex flex-col gap-6 max-h-[80vh] overflow-auto lg:h-[unset] lg:overflow-hidden lg:flex-row"},c.createElement("div",{className:"flex flex-col w-full lg:w-1/2 gap-4"},c.createElement(y,{hash:e}),c.createElement(E,{hash:e}),c.createElement(x,{hash:e}),c.createElement(F,{hash:e}),c.createElement(_,{hash:e}),c.createElement(v,{hash:e}),c.createElement(S,{hash:e}),c.createElement(C,{hash:e}),c.createElement(N,{hash:e})),c.createElement("div",{className:"flex flex-col w-full lg:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-[16px] h-[max-content] "},c.createElement(L,{hash:e}),c.createElement(P,{hash:e}),c.createElement(b,{hash:e}),c.createElement(I,{hash:e}),c.createElement("div",{className:"border-b-border-line border-b border-solid"}),c.createElement(D,{hash:e}))),M=({hash:e})=>c.createElement("div",{className:"flex flex-col overflow-auto gap-6 max-h-[80vh]  lg:h-[unset] lg:overflow-hidden lg:flex-row"},c.createElement("div",{className:"flex flex-col w-full lg:w-1/2 gap-4"},c.createElement(y,{hash:e}),c.createElement(E,{hash:e}),c.createElement(x,{hash:e}),c.createElement(F,{hash:e}),c.createElement(v,{hash:e})),c.createElement("div",{className:"flex flex-col w-full lg:w-1/2 gap-4 bg-interactive-interactive01 dark:bg-interactive-interactive01 rounded-[10px] p-[16px] h-[max-content] "},c.createElement(L,{hash:e}),c.createElement(P,{hash:e}),c.createElement(D,{hash:e}))),O=({hash:e})=>c.createElement("div",{className:"flex max-h-[80vh] overflow-auto lg:max-h-[unset lg:overflow-hidden"},c.createElement("div",{className:"flex flex-col w-full gap-4"},c.createElement(D,{hash:e}))),k=({hash:e,onClose:t})=>{const{useHistoryDetail:i}=(0,c.useContext)(h.C),{useHistoryDetailType:n}=i(),{type:a}=n(e);return a===f.CancelLimit?c.createElement("div",{className:"history-detail-content w-full sm:w-[368px]"},c.createElement(g,{hash:e,onClose:t}),c.createElement(O,{hash:e})):c.createElement("div",{className:"history-detail-content w-full sm:w-[718px]"},c.createElement(g,{hash:e,onClose:t}),a===f.Close&&c.createElement(w,{hash:e}),a===f.Open&&c.createElement(M,{hash:e}))},T=()=>{const{ee:e}=(0,c.useContext)(h.C),[t,i]=(0,c.useState)(""),{isMobile:a}=(0,n.F)(),r=(0,c.useCallback)((()=>{i("")}),[]),l=(0,c.useCallback)((({hash:e})=>{i(e)}),[]);return(0,c.useEffect)((()=>(e.on("MODAL_HISTORY_DETAIL_OPEN",l),e.on("MODAL_HISTORY_DETAIL_CLOSE",r),()=>{e.off("MODAL_HISTORY_DETAIL_OPEN",l),e.off("MODAL_HISTORY_DETAIL_CLOSE",r)})),[e,r,l]),a?c.createElement(s.yo,{open:Boolean(t)},c.createElement(s.ue,{side:"bottom",className:"w-full border-none p-4 pb-6 rounded-t-[4px] bg-interactive-interactiveBg z-tooltip",onPointerDownOutside:r},c.createElement(k,{hash:t,onClose:r}))):c.createElement(o.Vq,{open:Boolean(t)},c.createElement(o.PK,null,c.createElement(o.cZ,{className:"p-4",onPointerDownOutside:r},c.createElement(k,{hash:t,onClose:r}))))}},19844:(e,t,i)=>{i.d(t,{m:()=>x});var n=i(11273),a=i(96336),r=i(57255),s=i(76126),o=i(47231),l=i(28216),c=i(98995),u=i(84542),d=i(52983),m=i(82210),p=i(86364),h=i(62998),f=i(61239),g=i(69464),y=i(59712);const E=({hash:e,checked:t,onClose:i,snapshotRef:r,onCheckedChange:s,copy:o,download:c})=>{const{locale:u,getI18n:h,useTheme:y,useHistoryDetail:E,staticHost:x,siteHost:F,enableShareLink:_}=(0,d.useContext)(g.C),{useHistoryDetailSymbol:v,useHistoryDetailLeverage:S,useHistoryDetailPNLROI:C,useHistoryDetailPrice:N,useHistoryDetailDuration:L}=E(),{isLight:b}=y(),{PNLFormatted:P,ROI:I,tokenInSymbol:D}=C(e),{symbol:w,isLong:M}=v(e),O=S(e),{timestamp:k}=L(e),{closePrice:T,entryPrice:H}=N(e),{address:B}=(0,l.m)(),{isMobile:A}=(0,n.F)(),R=(0,f.e)({staticHost:x});return d.createElement("div",{className:"flex flex-col"},i&&d.createElement(a.M,{width:"24px",height:"24px",fontSize:"24px",className:"text-t-third cursor-pointer absolute top-[8px] right-[8px] z-[1]",onClick:i}),d.createElement(m.L,{data:{hash:e,locale:u||"en",symbol:w,tokenInSymbol:D,closeTime:k,side:M?"LONG":"SHORT",leverage:O,markPrice:"-",entryPrice:H,closePrice:T,PNL:P,ROI:I,isLightTheme:b,staticResource:R,SITE_HOST:F,userAddress:B,getI18n:h,sharePNL:t,snapshotRef:r}}),!A&&d.createElement(d.Fragment,null,d.createElement(p.k,{className:"pt-[12px] pb-[24px]",getI18n:h,checked:t,onCheckedChange:s}),d.createElement(p.n,{getI18n:h,copy:_?o:void 0,download:c})))},x=()=>{const e=(0,c.x)(),t=(0,u.pT)(e),{ee:i,getI18n:a,locale:l}=(0,d.useContext)(g.C),[m,p]=(0,d.useState)(""),[x,F]=(0,d.useState)(!1),[_,v]=(0,d.useState)(!1),{isMobile:S}=(0,n.F)(),C=(0,d.useRef)(),N=(0,d.useMemo)((()=>(0,f.O)({network:t?.apiNetwork,locale:l,hash:m,sharePNL:_})),[t?.apiNetwork,l,m,_]),L=(0,d.useCallback)((async()=>{try{await(0,s.v)(N),S||r.A.success(a("share-copy-message","Copy Successfully"))}catch(e){y.error(e)}}),[a,S,N]),b=(0,d.useCallback)((async()=>{C.current&&(0,o.Q)({el:C.current,success(e){(0,o.L)(e,`share-position-${Date.now()}`)}})}),[]),P=(0,d.useCallback)((e=>{"boolean"==typeof e&&v(e)}),[]),I=(0,d.useCallback)((()=>{p("")}),[]);return(0,d.useEffect)((()=>i.on("MODAL_POSITION_SHARE_OPEN",(({hash:e,overlay:t})=>{p(e),F(t)}))),[i]),(0,d.useEffect)((()=>i.on("MODAL_POSITION_SHARE_CLOSE",(()=>{p(""),F(!1)}))),[i]),(0,d.useMemo)((()=>m?S?d.createElement(h.V,{hash:m,onClose:I,getI18n:a,checked:_,onCheckedChange:P,copy:L,download:b},d.createElement(E,{hash:m,checked:_,snapshotRef:C})):d.createElement(h.t,{onClose:I,overlay:x},d.createElement(E,{hash:m,checked:_,onClose:I,onCheckedChange:P,copy:L,download:b,snapshotRef:C})):null),[L,b,a,m,S,P,I,x,_])}},69464:(e,t,i)=>{i.d(t,{C:()=>n});const n=i(52983).createContext({})},20355:(e,t,i)=>{i.d(t,{T:()=>n});const n=i(52983).createContext({})},25375:(e,t,i)=>{i.d(t,{ee:()=>n});const n=new(i(13565).v)},72262:(e,t,i)=>{i.d(t,{$:()=>s});var n=i(69982),a=i(28643),r=i(52983);const s=({title:e,isLight:t})=>(0,r.useMemo)((()=>r.createElement("div",{className:"flex flex-col items-center justify-center h-full"},t?r.createElement(n.E,{width:"60px",height:"60px",fontSize:"60px"}):r.createElement(a.e,{width:"60px",height:"60px",fontSize:"60px"}),r.createElement("div",{className:"text-body2 text-t-third"},e))),[e,t])},13565:(e,t,i)=>{i.d(t,{v:()=>n});class n{constructor(){this.cbs={},this.on=(e,t)=>(this.cbs[e]||(this.cbs[e]=[]),this.cbs[e].push(t),()=>this.off(e,t)),this.off=(e,t)=>{this.cbs[e]||(this.cbs[e]=[]),this.cbs[e]=this.cbs[e].filter((e=>e!==t))},this.emit=(e,t)=>{this.cbs[e]||(this.cbs[e]=[]),this.cbs[e].forEach((e=>"function"==typeof e&&e(t)))}}}},54402:(e,t,i)=>{i.d(t,{g:()=>o});var n=i(52983),a=i(63730),r=i(27618),s=i(62910);const o=({show:e=!0,fullScreen:t=!1,inner:i,color:a="var(--colors-interactive-primary)",children:o,className:l})=>{if(!e)return n.createElement(n.Fragment,null,o||null);const c=n.createElement(s.$,{className:(0,r.cn)("absolute -translate-x-2/4 -translate-y-2/4 text-center left-2/4 top-2/4",l),color:a});return t?n.createElement(n.Fragment,null,o,n.createElement("div",{className:(0,r.cn)("top-0 left-0 w-full h-full z-[2000] bg-spinner-radial",l),style:{position:i?"absolute":"fixed"}},c)):n.createElement(n.Fragment,null,o,c)};let l;o.show=({fullScreen:e=!1}={})=>{l||(l=document.createElement("div"),document.body.appendChild(l)),a.render(n.createElement(o,{fullScreen:e}),l)},o.hide=()=>{l&&a.render(n.createElement(o,{show:!1}),l)}},62910:(e,t,i)=>{i.d(t,{$:()=>s});var n=i(52983),a=i(27618);const r=({delay:e,color:t})=>n.createElement("div",{className:"h-full w-[3px] animate-spinner",style:{animationDelay:e,backgroundColor:t}}),s=(0,n.forwardRef)((({color:e="rgb(var(--colors-interactive-primary))",className:t,...i},s)=>{const o=[.5,.2,.2,.5].map((e=>`-${e}s`));return n.createElement("div",{className:(0,a.cn)("spinner flex w-[30px] h-[30px] items-center justify-between",t),ref:s,...i},o.map(((t,i)=>n.createElement(r,{key:i,delay:t,color:e}))))}));s.displayName="Spinner"},28643:(e,t,i)=>{i.d(t,{e:()=>a});var n=i(52983);const a=e=>n.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 96 96",fill:"none",...e},n.createElement("g",{filter:"url(#not-found-data-dark_svg__filter0_i)"},n.createElement("path",{d:"M12 20a8 8 0 018-8h31.858a10 10 0 017.07 2.929l9.143 9.142A10 10 0 0171 31.142V76a8 8 0 01-8 8H20a8 8 0 01-8-8V20z",fill:"url(#not-found-data-dark_svg__paint0_linear)"})),n.createElement("path",{d:"M20 45.5a2.5 2.5 0 012.5-2.5h14a2.5 2.5 0 010 5h-14a2.5 2.5 0 01-2.5-2.5z",fill:"url(#not-found-data-dark_svg__paint1_linear)"}),n.createElement("path",{d:"M20 57.5a2.5 2.5 0 012.5-2.5h9a2.5 2.5 0 010 5h-9a2.5 2.5 0 01-2.5-2.5z",fill:"url(#not-found-data-dark_svg__paint2_linear)"}),n.createElement("path",{d:"M22.5 67a2.5 2.5 0 000 5h14a2.5 2.5 0 000-5h-14z",fill:"url(#not-found-data-dark_svg__paint3_linear)"}),n.createElement("g",{filter:"url(#not-found-data-dark_svg__filter1_i)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46 62.765C46 53.505 53.506 46 62.765 46s16.764 7.506 16.764 16.765c0 3.632-1.155 6.994-3.118 9.74l6.78 6.78a2.762 2.762 0 11-3.906 3.906l-6.78-6.78a16.689 16.689 0 01-9.74 3.118C53.505 79.53 46 72.024 46 62.765zm27.941 0c0 6.172-5.004 11.176-11.176 11.176-6.173 0-11.177-5.004-11.177-11.176 0-6.173 5.004-11.177 11.177-11.177 6.172 0 11.176 5.004 11.176 11.177z",fill:"url(#not-found-data-dark_svg__paint4_linear)"})),n.createElement("defs",null,n.createElement("linearGradient",{id:"not-found-data-dark_svg__paint0_linear",x1:15.218,y1:14,x2:66.628,y2:86.481,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#383D55"}),n.createElement("stop",{offset:1,stopColor:"#27283E"})),n.createElement("linearGradient",{id:"not-found-data-dark_svg__paint1_linear",x1:14,y1:31,x2:28.992,y2:75.476,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#8B90AC"}),n.createElement("stop",{offset:1,stopColor:"#444663"})),n.createElement("linearGradient",{id:"not-found-data-dark_svg__paint2_linear",x1:14,y1:31,x2:28.992,y2:75.476,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#8B90AC"}),n.createElement("stop",{offset:1,stopColor:"#444663"})),n.createElement("linearGradient",{id:"not-found-data-dark_svg__paint3_linear",x1:14,y1:31,x2:28.992,y2:75.476,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#8B90AC"}),n.createElement("stop",{offset:1,stopColor:"#444663"})),n.createElement("linearGradient",{id:"not-found-data-dark_svg__paint4_linear",x1:38.528,y1:47,x2:53.749,y2:93.995,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#72768F"}),n.createElement("stop",{offset:1,stopColor:"#5A5C74"})),n.createElement("filter",{id:"not-found-data-dark_svg__filter0_i",x:12,y:12,width:60,height:73,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dx:1,dy:1}),n.createElement("feGaussianBlur",{stdDeviation:1}),n.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),n.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),n.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"})),n.createElement("filter",{id:"not-found-data-dark_svg__filter1_i",x:46,y:46,width:39,height:39,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dx:1,dy:1}),n.createElement("feGaussianBlur",{stdDeviation:1}),n.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),n.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),n.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow"}))))},69982:(e,t,i)=>{i.d(t,{E:()=>a});var n=i(52983);const a=e=>n.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 96 96",fill:"none",...e},n.createElement("g",{filter:"url(#NotFoundDataLight_svg__filter0_i_1775_28546)"},n.createElement("path",{d:"M12 20a8 8 0 018-8h31.858a10 10 0 017.07 2.929l9.143 9.142A10 10 0 0171 31.142V76a8 8 0 01-8 8H20a8 8 0 01-8-8V20z",fill:"url(#NotFoundDataLight_svg__paint0_linear_1775_28546)"})),n.createElement("g",{filter:"url(#NotFoundDataLight_svg__filter1_i_1775_28546)"},n.createElement("path",{d:"M20 45.5a2.5 2.5 0 012.5-2.5h14a2.5 2.5 0 010 5h-14a2.5 2.5 0 01-2.5-2.5z",fill:"url(#NotFoundDataLight_svg__paint1_linear_1775_28546)"}),n.createElement("path",{d:"M20 57.5a2.5 2.5 0 012.5-2.5h9a2.5 2.5 0 010 5h-9a2.5 2.5 0 01-2.5-2.5z",fill:"url(#NotFoundDataLight_svg__paint2_linear_1775_28546)"}),n.createElement("path",{d:"M22.5 67a2.5 2.5 0 000 5h14a2.5 2.5 0 000-5h-14z",fill:"url(#NotFoundDataLight_svg__paint3_linear_1775_28546)"})),n.createElement("g",{filter:"url(#NotFoundDataLight_svg__filter2_i_1775_28546)"},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46 62.765C46 53.505 53.506 46 62.765 46s16.764 7.506 16.764 16.765c0 3.632-1.155 6.994-3.118 9.74l6.78 6.78a2.762 2.762 0 11-3.906 3.906l-6.78-6.78a16.689 16.689 0 01-9.74 3.118C53.505 79.53 46 72.024 46 62.765zm27.941 0c0 6.172-5.004 11.176-11.176 11.176-6.173 0-11.177-5.004-11.177-11.176 0-6.173 5.004-11.177 11.177-11.177 6.172 0 11.176 5.004 11.176 11.177z",fill:"url(#NotFoundDataLight_svg__paint4_linear_1775_28546)"})),n.createElement("defs",null,n.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint0_linear_1775_28546",x1:-8,y1:-64.5,x2:25.922,y2:125.196,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#F0F0F5"}),n.createElement("stop",{offset:1,stopColor:"#72768F"})),n.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint1_linear_1775_28546",x1:19.905,y1:43,x2:41.534,y2:113.219,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#F0F0F5"}),n.createElement("stop",{offset:1,stopColor:"#72768F"})),n.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint2_linear_1775_28546",x1:19.905,y1:43,x2:41.534,y2:113.219,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#F0F0F5"}),n.createElement("stop",{offset:1,stopColor:"#72768F"})),n.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint3_linear_1775_28546",x1:19.905,y1:43,x2:41.534,y2:113.219,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#F0F0F5"}),n.createElement("stop",{offset:1,stopColor:"#72768F"})),n.createElement("linearGradient",{id:"NotFoundDataLight_svg__paint4_linear_1775_28546",x1:45.81,y1:46,x2:48.756,y2:133.547,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#F0F0F5"}),n.createElement("stop",{offset:1,stopColor:"#72768F"})),n.createElement("filter",{id:"NotFoundDataLight_svg__filter0_i_1775_28546",x:12,y:12,width:60,height:73,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dx:1,dy:1}),n.createElement("feGaussianBlur",{stdDeviation:1}),n.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),n.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.4 0"}),n.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_1775_28546"})),n.createElement("filter",{id:"NotFoundDataLight_svg__filter1_i_1775_28546",x:20,y:43,width:20,height:30,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dx:1,dy:1}),n.createElement("feGaussianBlur",{stdDeviation:1}),n.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),n.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.4 0"}),n.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_1775_28546"})),n.createElement("filter",{id:"NotFoundDataLight_svg__filter2_i_1775_28546",x:46,y:46,width:39,height:38.999,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},n.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),n.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),n.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),n.createElement("feOffset",{dx:1,dy:1}),n.createElement("feGaussianBlur",{stdDeviation:1}),n.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:-1,k3:1}),n.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.4 0"}),n.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_1775_28546"}))))},10978:(e,t,i)=>{i.d(t,{ZK:()=>m,b2:()=>f,d3:()=>g,ch:()=>E,Xi:()=>C,RM:()=>L,yT:()=>S,uq:()=>b,v_:()=>P,iA:()=>D,a6:()=>w,r2:()=>M,mM:()=>k,D:()=>B,k6:()=>l.k6,XS:()=>l.XS,uN:()=>se,zV:()=>l.zV,g8:()=>l.g8,xK:()=>Ee,oU:()=>ye,ZC:()=>l.ZC,Fc:()=>l.Fc,kD:()=>l.kD,PC:()=>l.PC,Gn:()=>l.Gn});var n=i(52983),a=i(87685),r=i(87514),s=i(17921),o=i(68692),l=i(15408),c=i(42249);const u=e=>{const t=(0,o.h)(),i=(0,l.XS)(e,"tokenIn"),u=(0,a.QG)(i),d=(0,l.XS)(e,"margin"),{displaySymbol:m}=(e=>{const t=(0,o.h)(),i=(0,l.XS)(e,"tokenSymbol"),r=(0,l.XS)(e,"tokenIn"),s=(0,a.At)(r),u=(0,c.h)(),d=t?i:s,m=u[d]||d;return(0,n.useMemo)((()=>({displaySymbol:m,originalSymbol:d})),[m,d])})(e),p=(0,a.RK)(m),h=!!m;return(0,n.useMemo)((()=>({initialed:h,symbol:m,margin:t?d:new s.Z((0,r.m)(d,u)),qtyPrecision:p})),[h,m,t,d,u,p])},d=e=>{const{symbol:t}=u(e),i=(0,a.Ms)(t);return(0,n.useMemo)((()=>i),[i])},m=()=>(0,n.useMemo)((()=>({useClassicDataByFiled:l.XS})),[]);var p=i(87250);const h=e=>{const t=(0,o.h)(),i=(0,l.XS)(e,"tokenIn"),s=(0,a.QG)(i),c=(0,l.XS)(e,"openFee"),u=(0,l.XS)(e,"closeFee"),d=(0,l.XS)(e,"fundingFee"),m=(0,l.XS)(e,"executionFee"),p=(0,l.XS)(e,"holdingFee");return(0,n.useMemo)((()=>t?{openFee:c,closeFee:u,fundingFee:d,executionFee:m,holdingFee:p}:{openFee:(0,r.m)(c,s),closeFee:(0,r.m)(u,s),fundingFee:(0,r.m)(d,s),executionFee:(0,r.m)(m,s),holdingFee:(0,r.m)(p,s)}),[u,s,m,d,p,c,t])},f=e=>{const t=(0,l.XS)(e,"actionType"),i=(0,c.h)(),{openFee:a,closeFee:r,executionFee:o}=h(e),{initialed:d,symbol:m,qtyPrecision:f}=u(e);return(0,n.useMemo)((()=>{let e=new s.Z("-");return"OPEN"===t&&(e=new s.Z(a).plus(o)),"CLOSE"!==t&&"TP"!==t&&"SL"!==t&&"LIQUIDATED"!==t||(e=new s.Z(r)),"CANCEL_LIMIT"!==t&&"SYSTEM_CANCEL"!==t||(e=new s.Z("-")),d&&e.isFinite()?`${(0,p.uf)(e,f)} ${i[m]||m}`:"-"}),[t,r,o,d,a,m,f,i])},g=e=>{const t=(0,c.h)(),{margin:i,symbol:a,qtyPrecision:r}=u(e);return(0,n.useMemo)((()=>`${(0,p.FL)(i,r)} ${t[a]||a}`),[i,r,a,t])},y=e=>{const t=u(e),{symbol:i,index:a}=d(e);return(0,n.useMemo)((()=>({...t,initialed:t.initialed&&void 0!==i,margin:new s.Z(t.margin).multipliedBy(a)})),[a,t,i])},E=e=>{const t=(e=>{const t=(0,l.XS)(e,"qty"),i=(0,l.XS)(e,"entryPrice"),{margin:a,initialed:r}=y(e);return(0,n.useMemo)((()=>r?new s.Z(t).multipliedBy(i).dividedBy(a):new s.Z(1/0)),[i,r,a,t])})(e);return(0,n.useMemo)((()=>t.isFinite()?`${t.toFixed(1)}x`:"-"),[t])};var x=i(89479),F=i.n(x),_=i(96988);const v=e=>{const t=(0,l.XS)(e,"actionType"),i=(0,l.XS)(e,"entryPrice"),a=(0,l.XS)(e,"closePrice");return(0,n.useMemo)((()=>"CANCEL_LIMIT"===t||"SYSTEM_CANCEL"===t?"-":"OPEN"===t?i:"LIQUIDATED"===t||"TP"===t||"SL"===t||"CLOSE"===t?a:"-"),[t,a,i])},S=e=>{const t=(0,l.XS)(e,"pair"),i=v(e),r=(0,a.fV)(t);return(0,n.useMemo)((()=>{const e=new s.Z(i);return e.isFinite()?(0,p.uf)(e,r):"-"}),[i,r])},C=e=>{const t=(0,l.XS)(e,"actionType"),i=(0,l.XS)(e,"side"),a=(0,l.XS)(e,"qty"),r=(0,l.XS)(e,"pair"),o=(0,l.XS)(e,"timestamp"),{getI18n:c}=(0,_.V6)(),d=v(e),m=S(e),{symbol:h,qtyPrecision:f}=u(e),g=(0,n.useMemo)((()=>{const e=new s.Z(a).multipliedBy(d);return e.isFinite()?(0,p.uf)(e,f):"-"}),[d,a,f]),y=(0,n.useMemo)((()=>"CANCEL_LIMIT"===t||"SYSTEM_CANCEL"===t),[t]),E=(0,n.useMemo)((()=>{const e=(0,p.Bv)(Number(o));return(0,p.Bv)().diff(e,"hour")>24?e.format("YYYY-MM-DD"):e.format("HH:mm:ss")}),[o]);return(0,n.useMemo)((()=>({side:c(`userinfo-history-side-${i.toUpperCase()}`,F()(i))||F()(i),symbol:r,price:m,size:g,isCancelOrSystemCancel:y,timeFormat:E,marginToken:h})),[m,c,y,r,i,g,E,h])},N=e=>{const t=(0,o.h)(),i=(0,l.XS)(e,"pnl"),s=(0,l.XS)(e,"tokenIn"),c=(0,a.QG)(s);return(0,n.useMemo)((()=>t?i:(0,r.m)(i,c)),[t,i,c])},L=e=>{const t=(0,c.h)(),i=N(e),a=(0,l.XS)(e,"actionType"),{fundingFee:r,holdingFee:o}=h(e),{initialed:d,margin:m,symbol:f,qtyPrecision:g}=u(e);return(0,n.useMemo)((()=>{const e=t[f]||f;if("CLOSE"===a||"LIQUIDATED"===a||"TP"===a||"SL"===a){const t=new s.Z(i).plus(r).minus(o),n=new s.Z(t).dividedBy(m),a=(0,p.uf)(t,g),l=`${(0,p.uf)(n.multipliedBy(100),2)}%`;return{PNL:d&&t.isFinite()?t.isNegative()?`${a} ${e}`:`+${a} ${e}`:"-",PNLNFormat:d&&t.isFinite()?t.isNegative()?(0,p.pF)(t.toNumber(),g):`+${(0,p.pF)(t.toNumber(),g)}`:"-",ROI:d&&n.isFinite()?n.isNegative()?l:`+${l}`:"-",isPNLNegative:t.isNegative(),isROINegative:n.isNegative(),tokenInSymbol:e}}return{PNL:"-",ROI:"-",isPNLNegative:void 0,isROINegative:void 0,PNLNFormat:"-",tokenInSymbol:e}}),[a,r,o,d,m,i,g,f,t])},b=e=>{const{getI18n:t}=(0,_.V6)(),i=(0,l.XS)(e,"side");return(0,n.useMemo)((()=>t(`userinfo-history-side-${i.toUpperCase()}`,F()(i))||F()(i)),[t,i])},P=e=>{const t=(0,l.XS)(e,"qty"),i=(0,l.XS)(e,"entryPrice"),a=(0,l.XS)(e,"closePrice"),r=(0,l.XS)(e,"actionType");return(0,n.useMemo)((()=>{let e=new s.Z("-");return"OPEN"===r&&(e=new s.Z(i).multipliedBy(t)),"CLOSE"!==r&&"SL"!==r&&"TP"!==r&&"LIQUIDATED"!==r||(e=new s.Z(a).multipliedBy(t)),e.isFinite()?(0,p.uf)(e.toFixed(1),1):"-"}),[r,a,i,t])};var I=i(85177);const D=e=>{const t=(0,l.XS)(e,"pair"),i=(0,l.XS)(e,"isLong"),{productMap:a}=(0,I.GS)();return(0,n.useMemo)((()=>({symbol:t,isLong:i,symbolType:a[t]?.symbolType,symbolName:a[t]?.symbolName})),[t,i,a])},w=e=>{const t=(0,l.XS)(e,"timestamp");return(0,n.useMemo)((()=>(0,p.Bv)(Number(t)).isValid()?(0,p.Bv)(Number(t)).format("MM-DD HH:mm:ss"):"-"),[t])},M=e=>{const t=(0,l.XS)(e,"actionType"),{getI18n:i}=(0,_.V6)();return(0,n.useMemo)((()=>t?i(`userinfo-history-type-${t.toUpperCase()}`,{defaultValue:t.toUpperCase()}):"-"),[i,t])};var O=i(86562);const k=e=>{const t=(0,l.ZC)(e,"symbol"),{close:i}=(0,O.L)(t);return(0,n.useMemo)((()=>i||0),[i])};var T=i(17845),H=i(14369);const B=()=>{const{data:e}=(0,H.R)();return{fetchPredictions:useCallback((()=>{T.ee.emit("FETCH_DUMB_HISTORY_LIST",void 0)}),[]),useHistoryTab:l.g8,usePredictionDataByFiled:l.ZC,usePredictionHasMore:l.Fc,usePredictionInitialed:l.kD,usePredictionLoading:l.PC,usePredictions:l.Gn,usePricePrecision:a.fV,useAssetPrecision:a.RK,useCurrentPrice:k,predictionPairs:e}};var A=i(95386),R=i(49229),$=i(44040);const U=e=>{const t=(0,l.XS)(e,"qty"),i=(0,l.XS)(e,"pair"),r=(0,$.z)(i),o=(0,l.XS)(e,"entryPrice"),c=(0,n.useMemo)((()=>new s.Z(t).multipliedBy(o)),[o,t]),u=(0,a.tz)(r,c);return(0,n.useMemo)((()=>(0,R.mb)(u?.liqLostP,A.cB.percent)),[u])},Z=e=>{const t=(0,l.XS)(e,"timestamp"),{getI18n:i}=(0,_.V6)();return(0,n.useMemo)((()=>(0,p.jE)(Number(t),i)),[t,i])},X=e=>{const{openFee:t,executionFee:i,fundingFee:a,closeFee:r,holdingFee:o}=h(e),{symbol:l,index:c}=d(e);return(0,n.useMemo)((()=>({initialed:void 0!==l,openFee:new s.Z(t).multipliedBy(c),closeFee:new s.Z(r).multipliedBy(c),fundingFee:new s.Z(a).multipliedBy(c),executionFee:new s.Z(i).multipliedBy(c),holdingFee:new s.Z(o).multipliedBy(c)})),[l,t,c,r,a,i,o])},z=e=>{const t=(0,c.h)(),{fundingFee:i,holdingFee:a}=h(e),{fundingFee:r,holdingFee:o}=X(e),{symbol:l,qtyPrecision:d}=u(e);return(0,n.useMemo)((()=>{const e=new s.Z(i).minus(a);return{fundingFee:`${e.isNegative()?"":"+"}${(0,p.FL)(e,d)} ${t[l]||l} ( ≈ ${(0,p.uf)(new s.Z(r).minus(o),2)} USD )`,isFundingFeeNegative:e.isNegative()}}),[i,a,d,l,r,o,t])},q=e=>{const t=(0,c.h)(),{margin:i,symbol:a,qtyPrecision:r}=u(e),{margin:s}=y(e);return(0,n.useMemo)((()=>`${(0,p.FL)(i,r)} ${t[a]||a} ( ≈ ${(0,p.uf)(s,1)} USD )`),[i,r,a,s,t])};var G=i(2203);const V=["CLOSE","TP","SL","LIQUIDATED"],Y=["CANCEL_LIMIT","SYSTEM_CANCEL"],Q=["OPEN"],K=e=>{const{getI18n:t}=(0,_.V6)(),i=(0,l.XS)(e,"actionType"),a=t(`userinfo-history-type-${i?.toUpperCase()}`,{defaultValue:i?.toUpperCase()}),r=(0,n.useMemo)((()=>[{types:V,type:G.K.Close},{types:Q,type:G.K.Open},{types:Y,type:G.K.CancelLimit}]),[]);return(0,n.useMemo)((()=>({...r.find((e=>e.types.includes(i?.toUpperCase())))||{type:void 0},i18n:a})),[i,a,r])},j=e=>{const t=(0,c.h)(),i=N(e),{margin:a,symbol:r,qtyPrecision:o}=u(e),m=(0,l.XS)(e,"actionType"),{fundingFee:f}=h(e),{index:g}=d(e);return(0,n.useMemo)((()=>{const e=t[r]||r;if(V.includes(m)){const t=new s.Z(i).plus(f),n=new s.Z(t).dividedBy(a),r=(0,p.FL)(t,o),l=`${(0,p.uf)(n.multipliedBy(100),2)}%`,c=t.isNegative(),u=t.isPositive(),d=n.isNegative();return{PNL:t.isFinite()?`${c?"":"+"}${r} ${e} ( ≈ ${(0,p.uf)(t.multipliedBy(g),1)} USD\n        )`:"-",PNLOrigin:t,PNLFormatted:r,ROI:n.isFinite()?`${d?"":"+"}${l}`:"-",isPNLNegative:c,isROINegative:d,isPNLPositive:u,tokenInSymbol:e}}return{PNL:"-",PNLOrigin:new s.Z(0),PNLFormatted:"-",ROI:"-",isPNLNegative:!1,isROINegative:!1,isPNLPositive:!1,tokenInSymbol:e}}),[m,f,g,a,i,o,r,t])},J=e=>{const{PNLOrigin:t}=j(e),{openFee:i,executionFee:n,closeFee:a}=h(e);return t.minus(i).minus(n).minus(a)},W=e=>{const t=(0,c.h)(),{symbol:i,qtyPrecision:a}=u(e),r=J(e),s=(e=>{const t=J(e),{index:i}=d(e);return t.multipliedBy(i)})(e);return(0,n.useMemo)((()=>({netProfit:r.isNaN()?"-":`${r.isNegative()?"":"+"}${(0,p.FL)(r.toNumber(),a)} ${t[i]||i} ( ≈ ${(0,p.uf)(s,1)} USD )`,isNetProfitNegative:r.isNegative()})),[r,a,i,s,t])},ee=e=>{const t=(0,c.h)(),{openFee:i,closeFee:r,executionFee:o}=h(e),{openFee:d,closeFee:m,executionFee:f}=X(e),g=(0,l.XS)(e,"pair"),y=(0,$.z)(g),{data:E}=(0,a.Bu)(y),{symbol:x,qtyPrecision:F}=u(e);return(0,n.useMemo)((()=>({isDynamicClosingFee:Boolean(E.feeConfig&&E.feeConfig?.shareP>0&&E.feeConfig?.minCloseFeeP>0),openFee:`${(0,p.FL)(new s.Z(i),F)} ${t[x]||x} ( ≈ ${(0,p.uf)(d,2)} USD )`,executionFee:`${(0,p.FL)(new s.Z(o),F)} ${t[x]||x} ( ≈ ${(0,p.uf)(f,2)} USD )`,closeFee:`${(0,p.FL)(r,F)} ${t[x]||x} ( ≈ ${(0,p.uf)(m,2)} USD )`})),[E.feeConfig,i,F,x,d,o,f,r,m,t])},te=e=>{const t=(0,l.XS)(e,"pair"),i=(0,I.Lh)(t,"baseAsset");return(0,n.useMemo)((()=>({pair:t,baseAsset:i})),[t,i])},ie=e=>{const t=(0,l.XS)(e,"pair"),i=(0,l.XS)(e,"entryPrice"),r=(0,l.XS)(e,"closePrice"),o=(0,a.fV)(t);return(0,n.useMemo)((()=>({entryPrice:new s.Z(i).isFinite()?(0,p.uf)(i,o):"-",closePrice:new s.Z(r).isFinite()?(0,p.uf)(r,o):"-"})),[i,o,r])},ne=e=>(0,l.XS)(e,"amountIn"),ae=e=>{const t=(0,c.h)(),i=ne(e),a=(e=>{const t=ne(e),{symbol:i}=u(e),{index:n}=d(i);return new s.Z(t).multipliedBy(n)})(e),{symbol:r,qtyPrecision:o}=u(e);return(0,n.useMemo)((()=>`${(0,p.FL)(i,o)} ${t[r]||r} ( ≈ ${(0,p.uf)(a,1)} USD )`),[i,o,r,a,t])},re=e=>{const t=P(e),i=(0,l.XS)(e,"qty"),a=(0,l.XS)(e,"pair"),r=(0,I.Lh)(a,"quantityPrecision");return(0,n.useMemo)((()=>({size:t,qty:(0,p.uf)(i,r)})),[i,r,t])},se=()=>(0,n.useMemo)((()=>({useHistoryDetailType:K,useHistoryDetailPair:te,useHistoryDetailLeverage:E,useHistoryDetailInitialMargin:q,useHistoryDetailPrincipal:ae,useHistoryDetailSymbol:D,useHistoryDetailQtyAndSize:re,useHistoryDetailFundingFee:z,useHistoryDetailOpenCloseFee:ee,useHistoryDetailPrice:ie,useHistoryDetailLiqLostRate:U,useHistoryDetailPNLROI:j,useHistoryDetailNetProfit:W,useHistoryDetailDuration:Z})),[]);var oe=i(19260),le=i(28216),ce=i(98995),ue=i(14676),de=i(60783),me=i(84542),pe=i(3421),he=i(43785);const fe={LIMIT:{label:"LIMIT",index:0},CANCEL_LIMIT:{label:"CANCEL_LIMIT",index:1},SYSTEM_CANCEL:{label:"SYSTEM_CANCEL",index:2},OPEN:{label:"OPEN",index:3},CLOSE:{label:"CLOSE",index:4},TP:{label:"TP",index:5},SL:{label:"SL",index:6},LIQ:{label:"LIQUIDATED",index:7}},ge=10,ye=()=>{const{data:e,hasNextPage:t,fetchNextPage:i,isFetchingNextPage:r}=(0,a.bC)({page:1,limit:ge}),{address:s,isConnected:o}=(0,le.m)(),c=(0,l.z)((e=>e.refreshPrediction)),u=(0,l.z)((e=>e.setPredictionLoading)),d=(0,l.z)((e=>e.setPredictionHasMore)),m=(0,l.z)((e=>e.resetPrediction));return(0,n.useEffect)((()=>{e&&c(e?.pages.map((e=>e.data)).flat())}),[e,c]),(0,n.useEffect)((()=>(o&&s?T.ee.on("FETCH_DUMB_HISTORY_LIST",i):T.ee.off("FETCH_DUMB_HISTORY_LIST",i),()=>{T.ee.off("FETCH_DUMB_HISTORY_LIST",i)})),[s,o,i]),(0,n.useEffect)((()=>{u(r??!1)}),[r,u]),(0,n.useEffect)((()=>{d(t??!1)}),[t,d]),(0,n.useEffect)((()=>()=>{m()}),[m]),(0,n.useMemo)((()=>({hasMore:t,loadMoreLoading:r})),[t,r])},Ee=()=>{const e=(0,a.E4)(),t=(0,o.h)(),i=(0,ce.x)(),{address:s,isConnected:c}=(0,le.m)(),u=(0,l.z)((e=>e.appendHistory)),d=(0,l.z)((e=>e.resetHistory)),[m,p]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),g=(0,n.useRef)(0),y=(0,n.useRef)(0),E=(0,ue.Z)(),x=(0,oe.D)((async()=>{if(!c||!s)return;if(h)return;let n,a;if(f(!0),t){const{orderAndTradeHistories:e}=await(async({chainId:e,address:t,page:i=1,limit:n=10})=>{const a=(0,me.pT)(e);try{if(!t&&!a)return{order:null};const e=(0,pe.BH)(a?.apiNetwork||"bnb"),r={query:"\n  query OrderAndTradeHistorys($skip: Int, $first: Int, $user: String) {\n    orderAndTradeHistories(\n        skip: $skip\n        first: $first\n        orderBy: timestamp\n        orderDirection: desc\n        where: { \n            user: $user\n            actionType_not: ADD_MARGIN\n        }\n    ) {\n        id\n        orderOrTradeHash\n        actionType\n        timestamp\n        txHash\n        limitOrder {\n            pair {\n                name\n            }\n            isLong\n            token {\n                symbol\n            }\n            amountIn\n            limitPrice\n            qty\n            takeProfit\n            stopLoss\n        }\n        trade {\n            pair {\n                name\n            }\n            isLong\n            token {\n                symbol\n            }\n            margin\n            entryPrice\n            qty\n            openFee\n            executionFee\n            closeType\n            closePrice\n            closeFee\n            fundingFee\n            holdingFee\n            pnl\n            actualPnl\n        }\n    }\n}\n",variables:{user:t,skip:i,first:n}},s={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(r),next:{revalidate:60}};return(0,he.wu)("graphql_request",{api:e,feature:"UserInfo/History",source:"apx"}),(await(await fetch(e,s)).json()).data}catch(e){return{order:null}}})({chainId:i,address:s,page:g.current*ge,limit:ge});n=e||[],a=n.filter((e=>"LIMIT"!==e.actionType)).map((e=>{const t=fe[e.actionType]||{},i={hash:`${e.orderOrTradeHash}-${e.timestamp}-${t.index}`,timestamp:`${e.timestamp}000`,actionType:t.label,side:"LONG",pair:"",tokenSymbol:"",isLong:!1,qty:"",entryPrice:"",margin:"",closePrice:"",openFee:"",fundingFee:"",closeFee:"",executionFee:"",holdingFee:"",pnl:""};let n={};return n="CANCEL_LIMIT"===e.actionType||"SYSTEM_CANCEL"===e.actionType?{pair:e.limitOrder.pair.name.replace("/",""),isLong:e.limitOrder.isLong,side:e.limitOrder.isLong?"LONG":"SHORT",tokenSymbol:e.limitOrder.token.symbol}:{pair:e.trade?.pair.name.replace("/",""),isLong:e.trade?.isLong,side:e.trade?.isLong?"LONG":"SHORT",qty:e.trade?.qty,entryPrice:e.trade?.entryPrice,closePrice:e.trade?.closePrice,margin:e.trade?.margin,openFee:e.trade?.openFee,executionFee:e.trade?.executionFee,fundingFee:e.trade?.fundingFee,closeFee:e.trade?.closeFee,holdingFee:e.trade?.holdingFee,pnl:e.trade?.pnl,tokenSymbol:e.trade?.token.symbol},{...e,...i,...n}}))}else{const t=await(0,de.L)(E,{...e,functionName:"getOrderAndTradeHistoryV2",args:[s,BigInt(g.current*ge),ge]});n=t,a=t.filter((e=>0!==e.actionType)).map((e=>{const t=Object.values(fe).find((t=>t.index===e.actionType))||fe.LIMIT,i={hash:`${e.hash}-${e.timestamp}-${e.actionType}`,timestamp:`${e.timestamp}000`,pair:e.pair.replace("/",""),isLong:e.isLong,actionType:t.label,side:e.isLong?"LONG":"SHORT",margin:e.margin.toString(),qty:(0,r.m)(e.qty.toString(),A.cB.qty),entryPrice:(0,r.m)(e.entryPrice.toString(),A.cB.price),closePrice:(0,r.m)(e.closePrice.toString(),A.cB.price),openFee:e.openFee.toString(),executionFee:e.executionFee.toString(),fundingFee:e.fundingFee.toString(),closeFee:e.closeFee.toString(),holdingFee:e.holdingFee.toString(),tokenIn:e.tokenIn,pnl:e.pnl.toString()};return{...e,...i}}))}g.current+=1,y.current+=n.length,f(!1),p(g.current*ge<=y.current),u(a)}));return(0,n.useEffect)((()=>{c||u([])}),[u,c]),(0,n.useEffect)((()=>(c&&x(),()=>{c&&(d(),g.current=0,y.current=0)})),[c]),(0,n.useMemo)((()=>({loadMore:x,hasMore:m,loadMoreLoading:h})),[x,m,h])}}}]);